# Fix comment-json whitespace formatting for multi-line block comments
#
# Without this patch, multi-line block comments would have inconsistent
# indentation and the header comment would be directly followed by the
# opening brace instead of having a proper line break.
#
# This ensures generated wrangler.json files have properly formatted
# comments that match the expected snapshot test output.
diff --git a/src/stringify.js b/src/stringify.js
index 899e5e04d551348675af945b3ea544d93ebb075c..a6a0c0071f7b9333feafb8203203c9761d43c27e 100644
--- a/src/stringify.js
+++ b/src/stringify.js
@@ -93,6 +93,7 @@ const process_comments = (host, symbol_tag, deeper_gap, display_block) => {
       : LF + deeper_gap

     is_line_comment = type === 'LineComment'
+    value = value.split(LF).join(LF + deeper_gap)

     return prev + delimiter + comment_stringify(value, is_line_comment)
   }, EMPTY)
