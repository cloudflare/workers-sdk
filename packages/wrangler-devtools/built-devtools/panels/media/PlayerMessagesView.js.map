{"version":3,"file":"PlayerMessagesView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/media/PlayerMessagesView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport playerMessagesViewStyles from './playerMessagesView.css.js';\n\nimport type * as Protocol from '../../generated/protocol.js';\n\nconst UIStrings = {\n  /**\n  *@description A context menu item in the Console View of the Console panel\n  */\n  default: 'Default',\n  /**\n  *@description Text in Network Throttling Selector of the Network panel\n  */\n  custom: 'Custom',\n  /**\n  *@description Text for everything\n  */\n  all: 'All',\n  /**\n  *@description Text for errors\n  */\n  error: 'Error',\n  /**\n  *@description Text to indicate an item is a warning\n  */\n  warning: 'Warning',\n  /**\n  *@description Sdk console message message level info of level Labels in Console View of the Console panel\n  */\n  info: 'Info',\n  /**\n  *@description Debug log level\n  */\n  debug: 'Debug',\n  /**\n  *@description Label for selecting between the set of log levels to show.\n  */\n  logLevel: 'Log level:',\n  /**\n  *@description Default text for user-text-entry for searching log messages.\n  */\n  filterLogMessages: 'Filter log messages',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/media/PlayerMessagesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst enum MessageLevelBitfield {\n  Error = 0b0001,\n  Warning = 0b0010,\n  Info = 0b0100,\n  Debug = 0b1000,\n\n  Default = 0b0111,  // Error, Warning, Info\n  All = 0b1111,      // Error, Warning, Info, Debug\n  Custom = 0,\n}\n\ninterface SelectableLevel {\n  title: string;\n  value: MessageLevelBitfield;\n  stringValue: string;\n  selectable?: boolean;\n  overwrite?: boolean;\n}\n\nclass MessageLevelSelector implements UI.SoftDropDown.Delegate<SelectableLevel> {\n  private readonly items: UI.ListModel.ListModel<SelectableLevel>;\n  private readonly view: PlayerMessagesView;\n  private readonly itemMap: Map<number, SelectableLevel>;\n  private hiddenLevels: string[];\n  private bitFieldValue: MessageLevelBitfield;\n  private readonly savedBitFieldValue: MessageLevelBitfield;\n  private readonly defaultTitleInternal: Common.UIString.LocalizedString;\n  private readonly customTitle: Common.UIString.LocalizedString;\n  private readonly allTitle: Common.UIString.LocalizedString;\n  elementsForItems: WeakMap<SelectableLevel, HTMLElement>;\n\n  constructor(items: UI.ListModel.ListModel<SelectableLevel>, view: PlayerMessagesView) {\n    this.items = items;\n    this.view = view;\n    this.itemMap = new Map();\n\n    this.hiddenLevels = [];\n\n    this.bitFieldValue = MessageLevelBitfield.Default;\n    this.savedBitFieldValue = MessageLevelBitfield.Default;\n\n    this.defaultTitleInternal = i18nString(UIStrings.default);\n    this.customTitle = i18nString(UIStrings.custom);\n    this.allTitle = i18nString(UIStrings.all);\n\n    this.elementsForItems = new WeakMap();\n  }\n\n  defaultTitle(): Common.UIString.LocalizedString {\n    return this.defaultTitleInternal;\n  }\n\n  setDefault(dropdown: UI.SoftDropDown.SoftDropDown<SelectableLevel>): void {\n    dropdown.selectItem(this.items.at(0));\n  }\n\n  populate(): void {\n    this.items.insert(this.items.length, {\n      title: this.defaultTitleInternal,\n      overwrite: true,\n      stringValue: '',\n      value: MessageLevelBitfield.Default,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: this.allTitle,\n      overwrite: true,\n      stringValue: '',\n      value: MessageLevelBitfield.All,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.error),\n      overwrite: false,\n      stringValue: 'error',\n      value: MessageLevelBitfield.Error,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.warning),\n      overwrite: false,\n      stringValue: 'warning',\n      value: MessageLevelBitfield.Warning,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.info),\n      overwrite: false,\n      stringValue: 'info',\n      value: MessageLevelBitfield.Info,\n      selectable: undefined,\n    });\n\n    this.items.insert(this.items.length, {\n      title: i18nString(UIStrings.debug),\n      overwrite: false,\n      stringValue: 'debug',\n      value: MessageLevelBitfield.Debug,\n      selectable: undefined,\n    });\n  }\n\n  private updateCheckMarks(): void {\n    this.hiddenLevels = [];\n    for (const [key, item] of this.itemMap) {\n      if (!item.overwrite) {\n        const elementForItem = this.elementsForItems.get(item as SelectableLevel);\n        if (elementForItem && elementForItem.firstChild) {\n          elementForItem.firstChild.remove();\n        }\n        if (elementForItem && key & this.bitFieldValue) {\n          UI.UIUtils.createTextChild(elementForItem.createChild('div'), 'âœ“');\n        } else {\n          this.hiddenLevels.push(item.stringValue);\n        }\n      }\n    }\n  }\n\n  titleFor(item: SelectableLevel): string {\n    // This would make a lot more sense to have in |itemSelected|, but this\n    // method gets called first.\n    if (item.overwrite) {\n      this.bitFieldValue = item.value;\n    } else {\n      this.bitFieldValue ^= item.value;\n    }\n\n    if (this.bitFieldValue === MessageLevelBitfield.Default) {\n      return this.defaultTitleInternal;\n    }\n\n    if (this.bitFieldValue === MessageLevelBitfield.All) {\n      return this.allTitle;\n    }\n\n    const potentialMatch = this.itemMap.get(this.bitFieldValue);\n    if (potentialMatch) {\n      return potentialMatch.title;\n    }\n\n    return this.customTitle;\n  }\n\n  createElementForItem(item: SelectableLevel): Element {\n    const element = document.createElement('div');\n    const shadowRoot = UI.Utils.createShadowRootWithCoreStyles(\n        element, {cssFile: [playerMessagesViewStyles], delegatesFocus: undefined});\n    const container = shadowRoot.createChild('div', 'media-messages-level-dropdown-element');\n    const checkBox = container.createChild('div', 'media-messages-level-dropdown-checkbox') as HTMLElement;\n    const text = container.createChild('span', 'media-messages-level-dropdown-text');\n    UI.UIUtils.createTextChild(text, item.title);\n    this.elementsForItems.set(item, checkBox);\n    this.itemMap.set(item.value, item);\n    this.updateCheckMarks();\n    this.view.regenerateMessageDisplayCss(this.hiddenLevels);\n    return element;\n  }\n\n  isItemSelectable(_item: SelectableLevel): boolean {\n    return true;\n  }\n\n  itemSelected(_item: SelectableLevel|null): void {\n    this.updateCheckMarks();\n    this.view.regenerateMessageDisplayCss(this.hiddenLevels);\n  }\n\n  highlightedItemChanged(\n      _from: SelectableLevel|null, _to: SelectableLevel|null, _fromElement: Element|null,\n      _toElement: Element|null): void {\n  }\n}\n\nexport class PlayerMessagesView extends UI.Widget.VBox {\n  private readonly headerPanel: HTMLElement;\n  private readonly bodyPanel: HTMLElement;\n  private messageLevelSelector?: MessageLevelSelector;\n\n  constructor() {\n    super();\n\n    this.headerPanel = this.contentElement.createChild('div', 'media-messages-header');\n    this.bodyPanel = this.contentElement.createChild('div', 'media-messages-body');\n\n    this.buildToolbar();\n  }\n\n  private buildToolbar(): void {\n    const toolbar = new UI.Toolbar.Toolbar('media-messages-toolbar', this.headerPanel);\n    toolbar.appendText(i18nString(UIStrings.logLevel));\n    toolbar.appendToolbarItem(this.createDropdown());\n    toolbar.appendSeparator();\n    toolbar.appendToolbarItem(this.createFilterInput());\n  }\n\n  private createDropdown(): UI.Toolbar.ToolbarItem {\n    const items = new UI.ListModel.ListModel<SelectableLevel>();\n    this.messageLevelSelector = new MessageLevelSelector(items, this);\n    const dropDown = new UI.SoftDropDown.SoftDropDown<SelectableLevel>(items, this.messageLevelSelector);\n    dropDown.setRowHeight(18);\n\n    this.messageLevelSelector.populate();\n    this.messageLevelSelector.setDefault(dropDown);\n\n    const dropDownItem = new UI.Toolbar.ToolbarItem(dropDown.element);\n    dropDownItem.element.classList.add('toolbar-has-dropdown');\n    dropDownItem.setEnabled(true);\n    dropDownItem.setTitle(this.messageLevelSelector.defaultTitle());\n    return dropDownItem;\n  }\n\n  private createFilterInput(): UI.Toolbar.ToolbarInput {\n    const filterInput = new UI.Toolbar.ToolbarInput(i18nString(UIStrings.filterLogMessages));\n    filterInput.addEventListener(UI.Toolbar.ToolbarInput.Event.TextChanged, (data: {data: string}) => {\n      this.filterByString(data as {\n        data: string,\n      });\n    }, this);\n    return filterInput;\n  }\n\n  regenerateMessageDisplayCss(hiddenLevels: string[]): void {\n    const messages = this.bodyPanel.getElementsByClassName('media-messages-message-container');\n    for (const message of messages) {\n      if (this.matchesHiddenLevels(message, hiddenLevels)) {\n        message.classList.add('media-messages-message-unselected');\n      } else {\n        message.classList.remove('media-messages-message-unselected');\n      }\n    }\n  }\n\n  private matchesHiddenLevels(element: Element, hiddenLevels: string[]): boolean {\n    for (const level of hiddenLevels) {\n      if (element.classList.contains('media-message-' + level)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private filterByString(userStringData: {data: string}): void {\n    const userString = userStringData.data;\n    const messages = this.bodyPanel.getElementsByClassName('media-messages-message-container');\n\n    for (const message of messages) {\n      if (userString === '') {\n        message.classList.remove('media-messages-message-filtered');\n      } else if (message.textContent && message.textContent.includes(userString)) {\n        message.classList.remove('media-messages-message-filtered');\n      } else {\n        message.classList.add('media-messages-message-filtered');\n      }\n    }\n  }\n\n  addMessage(message: Protocol.Media.PlayerMessage): void {\n    const container =\n        this.bodyPanel.createChild('div', 'media-messages-message-container media-message-' + message.level);\n    UI.UIUtils.createTextChild(container, message.message);\n  }\n\n  wasShown(): void {\n    super.wasShown();\n    this.registerCSSFiles([playerMessagesViewStyles]);\n  }\n}\n"]}