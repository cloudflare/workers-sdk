{"version":3,"file":"WebauthnPane.js","sourceRoot":"","sources":["../../../../../../front_end/panels/webauthn/WebauthnPane.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as DataGrid from '../../ui/legacy/components/data_grid/data_grid.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport webauthnPaneStyles from './webauthnPane.css.js';\n\nconst UIStrings = {\n  /**\n  *@description Label for button that allows user to download the private key related to a credential.\n  */\n  export: 'Export',\n  /**\n  *@description Label for an item to remove something\n  */\n  remove: 'Remove',\n  /**\n  *@description Label for empty credentials table.\n  *@example {navigator.credentials.create()} PH1\n  */\n  noCredentialsTryCallingSFromYour: 'No credentials. Try calling {PH1} from your website.',\n  /**\n  *@description Label for checkbox to toggle the virtual authenticator environment allowing user to interact with software-based virtual authenticators.\n  */\n  enableVirtualAuthenticator: 'Enable virtual authenticator environment',\n  /**\n  *@description Label for ID field for credentials.\n  */\n  id: 'ID',\n  /**\n  *@description Label for field that describes whether a credential is a resident credential.\n  */\n  isResident: 'Is Resident',\n  /**\n  *@description Label for credential field that represents the Relying Party ID that the credential is scoped to.\n  */\n  rpId: 'RP ID',\n  /**\n  *@description Label for a column in a table. A field/unique ID that represents the user a credential is mapped to.\n  */\n  userHandle: 'User Handle',\n  /**\n  *@description Label for signature counter field for credentials which represents the number of successful assertions.\n  * See https://w3c.github.io/webauthn/#signature-counter.\n  */\n  signCount: 'Signature Count',\n  /**\n  *@description Label for column with actions for credentials.\n  */\n  actions: 'Actions',\n  /**\n  *@description Title for the table that holds the credentials that a authenticator has registered.\n  */\n  credentials: 'Credentials',\n  /**\n  *@description Label for the learn more link that is shown before the virtual environment is enabled.\n  */\n  useWebauthnForPhishingresistant: 'Use WebAuthn for phishing-resistant authentication',\n  /**\n  *@description Text that is usually a hyperlink to more documentation\n  */\n  learnMore: 'Learn more',\n  /**\n  *@description Title for section of interface that allows user to add a new virtual authenticator.\n  */\n  newAuthenticator: 'New authenticator',\n  /**\n  *@description Text for security or network protocol\n  */\n  protocol: 'Protocol',\n  /**\n  *@description Label for input to select which transport option to use on virtual authenticators, e.g. USB or Bluetooth.\n  */\n  transport: 'Transport',\n  /**\n  *@description Label for checkbox that toggles resident key support on virtual authenticators.\n  */\n  supportsResidentKeys: 'Supports resident keys',\n  /**\n  *@description Label for checkbox that toggles large blob support on virtual authenticators. Large blobs are opaque data associated\n  * with a WebAuthn credential that a website can store, like an SSH certificate or a symmetric encryption key.\n  * See https://w3c.github.io/webauthn/#sctn-large-blob-extension\n  */\n  supportsLargeBlob: 'Supports large blob',\n  /**\n  *@description Text to add something\n  */\n  add: 'Add',\n  /**\n  *@description Label for button to add a new virtual authenticator.\n  */\n  addAuthenticator: 'Add authenticator',\n  /**\n  *@description Label for radio button that toggles whether an authenticator is active.\n  */\n  active: 'Active',\n  /**\n  *@description Title for button that enables user to customize name of authenticator.\n  */\n  editName: 'Edit name',\n  /**\n  *@description Title for button that enables user to save name of authenticator after editing it.\n  */\n  saveName: 'Save name',\n  /**\n  *@description Title for a user-added virtual authenticator which is uniquely identified with its AUTHENTICATORID.\n  *@example {8c7873be-0b13-4996-a794-1521331bbd96} PH1\n  */\n  authenticatorS: 'Authenticator {PH1}',\n  /**\n  *@description Name for generated file which user can download. A private key is a secret code which enables encoding and decoding of a credential. .pem is the file extension.\n  */\n  privateKeypem: 'Private key.pem',\n  /**\n  *@description Label for field that holds an authenticator's universally unique identifier (UUID).\n  */\n  uuid: 'UUID',\n  /**\n  *@description Label for checkbox that toggles user verification support on virtual authenticators.\n  */\n  supportsUserVerification: 'Supports user verification',\n  /**\n  *@description Text in Timeline indicating that input has happened recently\n  */\n  yes: 'Yes',\n  /**\n  *@description Text in Timeline indicating that input has not happened recently\n  */\n  no: 'No',\n  /**\n  *@description Title of radio button that sets an authenticator as active.\n  *@example {Authenticator ABCDEF} PH1\n  */\n  setSAsTheActiveAuthenticator: 'Set {PH1} as the active authenticator',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/webauthn/WebauthnPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst TIMEOUT = 1000;\n\nconst enum Events {\n  ExportCredential = 'ExportCredential',\n  RemoveCredential = 'RemoveCredential',\n}\n\ntype EventTypes = {\n  [Events.ExportCredential]: Protocol.WebAuthn.Credential,\n  [Events.RemoveCredential]: Protocol.WebAuthn.Credential,\n};\n\nclass DataGridNode extends DataGrid.DataGrid.DataGridNode<DataGridNode> {\n  constructor(private readonly credential: Protocol.WebAuthn.Credential) {\n    super(credential);\n  }\n\n  nodeSelfHeight(): number {\n    return 24;\n  }\n\n  createCell(columnId: string): HTMLElement {\n    const cell = super.createCell(columnId);\n    UI.Tooltip.Tooltip.install(cell, cell.textContent || '');\n\n    if (columnId !== 'actions') {\n      return cell;\n    }\n\n    const exportButton = UI.UIUtils.createTextButton(i18nString(UIStrings.export), (): void => {\n      if (this.dataGrid) {\n        (this.dataGrid as WebauthnDataGrid).dispatchEventToListeners(Events.ExportCredential, this.credential);\n      }\n    });\n\n    cell.appendChild(exportButton);\n\n    const removeButton = UI.UIUtils.createTextButton(i18nString(UIStrings.remove), (): void => {\n      if (this.dataGrid) {\n        (this.dataGrid as WebauthnDataGrid).dispatchEventToListeners(Events.RemoveCredential, this.credential);\n      }\n    });\n\n    cell.appendChild(removeButton);\n\n    return cell;\n  }\n}\n\nclass WebauthnDataGridBase extends DataGrid.DataGrid.DataGridImpl<DataGridNode> {}\nclass WebauthnDataGrid extends Common.ObjectWrapper.eventMixin<EventTypes, typeof WebauthnDataGridBase>(\n    WebauthnDataGridBase) {}\n\nclass EmptyDataGridNode extends DataGrid.DataGrid.DataGridNode<DataGridNode> {\n  createCells(element: Element): void {\n    element.removeChildren();\n    const td = (this.createTDWithClass(DataGrid.DataGrid.Align.Center) as HTMLTableCellElement);\n    if (this.dataGrid) {\n      td.colSpan = this.dataGrid.visibleColumnsArray.length;\n    }\n\n    const code = document.createElement('span', {is: 'source-code'});\n    code.textContent = 'navigator.credentials.create()';\n    code.classList.add('code');\n    const message = i18n.i18n.getFormatLocalizedString(str_, UIStrings.noCredentialsTryCallingSFromYour, {PH1: code});\n\n    td.appendChild(message);\n    element.appendChild(td);\n  }\n}\n\ntype AvailableAuthenticatorOptions = Protocol.WebAuthn.VirtualAuthenticatorOptions&{\n  active: boolean,\n  authenticatorId: Protocol.WebAuthn.AuthenticatorId,\n};\n\nlet webauthnPaneImplInstance: WebauthnPaneImpl;\n\n// We extrapolate this variable as otherwise git detects a private key, even though we\n// perform string manipulation. If we extract the name, then the regex doesn't match\n// and we can upload as expected.\nconst PRIVATE_NAME = 'PRIVATE';\nconst PRIVATE_KEY_HEADER = `-----BEGIN ${PRIVATE_NAME} KEY-----\n`;\nconst PRIVATE_KEY_FOOTER = `-----END ${PRIVATE_NAME} KEY-----`;\n\nconst PROTOCOL_AUTHENTICATOR_VALUES: Protocol.EnumerableEnum<typeof Protocol.WebAuthn.AuthenticatorProtocol> = {\n  Ctap2: Protocol.WebAuthn.AuthenticatorProtocol.Ctap2,\n  U2f: Protocol.WebAuthn.AuthenticatorProtocol.U2f,\n};\n\nexport class WebauthnPaneImpl extends UI.Widget.VBox implements\n    SDK.TargetManager.SDKModelObserver<SDK.WebAuthnModel.WebAuthnModel> {\n  #activeAuthId: Protocol.WebAuthn.AuthenticatorId|null = null;\n  #hasBeenEnabled = false;\n  readonly #dataGrids = new Map<Protocol.WebAuthn.AuthenticatorId, DataGrid.DataGrid.DataGridImpl<DataGridNode>>();\n  #enableCheckbox!: UI.Toolbar.ToolbarCheckbox;\n  readonly #availableAuthenticatorSetting: Common.Settings.Setting<AvailableAuthenticatorOptions[]>;\n  #model?: SDK.WebAuthnModel.WebAuthnModel;\n  #authenticatorsView: HTMLElement;\n  #topToolbarContainer: HTMLElement|undefined;\n  #topToolbar: UI.Toolbar.Toolbar|undefined;\n  #learnMoreView: HTMLElement|undefined;\n  #newAuthenticatorSection: HTMLElement|undefined;\n  #newAuthenticatorForm: HTMLElement|undefined;\n  #protocolSelect: HTMLSelectElement|undefined;\n  #transportSelect: HTMLSelectElement|undefined;\n  #residentKeyCheckboxLabel: UI.UIUtils.CheckboxLabel|undefined;\n  residentKeyCheckbox: HTMLInputElement|undefined;\n  #userVerificationCheckboxLabel: UI.UIUtils.CheckboxLabel|undefined;\n  #userVerificationCheckbox: HTMLInputElement|undefined;\n  #largeBlobCheckboxLabel: UI.UIUtils.CheckboxLabel|undefined;\n  largeBlobCheckbox: HTMLInputElement|undefined;\n  addAuthenticatorButton: HTMLButtonElement|undefined;\n  #isEnabling?: Promise<void>;\n\n  constructor() {\n    super(true);\n    SDK.TargetManager.TargetManager.instance().observeModels(SDK.WebAuthnModel.WebAuthnModel, this);\n\n    this.contentElement.classList.add('webauthn-pane');\n\n    this.#availableAuthenticatorSetting =\n        Common.Settings.Settings.instance().createSetting<AvailableAuthenticatorOptions[]>(\n            'webauthnAuthenticators', []);\n\n    this.#createToolbar();\n    this.#authenticatorsView = this.contentElement.createChild('div', 'authenticators-view');\n    this.#createNewAuthenticatorSection();\n    this.#updateVisibility(false);\n  }\n\n  static instance(opts = {forceNew: null}): WebauthnPaneImpl {\n    const {forceNew} = opts;\n    if (!webauthnPaneImplInstance || forceNew) {\n      webauthnPaneImplInstance = new WebauthnPaneImpl();\n    }\n\n    return webauthnPaneImplInstance;\n  }\n\n  modelAdded(model: SDK.WebAuthnModel.WebAuthnModel): void {\n    if (model.target() === SDK.TargetManager.TargetManager.instance().mainTarget()) {\n      this.#model = model;\n    }\n  }\n\n  modelRemoved(model: SDK.WebAuthnModel.WebAuthnModel): void {\n    if (model.target() === SDK.TargetManager.TargetManager.instance().mainTarget()) {\n      this.#model = undefined;\n    }\n  }\n\n  async #loadInitialAuthenticators(): Promise<void> {\n    let activeAuthenticatorId: Protocol.WebAuthn.AuthenticatorId|null = null;\n    const availableAuthenticators = this.#availableAuthenticatorSetting.get();\n    for (const options of availableAuthenticators) {\n      if (!this.#model) {\n        continue;\n      }\n\n      const authenticatorId = await this.#model.addAuthenticator(options);\n      void this.#addAuthenticatorSection(authenticatorId, options);\n      // Update the authenticatorIds in the options.\n      options.authenticatorId = authenticatorId;\n      if (options.active) {\n        activeAuthenticatorId = authenticatorId;\n      }\n    }\n\n    // Update the settings to reflect the new authenticatorIds.\n    this.#availableAuthenticatorSetting.set(availableAuthenticators);\n    if (activeAuthenticatorId) {\n      void this.#setActiveAuthenticator(activeAuthenticatorId);\n    }\n  }\n\n  async ownerViewDisposed(): Promise<void> {\n    if (this.#enableCheckbox) {\n      this.#enableCheckbox.setChecked(false);\n    }\n    await this.#setVirtualAuthEnvEnabled(false);\n  }\n\n  #createToolbar(): void {\n    this.#topToolbarContainer = this.contentElement.createChild('div', 'webauthn-toolbar-container');\n    this.#topToolbar = new UI.Toolbar.Toolbar('webauthn-toolbar', this.#topToolbarContainer);\n    const enableCheckboxTitle = i18nString(UIStrings.enableVirtualAuthenticator);\n    this.#enableCheckbox =\n        new UI.Toolbar.ToolbarCheckbox(enableCheckboxTitle, enableCheckboxTitle, this.#handleCheckboxToggle.bind(this));\n    this.#topToolbar.appendToolbarItem(this.#enableCheckbox);\n  }\n\n  #createCredentialsDataGrid(authenticatorId: Protocol.WebAuthn.AuthenticatorId):\n      DataGrid.DataGrid.DataGridImpl<DataGridNode> {\n    const columns = ([\n      {\n        id: 'credentialId',\n        title: i18nString(UIStrings.id),\n        longText: true,\n        weight: 24,\n      },\n      {\n        id: 'isResidentCredential',\n        title: i18nString(UIStrings.isResident),\n        dataType: DataGrid.DataGrid.DataType.Boolean,\n        weight: 10,\n      },\n      {\n        id: 'rpId',\n        title: i18nString(UIStrings.rpId),\n      },\n      {\n        id: 'userHandle',\n        title: i18nString(UIStrings.userHandle),\n      },\n      {\n        id: 'signCount',\n        title: i18nString(UIStrings.signCount),\n      },\n      {id: 'actions', title: i18nString(UIStrings.actions)},\n    ] as DataGrid.DataGrid.ColumnDescriptor[]);\n\n    const dataGridConfig = {\n      displayName: i18nString(UIStrings.credentials),\n      columns,\n      editCallback: undefined,\n      deleteCallback: undefined,\n      refreshCallback: undefined,\n    };\n    const dataGrid = new WebauthnDataGrid(dataGridConfig);\n    dataGrid.renderInline();\n    dataGrid.setStriped(true);\n    dataGrid.addEventListener(Events.ExportCredential, this.#handleExportCredential, this);\n    dataGrid.addEventListener(Events.RemoveCredential, this.#handleRemoveCredential.bind(this, authenticatorId));\n\n    this.#dataGrids.set(authenticatorId, dataGrid);\n\n    return dataGrid;\n  }\n\n  #handleExportCredential({data: credential}: Common.EventTarget.EventTargetEvent<Protocol.WebAuthn.Credential>): void {\n    this.#exportCredential(credential);\n  }\n\n  #handleRemoveCredential(authenticatorId: Protocol.WebAuthn.AuthenticatorId, {\n    data: credential,\n  }: Common.EventTarget.EventTargetEvent<Protocol.WebAuthn.Credential>): void {\n    void this.#removeCredential(authenticatorId, credential.credentialId);\n  }\n\n  async #updateCredentials(authenticatorId: Protocol.WebAuthn.AuthenticatorId): Promise<void> {\n    const dataGrid = this.#dataGrids.get(authenticatorId);\n    if (!dataGrid) {\n      return;\n    }\n\n    if (this.#model) {\n      const credentials = await this.#model.getCredentials(authenticatorId);\n\n      dataGrid.rootNode().removeChildren();\n      for (const credential of credentials) {\n        const node = new DataGridNode(credential);\n        dataGrid.rootNode().appendChild(node);\n      }\n\n      this.#maybeAddEmptyNode(dataGrid);\n    }\n\n    // TODO(crbug.com/1112528): Add back-end events for credential creation and removal to avoid polling.\n    window.setTimeout(this.#updateCredentials.bind(this, authenticatorId), TIMEOUT);\n  }\n\n  #maybeAddEmptyNode(dataGrid: DataGrid.DataGrid.DataGridImpl<DataGridNode>): void {\n    if (dataGrid.rootNode().children.length) {\n      return;\n    }\n\n    const node = new EmptyDataGridNode();\n    dataGrid.rootNode().appendChild(node);\n  }\n\n  async #setVirtualAuthEnvEnabled(enable: boolean): Promise<void> {\n    await this.#isEnabling;\n    this.#isEnabling = new Promise<void>(async (resolve: (value: void) => void) => {\n      if (enable && !this.#hasBeenEnabled) {\n        // Ensures metric is only tracked once per session.\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.VirtualAuthenticatorEnvironmentEnabled);\n        this.#hasBeenEnabled = true;\n      }\n      if (this.#model) {\n        await this.#model.setVirtualAuthEnvEnabled(enable);\n      }\n\n      if (enable) {\n        await this.#loadInitialAuthenticators();\n      } else {\n        this.#removeAuthenticatorSections();\n      }\n\n      this.#updateVisibility(enable);\n      this.#isEnabling = undefined;\n      resolve();\n    });\n  }\n\n  #updateVisibility(enabled: boolean): void {\n    this.contentElement.classList.toggle('enabled', enabled);\n  }\n\n  #removeAuthenticatorSections(): void {\n    this.#authenticatorsView.innerHTML = '';\n    for (const dataGrid of this.#dataGrids.values()) {\n      dataGrid.asWidget().detach();\n    }\n    this.#dataGrids.clear();\n  }\n\n  #handleCheckboxToggle(e: MouseEvent): void {\n    void this.#setVirtualAuthEnvEnabled((e.target as HTMLInputElement).checked);\n  }\n\n  #updateEnabledTransportOptions(enabledOptions: Protocol.WebAuthn.AuthenticatorTransport[]): void {\n    if (!this.#transportSelect) {\n      return;\n    }\n\n    const prevValue = this.#transportSelect.value;\n    this.#transportSelect.removeChildren();\n\n    for (const option of enabledOptions) {\n      this.#transportSelect.appendChild(new Option(option, option));\n    }\n\n    // Make sure the currently selected value stays the same.\n    this.#transportSelect.value = prevValue;\n    // If the new set does not include the previous value.\n    if (!this.#transportSelect.value) {\n      // Select the first available value.\n      this.#transportSelect.selectedIndex = 0;\n    }\n  }\n\n  #updateNewAuthenticatorSectionOptions(): void {\n    if (!this.#protocolSelect || !this.residentKeyCheckbox || !this.#userVerificationCheckbox ||\n        !this.largeBlobCheckbox) {\n      return;\n    }\n\n    if (this.#protocolSelect.value === Protocol.WebAuthn.AuthenticatorProtocol.Ctap2) {\n      this.residentKeyCheckbox.disabled = false;\n      this.#userVerificationCheckbox.disabled = false;\n      this.largeBlobCheckbox.disabled = !this.residentKeyCheckbox.checked;\n      if (this.largeBlobCheckbox.disabled) {\n        this.largeBlobCheckbox.checked = false;\n      }\n      this.#updateEnabledTransportOptions([\n        Protocol.WebAuthn.AuthenticatorTransport.Usb,\n        Protocol.WebAuthn.AuthenticatorTransport.Ble,\n        Protocol.WebAuthn.AuthenticatorTransport.Nfc,\n        // TODO (crbug.com/1034663): Toggle cable as option depending on if cablev2 flag is on.\n        // Protocol.WebAuthn.AuthenticatorTransport.Cable,\n        Protocol.WebAuthn.AuthenticatorTransport.Internal,\n      ]);\n    } else {\n      this.residentKeyCheckbox.checked = false;\n      this.residentKeyCheckbox.disabled = true;\n      this.#userVerificationCheckbox.checked = false;\n      this.#userVerificationCheckbox.disabled = true;\n      this.largeBlobCheckbox.checked = false;\n      this.largeBlobCheckbox.disabled = true;\n      this.#updateEnabledTransportOptions([\n        Protocol.WebAuthn.AuthenticatorTransport.Usb,\n        Protocol.WebAuthn.AuthenticatorTransport.Ble,\n        Protocol.WebAuthn.AuthenticatorTransport.Nfc,\n      ]);\n    }\n  }\n\n  #createNewAuthenticatorSection(): void {\n    this.#learnMoreView = this.contentElement.createChild('div', 'learn-more');\n    this.#learnMoreView.appendChild(UI.Fragment.html`\n  <div>\n  ${i18nString(UIStrings.useWebauthnForPhishingresistant)}<br /><br />\n  ${\n        UI.XLink.XLink.create(\n            'https://developers.google.com/web/updates/2018/05/webauthn', i18nString(UIStrings.learnMore))}\n  </div>\n  `);\n\n    this.#newAuthenticatorSection = this.contentElement.createChild('div', 'new-authenticator-container');\n    const newAuthenticatorTitle =\n        UI.UIUtils.createLabel(i18nString(UIStrings.newAuthenticator), 'new-authenticator-title');\n    this.#newAuthenticatorSection.appendChild(newAuthenticatorTitle);\n    this.#newAuthenticatorForm = this.#newAuthenticatorSection.createChild('div', 'new-authenticator-form');\n\n    const protocolGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n    const transportGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n    const residentKeyGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n    const userVerificationGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n    const largeBlobGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n    const addButtonGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n\n    const protocolSelectTitle = UI.UIUtils.createLabel(i18nString(UIStrings.protocol), 'authenticator-option-label');\n    protocolGroup.appendChild(protocolSelectTitle);\n    this.#protocolSelect = (protocolGroup.createChild('select', 'chrome-select') as HTMLSelectElement);\n    UI.ARIAUtils.bindLabelToControl(protocolSelectTitle, (this.#protocolSelect as Element));\n    Object.values(PROTOCOL_AUTHENTICATOR_VALUES)\n        .sort()\n        .forEach((option: Protocol.WebAuthn.AuthenticatorProtocol): void => {\n          if (this.#protocolSelect) {\n            this.#protocolSelect.appendChild(new Option(option, option));\n          }\n        });\n\n    if (this.#protocolSelect) {\n      this.#protocolSelect.value = Protocol.WebAuthn.AuthenticatorProtocol.Ctap2;\n    }\n\n    const transportSelectTitle = UI.UIUtils.createLabel(i18nString(UIStrings.transport), 'authenticator-option-label');\n    transportGroup.appendChild(transportSelectTitle);\n    this.#transportSelect = (transportGroup.createChild('select', 'chrome-select') as HTMLSelectElement);\n    UI.ARIAUtils.bindLabelToControl(transportSelectTitle, (this.#transportSelect as Element));\n    // transportSelect will be populated in updateNewAuthenticatorSectionOptions.\n\n    this.#residentKeyCheckboxLabel = UI.UIUtils.CheckboxLabel.create(i18nString(UIStrings.supportsResidentKeys), false);\n    this.#residentKeyCheckboxLabel.textElement.classList.add('authenticator-option-label');\n    residentKeyGroup.appendChild(this.#residentKeyCheckboxLabel.textElement);\n    this.residentKeyCheckbox = this.#residentKeyCheckboxLabel.checkboxElement;\n    this.residentKeyCheckbox.checked = false;\n    this.residentKeyCheckbox.classList.add('authenticator-option-checkbox');\n    residentKeyGroup.appendChild(this.#residentKeyCheckboxLabel);\n\n    this.#userVerificationCheckboxLabel = UI.UIUtils.CheckboxLabel.create('Supports user verification', false);\n    this.#userVerificationCheckboxLabel.textElement.classList.add('authenticator-option-label');\n    userVerificationGroup.appendChild(this.#userVerificationCheckboxLabel.textElement);\n    this.#userVerificationCheckbox = this.#userVerificationCheckboxLabel.checkboxElement;\n    this.#userVerificationCheckbox.checked = false;\n    this.#userVerificationCheckbox.classList.add('authenticator-option-checkbox');\n    userVerificationGroup.appendChild(this.#userVerificationCheckboxLabel);\n\n    this.#largeBlobCheckboxLabel = UI.UIUtils.CheckboxLabel.create(i18nString(UIStrings.supportsLargeBlob), false);\n    this.#largeBlobCheckboxLabel.textElement.classList.add('authenticator-option-label');\n    largeBlobGroup.appendChild(this.#largeBlobCheckboxLabel.textElement);\n    this.largeBlobCheckbox = this.#largeBlobCheckboxLabel.checkboxElement;\n    this.largeBlobCheckbox.checked = false;\n    this.largeBlobCheckbox.classList.add('authenticator-option-checkbox');\n    this.largeBlobCheckbox.name = 'large-blob-checkbox';\n    largeBlobGroup.appendChild(this.#largeBlobCheckboxLabel);\n\n    this.addAuthenticatorButton =\n        UI.UIUtils.createTextButton(i18nString(UIStrings.add), this.#handleAddAuthenticatorButton.bind(this), '');\n    addButtonGroup.createChild('div', 'authenticator-option-label');\n    addButtonGroup.appendChild(this.addAuthenticatorButton);\n    const addAuthenticatorTitle = UI.UIUtils.createLabel(i18nString(UIStrings.addAuthenticator), '');\n    UI.ARIAUtils.bindLabelToControl(addAuthenticatorTitle, this.addAuthenticatorButton);\n\n    this.#updateNewAuthenticatorSectionOptions();\n    if (this.#protocolSelect) {\n      this.#protocolSelect.addEventListener('change', this.#updateNewAuthenticatorSectionOptions.bind(this));\n    }\n    if (this.residentKeyCheckbox) {\n      this.residentKeyCheckbox.addEventListener('change', this.#updateNewAuthenticatorSectionOptions.bind(this));\n    }\n  }\n\n  async #handleAddAuthenticatorButton(): Promise<void> {\n    const options = this.#createOptionsFromCurrentInputs();\n    if (this.#model) {\n      const authenticatorId = await this.#model.addAuthenticator(options);\n      const availableAuthenticators = this.#availableAuthenticatorSetting.get();\n      availableAuthenticators.push({authenticatorId, active: true, ...options});\n      this.#availableAuthenticatorSetting.set(\n          availableAuthenticators.map(a => ({...a, active: a.authenticatorId === authenticatorId})));\n      const section = await this.#addAuthenticatorSection(authenticatorId, options);\n      const mediaQueryList = window.matchMedia('(prefers-reduced-motion: reduce)');\n      const prefersReducedMotion = mediaQueryList.matches;\n      section.scrollIntoView({block: 'start', behavior: prefersReducedMotion ? 'auto' : 'smooth'});\n    }\n  }\n\n  async #addAuthenticatorSection(\n      authenticatorId: Protocol.WebAuthn.AuthenticatorId,\n      options: Protocol.WebAuthn.VirtualAuthenticatorOptions): Promise<HTMLDivElement> {\n    const section = document.createElement('div');\n    section.classList.add('authenticator-section');\n    section.setAttribute('data-authenticator-id', authenticatorId);\n    this.#authenticatorsView.appendChild(section);\n\n    const headerElement = section.createChild('div', 'authenticator-section-header');\n    const titleElement = headerElement.createChild('div', 'authenticator-section-title');\n    UI.ARIAUtils.markAsHeading(titleElement, 2);\n\n    await this.#clearActiveAuthenticator();\n    const activeButtonContainer = headerElement.createChild('div', 'active-button-container');\n    const activeLabel =\n        UI.UIUtils.createRadioLabel(`active-authenticator-${authenticatorId}`, i18nString(UIStrings.active));\n    activeLabel.radioElement.addEventListener('click', this.#setActiveAuthenticator.bind(this, authenticatorId));\n    activeButtonContainer.appendChild(activeLabel);\n    (activeLabel.radioElement as HTMLInputElement).checked = true;\n    this.#activeAuthId = authenticatorId;  // Newly added authenticator is automatically set as active.\n\n    const removeButton = headerElement.createChild('button', 'text-button');\n    removeButton.textContent = i18nString(UIStrings.remove);\n    removeButton.addEventListener('click', this.#removeAuthenticator.bind(this, authenticatorId));\n\n    const toolbar = new UI.Toolbar.Toolbar('edit-name-toolbar', titleElement);\n    const editName = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.editName), 'largeicon-edit');\n    const saveName = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.saveName), 'largeicon-checkmark');\n    saveName.setVisible(false);\n\n    const nameField = (titleElement.createChild('input', 'authenticator-name-field') as HTMLInputElement);\n    nameField.disabled = true;\n    const userFriendlyName = authenticatorId.slice(-5);  // User friendly name defaults to last 5 chars of UUID.\n    nameField.value = i18nString(UIStrings.authenticatorS, {PH1: userFriendlyName});\n    this.#updateActiveLabelTitle(activeLabel, nameField.value);\n\n    editName.addEventListener(\n        UI.Toolbar.ToolbarButton.Events.Click,\n        (): void => this.#handleEditNameButton(titleElement, nameField, editName, saveName));\n    saveName.addEventListener(\n        UI.Toolbar.ToolbarButton.Events.Click,\n        (): void => this.#handleSaveNameButton(titleElement, nameField, editName, saveName, activeLabel));\n\n    nameField.addEventListener(\n        'focusout', (): void => this.#handleSaveNameButton(titleElement, nameField, editName, saveName, activeLabel));\n    nameField.addEventListener('keydown', (event: KeyboardEvent): void => {\n      if (event.key === 'Enter') {\n        this.#handleSaveNameButton(titleElement, nameField, editName, saveName, activeLabel);\n      }\n    });\n\n    toolbar.appendToolbarItem(editName);\n    toolbar.appendToolbarItem(saveName);\n\n    this.#createAuthenticatorFields(section, authenticatorId, options);\n\n    const label = document.createElement('div');\n    label.classList.add('credentials-title');\n    label.textContent = i18nString(UIStrings.credentials);\n    section.appendChild(label);\n\n    const dataGrid = this.#createCredentialsDataGrid(authenticatorId);\n    dataGrid.asWidget().show(section);\n\n    void this.#updateCredentials(authenticatorId);\n\n    return section;\n  }\n\n  #exportCredential(credential: Protocol.WebAuthn.Credential): void {\n    let pem = PRIVATE_KEY_HEADER;\n    for (let i = 0; i < credential.privateKey.length; i += 64) {\n      pem += credential.privateKey.substring(i, i + 64) + '\\n';\n    }\n    pem += PRIVATE_KEY_FOOTER;\n\n    const link = document.createElement('a');\n    link.download = i18nString(UIStrings.privateKeypem);\n    link.href = 'data:application/x-pem-file,' + encodeURIComponent(pem);\n    link.click();\n  }\n\n  async #removeCredential(authenticatorId: Protocol.WebAuthn.AuthenticatorId, credentialId: string): Promise<void> {\n    const dataGrid = this.#dataGrids.get(authenticatorId);\n    if (!dataGrid) {\n      return;\n    }\n\n    // @ts-ignore dataGrid node type is indeterminate.\n    dataGrid.rootNode()\n        .children\n        .find((n: DataGrid.DataGrid.DataGridNode<DataGridNode>): boolean => n.data.credentialId === credentialId)\n        .remove();\n    this.#maybeAddEmptyNode(dataGrid);\n\n    if (this.#model) {\n      await this.#model.removeCredential(authenticatorId, credentialId);\n    }\n  }\n\n  /**\n   * Creates the fields describing the authenticator in the front end.\n   */\n  #createAuthenticatorFields(\n      section: Element, authenticatorId: string, options: Protocol.WebAuthn.VirtualAuthenticatorOptions): void {\n    const sectionFields = section.createChild('div', 'authenticator-fields');\n    const uuidField = sectionFields.createChild('div', 'authenticator-field');\n    const protocolField = sectionFields.createChild('div', 'authenticator-field');\n    const transportField = sectionFields.createChild('div', 'authenticator-field');\n    const srkField = sectionFields.createChild('div', 'authenticator-field');\n    const slbField = sectionFields.createChild('div', 'authenticator-field');\n    const suvField = sectionFields.createChild('div', 'authenticator-field');\n\n    uuidField.appendChild(UI.UIUtils.createLabel(i18nString(UIStrings.uuid), 'authenticator-option-label'));\n    protocolField.appendChild(UI.UIUtils.createLabel(i18nString(UIStrings.protocol), 'authenticator-option-label'));\n    transportField.appendChild(UI.UIUtils.createLabel(i18nString(UIStrings.transport), 'authenticator-option-label'));\n    srkField.appendChild(\n        UI.UIUtils.createLabel(i18nString(UIStrings.supportsResidentKeys), 'authenticator-option-label'));\n    slbField.appendChild(UI.UIUtils.createLabel(i18nString(UIStrings.supportsLargeBlob), 'authenticator-option-label'));\n    suvField.appendChild(\n        UI.UIUtils.createLabel(i18nString(UIStrings.supportsUserVerification), 'authenticator-option-label'));\n\n    uuidField.createChild('div', 'authenticator-field-value').textContent = authenticatorId;\n    protocolField.createChild('div', 'authenticator-field-value').textContent = options.protocol;\n    transportField.createChild('div', 'authenticator-field-value').textContent = options.transport;\n    srkField.createChild('div', 'authenticator-field-value').textContent =\n        options.hasResidentKey ? i18nString(UIStrings.yes) : i18nString(UIStrings.no);\n    slbField.createChild('div', 'authenticator-field-value').textContent =\n        options.hasLargeBlob ? i18nString(UIStrings.yes) : i18nString(UIStrings.no);\n    suvField.createChild('div', 'authenticator-field-value').textContent =\n        options.hasUserVerification ? i18nString(UIStrings.yes) : i18nString(UIStrings.no);\n  }\n\n  #handleEditNameButton(\n      titleElement: Element, nameField: HTMLInputElement, editName: UI.Toolbar.ToolbarButton,\n      saveName: UI.Toolbar.ToolbarButton): void {\n    nameField.disabled = false;\n    titleElement.classList.add('editing-name');\n    nameField.focus();\n    saveName.setVisible(true);\n    editName.setVisible(false);\n  }\n\n  #handleSaveNameButton(\n      titleElement: Element, nameField: HTMLInputElement, editName: UI.Toolbar.ToolbarItem,\n      saveName: UI.Toolbar.ToolbarItem, activeLabel: UI.UIUtils.DevToolsRadioButton): void {\n    nameField.disabled = true;\n    titleElement.classList.remove('editing-name');\n    editName.setVisible(true);\n    saveName.setVisible(false);\n    this.#updateActiveLabelTitle(activeLabel, nameField.value);\n  }\n\n  #updateActiveLabelTitle(activeLabel: UI.UIUtils.DevToolsRadioButton, authenticatorName: string): void {\n    UI.Tooltip.Tooltip.install(\n        activeLabel.radioElement, i18nString(UIStrings.setSAsTheActiveAuthenticator, {PH1: authenticatorName}));\n  }\n\n  /**\n   * Removes both the authenticator and its respective UI element.\n   */\n  #removeAuthenticator(authenticatorId: Protocol.WebAuthn.AuthenticatorId): void {\n    if (this.#authenticatorsView) {\n      const child = this.#authenticatorsView.querySelector(`[data-authenticator-id=${CSS.escape(authenticatorId)}]`);\n      if (child) {\n        child.remove();\n      }\n    }\n    const dataGrid = this.#dataGrids.get(authenticatorId);\n    if (dataGrid) {\n      dataGrid.asWidget().detach();\n      this.#dataGrids.delete(authenticatorId);\n    }\n\n    if (this.#model) {\n      void this.#model.removeAuthenticator(authenticatorId);\n    }\n\n    // Update available authenticator setting.\n    const prevAvailableAuthenticators = this.#availableAuthenticatorSetting.get();\n    const newAvailableAuthenticators = prevAvailableAuthenticators.filter(a => a.authenticatorId !== authenticatorId);\n    this.#availableAuthenticatorSetting.set(newAvailableAuthenticators);\n\n    if (this.#activeAuthId === authenticatorId) {\n      const availableAuthenticatorIds = Array.from(this.#dataGrids.keys());\n      if (availableAuthenticatorIds.length) {\n        void this.#setActiveAuthenticator(availableAuthenticatorIds[0]);\n      } else {\n        this.#activeAuthId = null;\n      }\n    }\n  }\n\n  #createOptionsFromCurrentInputs(): Protocol.WebAuthn.VirtualAuthenticatorOptions {\n    // TODO(crbug.com/1034663): Add optionality for isUserVerified param.\n    if (!this.#protocolSelect || !this.#transportSelect || !this.residentKeyCheckbox ||\n        !this.#userVerificationCheckbox || !this.largeBlobCheckbox) {\n      throw new Error('Unable to create options from current inputs');\n    }\n\n    return {\n      protocol: this.#protocolSelect.options[this.#protocolSelect.selectedIndex].value as\n          Protocol.WebAuthn.AuthenticatorProtocol,\n      ctap2Version: Protocol.WebAuthn.Ctap2Version.Ctap2_1,\n      transport: this.#transportSelect.options[this.#transportSelect.selectedIndex].value as\n          Protocol.WebAuthn.AuthenticatorTransport,\n      hasResidentKey: this.residentKeyCheckbox.checked,\n      hasUserVerification: this.#userVerificationCheckbox.checked,\n      hasLargeBlob: this.largeBlobCheckbox.checked,\n      automaticPresenceSimulation: true,\n      isUserVerified: true,\n    };\n  }\n\n  /**\n   * Sets the given authenticator as active.\n   * Note that a newly added authenticator will automatically be set as active.\n   */\n  async #setActiveAuthenticator(authenticatorId: Protocol.WebAuthn.AuthenticatorId): Promise<void> {\n    await this.#clearActiveAuthenticator();\n    if (this.#model) {\n      await this.#model.setAutomaticPresenceSimulation(authenticatorId, true);\n    }\n    this.#activeAuthId = authenticatorId;\n\n    const prevAvailableAuthenticators = this.#availableAuthenticatorSetting.get();\n    const newAvailableAuthenticators =\n        prevAvailableAuthenticators.map(a => ({...a, active: a.authenticatorId === authenticatorId}));\n    this.#availableAuthenticatorSetting.set(newAvailableAuthenticators);\n\n    this.#updateActiveButtons();\n  }\n\n  #updateActiveButtons(): void {\n    const authenticators = this.#authenticatorsView.getElementsByClassName('authenticator-section');\n    Array.from(authenticators).forEach((authenticator: Element): void => {\n      const button = (authenticator.querySelector('input.dt-radio-button') as HTMLInputElement);\n      if (!button) {\n        return;\n      }\n      button.checked = (authenticator as HTMLElement).dataset.authenticatorId === this.#activeAuthId;\n    });\n  }\n\n  async #clearActiveAuthenticator(): Promise<void> {\n    if (this.#activeAuthId && this.#model) {\n      await this.#model.setAutomaticPresenceSimulation(this.#activeAuthId, false);\n    }\n    this.#activeAuthId = null;\n    this.#updateActiveButtons();\n  }\n  wasShown(): void {\n    super.wasShown();\n    this.registerCSSFiles([webauthnPaneStyles]);\n  }\n}\n"]}