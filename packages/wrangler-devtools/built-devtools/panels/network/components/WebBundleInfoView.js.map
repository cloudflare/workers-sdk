{"version":3,"file":"WebBundleInfoView.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/network/components/WebBundleInfoView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../core/common/common.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as SDK from '../../../core/sdk/sdk.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as DataGrid from '../../../ui/components/data_grid/data_grid.js';\nimport {imageNameForResourceType} from '../../../panels/utils/utils.js';\nimport webBundleInfoViewStyles from './WebBundleInfoView.css.js';\n\nconst {render, html} = LitHtml;\n\nconst UIStrings = {\n  /**\n  *@description Header for the column that contains URL of the resource in a web bundle.\n  */\n  bundledResource: 'Bundled resource',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/network/components/WebBundleInfoView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class WebBundleInfoView extends UI.Widget.VBox {\n  constructor(request: SDK.NetworkRequest.NetworkRequest) {\n    super();\n    const webBundleInfo = request.webBundleInfo();\n    if (!webBundleInfo) {\n      throw new Error('Trying to render a Web Bundle info without providing data');\n    }\n\n    const webBundleInfoElement = new WebBundleInfoElement(webBundleInfo, request.parsedURL.lastPathComponent);\n    this.contentElement.appendChild(webBundleInfoElement);\n    webBundleInfoElement.render();\n  }\n}\n\nexport class WebBundleInfoElement extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-web-bundle-info`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #webBundleInfo: Readonly<SDK.NetworkRequest.WebBundleInfo>;\n  #webBundleName: Readonly<string>;\n  constructor(webBundleInfo: SDK.NetworkRequest.WebBundleInfo, webBundleName: string) {\n    super();\n    this.#webBundleInfo = webBundleInfo;\n    this.#webBundleName = webBundleName;\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [webBundleInfoViewStyles];\n  }\n\n  render(): void {\n    const rows = this.#webBundleInfo.resourceUrls?.map(url => {\n      const mimeType = Common.ResourceType.ResourceType.mimeFromURL(url) || null;\n      const resourceType = Common.ResourceType.ResourceType.fromMimeTypeOverride(mimeType) ||\n          Common.ResourceType.ResourceType.fromMimeType(mimeType);\n      const iconName = imageNameForResourceType(resourceType);\n      return {\n        cells: [\n          {\n            columnId: 'url',\n            value: null,\n            renderer(): LitHtml.TemplateResult {\n              return html`\n                <div style=\"display: flex;\">\n                  <${IconButton.Icon.Icon.litTagName} class=\"icon\"\n                    .data=${{color: '', iconName, width: '18px'} as IconButton.Icon.IconData}>\n                  </${IconButton.Icon.Icon.litTagName}>\n                  <span>${url}</span>\n                </div>`;\n            },\n          },\n        ],\n      };\n    });\n    render(\n        html`\n      <div class=\"header\">\n        <${IconButton.Icon.Icon.litTagName} class=\"icon\"\n          .data=${{color: '', iconName: 'resourceWebBundle', width: '16px'} as IconButton.Icon.IconData}>\n        </${IconButton.Icon.Icon.litTagName}>\n        <span>${this.#webBundleName}</span>\n        <x-link href=\"https://web.dev/web-bundles/#explaining-web-bundles\">\n          <${IconButton.Icon.Icon.litTagName} class=\"icon\"\n            .data=${\n            {color: 'var(--color-text-secondary)', iconName: 'help_outline', width: '16px'} as\n            IconButton.Icon.IconData}>\n          </${IconButton.Icon.Icon.litTagName}>\n        </x-link>\n      </div>\n      <div>\n        <${DataGrid.DataGrid.DataGrid.litTagName}\n          .data=${{\n          columns: [\n            {\n              id: 'url',\n              title: i18nString(UIStrings.bundledResource),\n              widthWeighting: 1,\n              visible: true,\n              hideable: false,\n            },\n          ],\n          rows: rows,\n          activeSort: null,\n        } as DataGrid.DataGrid.DataGridData}>\n        </${DataGrid.DataGrid.DataGrid.litTagName}>\n      </div>`,\n        this.#shadow, {host: this});\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent('devtools-web-bundle-info', WebBundleInfoElement);\n\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  interface HTMLElementTagNameMap {\n    'devtools-web-bundle-info': WebBundleInfoElement;\n  }\n}\n"]}