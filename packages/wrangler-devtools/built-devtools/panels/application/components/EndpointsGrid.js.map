{"version":3,"file":"EndpointsGrid.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/application/components/EndpointsGrid.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as DataGrid from '../../../ui/components/data_grid/data_grid.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\n\nimport type * as Protocol from '../../../generated/protocol.js';\n\nimport reportingApiGridStyles from './reportingApiGrid.css.js';\n\nconst UIStrings = {\n  /**\n  *@description Placeholder text when there are no Reporting API endpoints.\n  *(https://developers.google.com/web/updates/2018/09/reportingapi#tldr)\n  */\n  noEndpointsToDisplay: 'No endpoints to display',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/application/components/EndpointsGrid.ts', UIStrings);\nexport const i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst {render, html} = LitHtml;\n\nexport interface EndpointsGridData {\n  endpoints: Map<string, Protocol.Network.ReportingApiEndpoint[]>;\n}\n\nexport class EndpointsGrid extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-resources-endpoints-grid`;\n\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #endpoints: Map<string, Protocol.Network.ReportingApiEndpoint[]> = new Map();\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [reportingApiGridStyles];\n    this.#render();\n  }\n\n  set data(data: EndpointsGridData) {\n    this.#endpoints = data.endpoints;\n    this.#render();\n  }\n\n  #render(): void {\n    const endpointsGridData: DataGrid.DataGridController.DataGridControllerData = {\n      columns: [\n        {\n          id: 'origin',\n          title: i18n.i18n.lockedString('Origin'),\n          widthWeighting: 30,\n          hideable: false,\n          visible: true,\n        },\n        {\n          id: 'name',\n          title: i18n.i18n.lockedString('Name'),\n          widthWeighting: 20,\n          hideable: false,\n          visible: true,\n        },\n        {\n          id: 'url',\n          title: i18n.i18n.lockedString('URL'),\n          widthWeighting: 30,\n          hideable: false,\n          visible: true,\n        },\n      ],\n      rows: this.#buildReportRows(),\n    };\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    render(html`\n      <div class=\"reporting-container\">\n        <div class=\"reporting-header\">${i18n.i18n.lockedString('Endpoints')}</div>\n        ${this.#endpoints.size > 0 ? html`\n          <${DataGrid.DataGridController.DataGridController.litTagName} .data=${\n              endpointsGridData as DataGrid.DataGridController.DataGridControllerData}>\n          </${DataGrid.DataGridController.DataGridController.litTagName}>\n        ` : html`\n          <div class=\"reporting-placeholder\">\n            <div>${i18nString(UIStrings.noEndpointsToDisplay)}</div>\n          </div>\n        `}\n      </div>\n    `, this.#shadow, {host: this});\n    // clang-format on\n  }\n\n  #buildReportRows(): DataGrid.DataGridUtils.Row[] {\n    return Array.from(this.#endpoints)\n        .map(([origin, endpointArray]) => endpointArray.map(endpoint => {\n          return {\n            cells: [\n              {columnId: 'origin', value: origin},\n              {columnId: 'name', value: endpoint.groupName},\n              {columnId: 'url', value: endpoint.url},\n            ],\n          };\n        }))\n        .flat();\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent('devtools-resources-endpoints-grid', EndpointsGrid);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-resources-endpoints-grid': EndpointsGrid;\n  }\n}\n"]}