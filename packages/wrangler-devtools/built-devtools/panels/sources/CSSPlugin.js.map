{"version":3,"file":"CSSPlugin.js","sourceRoot":"","sources":["../../../../../../front_end/panels/sources/CSSPlugin.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport type * as Workspace from '../../models/workspace/workspace.js';\nimport * as ColorPicker from '../../ui/legacy/components/color_picker/color_picker.js';\nimport * as InlineEditor from '../../ui/legacy/components/inline_editor/inline_editor.js';\nimport * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport type * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {assertNotNullOrUndefined} from '../../core/platform/platform.js';\nimport {Plugin} from './Plugin.js';\n\n// Plugin to add CSS completion, shortcuts, and color/curve swatches\n// to editors with CSS content.\n\nconst UIStrings = {\n  /**\n  *@description Swatch icon element title in CSSPlugin of the Sources panel\n  */\n  openColorPicker: 'Open color picker.',\n  /**\n  *@description Text to open the cubic bezier editor\n  */\n  openCubicBezierEditor: 'Open cubic bezier editor.',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/CSSPlugin.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst dontCompleteIn = new Set(['ColorLiteral', 'NumberLiteral', 'StringLiteral', 'Comment', 'Important']);\n\nfunction findPropertyAt(node: CodeMirror.SyntaxNode, pos: number): CodeMirror.SyntaxNode|null {\n  if (dontCompleteIn.has(node.name)) {\n    return null;\n  }\n  for (let cur: CodeMirror.SyntaxNode|null = node; cur; cur = cur.parent) {\n    if (cur.name === 'StyleSheet') {\n      break;\n    } else if (cur.name === 'Declaration') {\n      const name = cur.getChild('PropertyName'), colon = cur.getChild(':');\n      return name && colon && colon.to <= pos ? name : null;\n    }\n  }\n  return null;\n}\n\nfunction getCurrentStyleSheet(\n    url: Platform.DevToolsPath.UrlString, cssModel: SDK.CSSModel.CSSModel): Protocol.CSS.StyleSheetId {\n  const currentStyleSheet = cssModel.getStyleSheetIdsForURL(url);\n  if (currentStyleSheet.length === 0) {\n    Platform.DCHECK(() => currentStyleSheet.length !== 0, 'Can\\'t find style sheet ID for current URL');\n  }\n\n  return currentStyleSheet[0];\n}\n\nasync function specificCssCompletion(\n    cx: CodeMirror.CompletionContext, uiSourceCode: Workspace.UISourceCode.UISourceCode,\n    cssModel: SDK.CSSModel.CSSModel|undefined): Promise<CodeMirror.CompletionResult|null> {\n  const node = CodeMirror.syntaxTree(cx.state).resolveInner(cx.pos, -1);\n  if (node.name === 'ClassName') {\n    // Should never happen, but let's code defensively here\n    assertNotNullOrUndefined(cssModel);\n\n    const currentStyleSheet = getCurrentStyleSheet(uiSourceCode.url(), cssModel);\n    const existingClassNames = await cssModel.getClassNames(currentStyleSheet);\n\n    return {\n      from: node.from,\n      options: existingClassNames.map(value => ({type: 'constant', label: value})),\n    };\n  }\n  const property = findPropertyAt(node, cx.pos);\n  if (property) {\n    const propertyValues =\n        SDK.CSSMetadata.cssMetadata().getPropertyValues(cx.state.sliceDoc(property.from, property.to));\n    return {\n      from: node.name === 'ValueName' ? node.from : cx.pos,\n      options: propertyValues.map(value => ({type: 'constant', label: value})),\n      validFor: /^[\\w\\P{ASCII}\\-]+$/u,\n    };\n  }\n  return null;\n}\n\nfunction findColorsAndCurves(\n    state: CodeMirror.EditorState,\n    from: number,\n    to: number,\n    onColor: (pos: number, color: Common.Color.Color, text: string) => void,\n    onCurve: (pos: number, curve: UI.Geometry.CubicBezier, text: string) => void,\n    ): void {\n  let line = state.doc.lineAt(from);\n  function getToken(from: number, to: number): string {\n    if (from >= line.to) {\n      line = state.doc.lineAt(from);\n    }\n    return line.text.slice(from - line.from, to - line.from);\n  }\n\n  const tree = CodeMirror.ensureSyntaxTree(state, to, 100);\n  if (!tree) {\n    return;\n  }\n  tree.iterate({\n    from,\n    to,\n    enter: node => {\n      let content;\n      if (node.name === 'ValueName' || node.name === 'ColorLiteral') {\n        content = getToken(node.from, node.to);\n      } else if (node.name === 'Callee' && /^(?:(?:rgb|hsl)a?|cubic-bezier)$/.test(getToken(node.from, node.to))) {\n        content = state.sliceDoc(node.from, (node.node.parent as CodeMirror.SyntaxNode).to);\n      }\n      if (content) {\n        const parsedColor = Common.Color.Color.parse(content);\n        if (parsedColor) {\n          onColor(node.from, parsedColor, content);\n        } else {\n          const parsedCurve = UI.Geometry.CubicBezier.parse(content);\n          if (parsedCurve) {\n            onCurve(node.from, parsedCurve, content);\n          }\n        }\n      }\n    },\n  });\n}\n\nclass ColorSwatchWidget extends CodeMirror.WidgetType {\n  constructor(readonly color: Common.Color.Color, readonly text: string) {\n    super();\n  }\n\n  eq(other: ColorSwatchWidget): boolean {\n    return this.color.equal(other.color) && this.text === other.text;\n  }\n\n  toDOM(view: CodeMirror.EditorView): HTMLElement {\n    const swatch = new InlineEditor.ColorSwatch.ColorSwatch();\n    swatch.renderColor(this.color, false, i18nString(UIStrings.openColorPicker));\n    const value = swatch.createChild('span');\n    value.textContent = this.text;\n    value.setAttribute('hidden', 'true');\n    swatch.addEventListener(InlineEditor.ColorSwatch.ClickEvent.eventName, event => {\n      event.consume(true);\n      view.dispatch({\n        effects: setTooltip.of({\n          type: TooltipType.Color,\n          pos: view.posAtDOM(swatch),\n          text: this.text,\n          swatch,\n          color: this.color,\n        }),\n      });\n    });\n    return swatch;\n  }\n\n  ignoreEvent(): boolean {\n    return true;\n  }\n}\n\nclass CurveSwatchWidget extends CodeMirror.WidgetType {\n  constructor(readonly curve: UI.Geometry.CubicBezier, readonly text: string) {\n    super();\n  }\n\n  eq(other: CurveSwatchWidget): boolean {\n    return this.curve.asCSSText() === other.curve.asCSSText() && this.text === other.text;\n  }\n\n  toDOM(view: CodeMirror.EditorView): HTMLElement {\n    const swatch = InlineEditor.Swatches.BezierSwatch.create();\n    swatch.setBezierText(this.text);\n    UI.Tooltip.Tooltip.install(swatch.iconElement(), i18nString(UIStrings.openCubicBezierEditor));\n    swatch.iconElement().addEventListener('click', (event: MouseEvent) => {\n      event.consume(true);\n      view.dispatch({\n        effects: setTooltip.of({\n          type: TooltipType.Curve,\n          pos: view.posAtDOM(swatch),\n          text: this.text,\n          swatch,\n          curve: this.curve,\n        }),\n      });\n    }, false);\n    swatch.hideText(true);\n    return swatch;\n  }\n\n  ignoreEvent(): boolean {\n    return true;\n  }\n}\n\nconst enum TooltipType {\n  Color = 0,\n  Curve = 1,\n}\n\ntype ActiveTooltip = {\n  type: TooltipType.Color,\n  pos: number,\n  text: string,\n  color: Common.Color.Color,\n  swatch: InlineEditor.ColorSwatch.ColorSwatch,\n}|{\n  type: TooltipType.Curve,\n  pos: number,\n  text: string,\n  curve: UI.Geometry.CubicBezier,\n  swatch: InlineEditor.Swatches.BezierSwatch,\n};\n\nfunction createCSSTooltip(active: ActiveTooltip): CodeMirror.Tooltip {\n  return {\n    pos: active.pos,\n    arrow: true,\n    create(view): CodeMirror.TooltipView {\n      let text = active.text;\n      let widget: UI.Widget.VBox, addListener: (handler: (event: {data: string}) => void) => void;\n      if (active.type === TooltipType.Color) {\n        const spectrum = new ColorPicker.Spectrum.Spectrum();\n        addListener = (handler): void => {\n          spectrum.addEventListener(ColorPicker.Spectrum.Events.ColorChanged, handler);\n        };\n        spectrum.addEventListener(ColorPicker.Spectrum.Events.SizeChanged, () => view.requestMeasure());\n        spectrum.setColor(active.color, active.color.format());\n        widget = spectrum;\n      } else {\n        const spectrum = new InlineEditor.BezierEditor.BezierEditor(active.curve);\n        widget = spectrum;\n        addListener = (handler): void => {\n          spectrum.addEventListener(InlineEditor.BezierEditor.Events.BezierChanged, handler);\n        };\n      }\n      const dom = document.createElement('div');\n      dom.className = 'cm-tooltip-swatchEdit';\n      widget.markAsRoot();\n      widget.show(dom);\n      widget.showWidget();\n      widget.element.addEventListener('keydown', event => {\n        if (event.key === 'Escape') {\n          event.consume();\n          view.dispatch({\n            effects: setTooltip.of(null),\n            changes: text === active.text ? undefined :\n                                            {from: active.pos, to: active.pos + text.length, insert: active.text},\n          });\n          widget.hideWidget();\n          view.focus();\n        }\n      });\n      widget.element.addEventListener('focusout', event => {\n        if (event.relatedTarget && !widget.element.contains(event.relatedTarget as Node)) {\n          view.dispatch({effects: setTooltip.of(null)});\n          widget.hideWidget();\n        }\n      }, false);\n      widget.element.addEventListener('mousedown', event => event.consume());\n      return {\n        dom,\n        offset: {x: -8, y: 0},\n        mount: (): void => {\n          widget.focus();\n          widget.wasShown();\n          addListener((event: {data: string}): void => {\n            view.dispatch({\n              changes: {from: active.pos, to: active.pos + text.length, insert: event.data},\n              annotations: isSwatchEdit.of(true),\n            });\n            text = event.data;\n          });\n        },\n      };\n    },\n  };\n}\n\nconst setTooltip = CodeMirror.StateEffect.define<ActiveTooltip|null>();\n\nconst isSwatchEdit = CodeMirror.Annotation.define<boolean>();\n\nconst cssTooltipState = CodeMirror.StateField.define<ActiveTooltip|null>({\n  create() {\n    return null;\n  },\n\n  update(value: ActiveTooltip|null, tr: CodeMirror.Transaction): ActiveTooltip |\n      null {\n        if ((tr.docChanged || tr.selection) && !tr.annotation(isSwatchEdit)) {\n          value = null;\n        }\n        for (const effect of tr.effects) {\n          if (effect.is(setTooltip)) {\n            value = effect.value;\n          }\n        }\n        return value;\n      },\n\n  provide: field => CodeMirror.showTooltip.from(field, active => active && createCSSTooltip(active)),\n});\n\nfunction computeSwatchDeco(state: CodeMirror.EditorState, from: number, to: number): CodeMirror.DecorationSet {\n  const builder = new CodeMirror.RangeSetBuilder<CodeMirror.Decoration>();\n  findColorsAndCurves(\n      state, from, to,\n      (pos, color, text) => {\n        builder.add(pos, pos, CodeMirror.Decoration.widget({widget: new ColorSwatchWidget(color, text)}));\n      },\n      (pos, curve, text) => {\n        builder.add(pos, pos, CodeMirror.Decoration.widget({widget: new CurveSwatchWidget(curve, text)}));\n      });\n  return builder.finish();\n}\n\nconst cssSwatchPlugin = CodeMirror.ViewPlugin.fromClass(class {\n  decorations: CodeMirror.DecorationSet;\n\n  constructor(view: CodeMirror.EditorView) {\n    this.decorations = computeSwatchDeco(view.state, view.viewport.from, view.viewport.to);\n  }\n\n  update(update: CodeMirror.ViewUpdate): void {\n    if (update.viewportChanged || update.docChanged) {\n      this.decorations = computeSwatchDeco(update.state, update.view.viewport.from, update.view.viewport.to);\n    }\n  }\n}, {\n  decorations: v => v.decorations,\n});\n\nfunction cssSwatches(): CodeMirror.Extension {\n  return [cssSwatchPlugin, cssTooltipState];\n}\n\nfunction getNumberAt(node: CodeMirror.SyntaxNode): {from: number, to: number}|null {\n  if (node.name === 'Unit') {\n    node = node.parent as CodeMirror.SyntaxNode;\n  }\n  if (node.name === 'NumberLiteral') {\n    const lastChild = node.lastChild;\n    return {from: node.from, to: lastChild && lastChild.name === 'Unit' ? lastChild.from : node.to};\n  }\n  return null;\n}\n\nfunction modifyUnit(view: CodeMirror.EditorView, by: number): boolean {\n  const {head} = view.state.selection.main;\n  const context = CodeMirror.syntaxTree(view.state).resolveInner(head, -1);\n  const numberRange = getNumberAt(context) || getNumberAt(context.resolve(head, 1));\n  if (!numberRange) {\n    return false;\n  }\n\n  const currentNumber = Number(view.state.sliceDoc(numberRange.from, numberRange.to));\n  if (isNaN(currentNumber)) {\n    return false;\n  }\n\n  view.dispatch({\n    changes: {from: numberRange.from, to: numberRange.to, insert: String(currentNumber + by)},\n    scrollIntoView: true,\n    userEvent: 'insert.modifyUnit',\n  });\n  return true;\n}\n\nexport function cssBindings(): CodeMirror.Extension {\n  // This is an awkward way to pass the argument given to the editor\n  // event handler through the ShortcutRegistry calling convention.\n  let currentView: CodeMirror.EditorView = null as unknown as CodeMirror.EditorView;\n  const listener = UI.ShortcutRegistry.ShortcutRegistry.instance().getShortcutListener({\n    'sources.increment-css': () => Promise.resolve(modifyUnit(currentView, 1)),\n    'sources.increment-css-by-ten': () => Promise.resolve(modifyUnit(currentView, 10)),\n    'sources.decrement-css': () => Promise.resolve(modifyUnit(currentView, -1)),\n    'sources.decrement-css-by-ten': () => Promise.resolve(modifyUnit(currentView, -10)),\n  });\n\n  return CodeMirror.EditorView.domEventHandlers({\n    keydown: (event, view): boolean => {\n      const prevView = currentView;\n      currentView = view;\n      listener(event);\n      currentView = prevView;\n      return event.defaultPrevented;\n    },\n  });\n}\n\nexport class CSSPlugin extends Plugin implements SDK.TargetManager.SDKModelObserver<SDK.CSSModel.CSSModel> {\n  #cssModel?: SDK.CSSModel.CSSModel;\n\n  constructor(uiSourceCode: Workspace.UISourceCode.UISourceCode, _transformer?: SourceFrame.SourceFrame.Transformer) {\n    super(uiSourceCode, _transformer);\n    SDK.TargetManager.TargetManager.instance().observeModels(SDK.CSSModel.CSSModel, this);\n  }\n\n  static accepts(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return uiSourceCode.contentType().isStyleSheet();\n  }\n\n  modelAdded(cssModel: SDK.CSSModel.CSSModel): void {\n    if (this.#cssModel) {\n      return;\n    }\n    this.#cssModel = cssModel;\n  }\n  modelRemoved(cssModel: SDK.CSSModel.CSSModel): void {\n    if (this.#cssModel === cssModel) {\n      this.#cssModel = undefined;\n    }\n  }\n\n  editorExtension(): CodeMirror.Extension {\n    return [cssBindings(), this.#cssCompletion(), cssSwatches()];\n  }\n\n  #cssCompletion(): CodeMirror.Extension {\n    const {cssCompletionSource} = CodeMirror.css;\n\n    // CodeMirror binds the function below to the state object.\n    // Therefore, we can't access `this` and retrieve the following properties.\n    // Instead, retrieve them up front to bind them to the correct closure.\n    const uiSourceCode = this.uiSourceCode;\n    const cssModel = this.#cssModel;\n\n    return CodeMirror.autocompletion({\n      override:\n          [async(cx: CodeMirror.CompletionContext):\n               Promise<CodeMirror.CompletionResult|null> => {\n                 return (await specificCssCompletion(cx, uiSourceCode, cssModel)) || cssCompletionSource(cx);\n               }],\n    });\n  }\n}\n"]}