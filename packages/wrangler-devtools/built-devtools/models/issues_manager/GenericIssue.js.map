{"version":3,"file":"GenericIssue.js","sourceRoot":"","sources":["../../../../../../front_end/models/issues_manager/GenericIssue.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAIhD,OAAO,EAAC,KAAK,EAAE,aAAa,EAAE,SAAS,EAAC,MAAM,YAAY,CAAC;AAE3D,OAAO,EAAC,sBAAsB,EAAC,MAAM,+BAA+B,CAAC;AAErE,MAAM,SAAS,GAAG;IAChB;;MAEE;IACF,4BAA4B,EAAE,8CAA8C;CAC7E,CAAC;AACF,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,uCAAuC,EAAE,SAAS,CAAC,CAAC;AAC7F,MAAM,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,gCAAgC,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAExF,MAAM,OAAO,YAAa,SAAQ,KAAK;IACrC,aAAa,CAAsC;IAEnD,YACI,YAAiD,EAAE,WAAwC,EAC3F,OAAiC;QACnC,MAAM,SAAS,GAAG;;YAEhB,YAAY,CAAC,SAAS;SACvB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACb,KAAK,CAAC,SAAS,EAAE,WAAW,EAAE,OAAO,CAAC,CAAC;QACvC,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;IACpC,CAAC;IAED,WAAW;QACT,OAAO,aAAa,CAAC,OAAO,CAAC;IAC/B,CAAC;IAED,UAAU;QACR,OAAO,GAAG,IAAI,CAAC,IAAI,EAAE,KAAK,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,CAAC;IAC1D,CAAC;IAED,cAAc;QACZ,MAAM,WAAW,GAAG,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;QACxE,IAAI,CAAC,WAAW,EAAE;YAChB,OAAO,IAAI,CAAC;SACb;QACD,OAAO,sBAAsB,CAAC,WAAW,CAAC,CAAC;IAC7C,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,aAAa,CAAC;IAC5B,CAAC;IAED,OAAO;QACL,OAAO,SAAS,CAAC,WAAW,CAAC;IAC/B,CAAC;IAED,MAAM,CAAC,kBAAkB,CAAC,WAAwC,EAAE,cAA8C;QAEhH,MAAM,cAAc,GAAG,cAAc,CAAC,OAAO,CAAC,mBAAmB,CAAC;QAClE,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO,CAAC,IAAI,CAAC,yCAAyC,CAAC,CAAC;YACxD,OAAO,EAAE,CAAC;SACX;QACD,OAAO,CAAC,IAAI,YAAY,CAAC,cAAc,EAAE,WAAW,EAAE,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;IACjF,CAAC;CACF;AAED,MAAM,CAAC,MAAM,wCAAwC,GAAG;IACtD,IAAI,EAAE,6CAA6C;IACnD,KAAK,EAAE,CAAC;YACN,IAAI,EAAE,oEAAoE;YAC1E,SAAS,EAAE,cAAc,CAAC,SAAS,CAAC,4BAA4B,CAAC;SAClE,CAAC;CACH,CAAC;AAEF,MAAM,CAAC,MAAM,uCAAuC,GAAG;;;CAGtD,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAEb,MAAM,iBAAiB,GAA6E,IAAI,GAAG,CAAC;IAC1G,8EAA0E,wCAAwC,CAAC;CACpH,CAAC,CAAC","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nimport {Issue, IssueCategory, IssueKind} from './Issue.js';\nimport type {LazyMarkdownIssueDescription, MarkdownIssueDescription} from './MarkdownIssueDescription.js';\nimport {resolveLazyDescription} from './MarkdownIssueDescription.js';\n\nconst UIStrings = {\n  /**\n  *@description Title for cross-origin portal post message error\n  */\n  crossOriginPortalPostMessage: 'Portals - Same-origin communication channels',\n};\nconst str_ = i18n.i18n.registerUIStrings('models/issues_manager/GenericIssue.ts', UIStrings);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nexport class GenericIssue extends Issue {\n  #issueDetails: Protocol.Audits.GenericIssueDetails;\n\n  constructor(\n      issueDetails: Protocol.Audits.GenericIssueDetails, issuesModel: SDK.IssuesModel.IssuesModel,\n      issueId?: Protocol.Audits.IssueId) {\n    const issueCode = [\n      Protocol.Audits.InspectorIssueCode.GenericIssue,\n      issueDetails.errorType,\n    ].join('::');\n    super(issueCode, issuesModel, issueId);\n    this.#issueDetails = issueDetails;\n  }\n\n  getCategory(): IssueCategory {\n    return IssueCategory.Generic;\n  }\n\n  primaryKey(): string {\n    return `${this.code()}-(${this.#issueDetails.frameId})`;\n  }\n\n  getDescription(): MarkdownIssueDescription|null {\n    const description = issueDescriptions.get(this.#issueDetails.errorType);\n    if (!description) {\n      return null;\n    }\n    return resolveLazyDescription(description);\n  }\n\n  details(): Protocol.Audits.GenericIssueDetails {\n    return this.#issueDetails;\n  }\n\n  getKind(): IssueKind {\n    return IssueKind.Improvement;\n  }\n\n  static fromInspectorIssue(issuesModel: SDK.IssuesModel.IssuesModel, inspectorIssue: Protocol.Audits.InspectorIssue):\n      GenericIssue[] {\n    const genericDetails = inspectorIssue.details.genericIssueDetails;\n    if (!genericDetails) {\n      console.warn('Generic issue without details received.');\n      return [];\n    }\n    return [new GenericIssue(genericDetails, issuesModel, inspectorIssue.issueId)];\n  }\n}\n\nexport const genericCrossOriginPortalPostMessageError = {\n  file: 'genericCrossOriginPortalPostMessageError.md',\n  links: [{\n    link: 'https://github.com/WICG/portals#same-origin-communication-channels',\n    linkTitle: i18nLazyString(UIStrings.crossOriginPortalPostMessage),\n  }],\n};\n\nexport const genericCrossOriginPortalPostMessageCode = [\n  Protocol.Audits.InspectorIssueCode.GenericIssue,\n  Protocol.Audits.GenericIssueErrorType.CrossOriginPortalPostMessageError,\n].join('::');\n\nconst issueDescriptions: Map<Protocol.Audits.GenericIssueErrorType, LazyMarkdownIssueDescription> = new Map([\n  [Protocol.Audits.GenericIssueErrorType.CrossOriginPortalPostMessageError, genericCrossOriginPortalPostMessageError],\n]);\n"]}