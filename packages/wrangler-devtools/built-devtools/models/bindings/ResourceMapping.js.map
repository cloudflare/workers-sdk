{"version":3,"file":"ResourceMapping.js","sourceRoot":"","sources":["../../../../../../front_end/models/bindings/ResourceMapping.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2017 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as TextUtils from '../text_utils/text_utils.js';\nimport * as Workspace from '../workspace/workspace.js';\n\nimport {ContentProviderBasedProject} from './ContentProviderBasedProject.js';\nimport {CSSWorkspaceBinding} from './CSSWorkspaceBinding.js';\nimport {DebuggerWorkspaceBinding} from './DebuggerWorkspaceBinding.js';\nimport {NetworkProject} from './NetworkProject.js';\nimport {resourceMetadata} from './ResourceUtils.js';\n\nlet resourceMappingInstance: ResourceMapping|undefined;\n\nconst styleSheetOffsetMap = new WeakMap<SDK.CSSStyleSheetHeader.CSSStyleSheetHeader, TextUtils.TextRange.TextRange>();\nconst scriptOffsetMap = new WeakMap<SDK.Script.Script, TextUtils.TextRange.TextRange>();\nconst boundUISourceCodes = new WeakSet<Workspace.UISourceCode.UISourceCode>();\n\nexport class ResourceMapping implements SDK.TargetManager.SDKModelObserver<SDK.ResourceTreeModel.ResourceTreeModel> {\n  readonly #workspace: Workspace.Workspace.WorkspaceImpl;\n  readonly #modelToInfo: Map<SDK.ResourceTreeModel.ResourceTreeModel, ModelInfo>;\n  private constructor(targetManager: SDK.TargetManager.TargetManager, workspace: Workspace.Workspace.WorkspaceImpl) {\n    this.#workspace = workspace;\n    this.#modelToInfo = new Map();\n    targetManager.observeModels(SDK.ResourceTreeModel.ResourceTreeModel, this);\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    targetManager: SDK.TargetManager.TargetManager|null,\n    workspace: Workspace.Workspace.WorkspaceImpl|null,\n  } = {forceNew: null, targetManager: null, workspace: null}): ResourceMapping {\n    const {forceNew, targetManager, workspace} = opts;\n    if (!resourceMappingInstance || forceNew) {\n      if (!targetManager || !workspace) {\n        throw new Error(\n            `Unable to create ResourceMapping: targetManager and workspace must be provided: ${new Error().stack}`);\n      }\n\n      resourceMappingInstance = new ResourceMapping(targetManager, workspace);\n    }\n\n    return resourceMappingInstance;\n  }\n\n  static removeInstance(): void {\n    resourceMappingInstance = undefined;\n  }\n\n  modelAdded(resourceTreeModel: SDK.ResourceTreeModel.ResourceTreeModel): void {\n    const info = new ModelInfo(this.#workspace, resourceTreeModel);\n    this.#modelToInfo.set(resourceTreeModel, info);\n  }\n\n  modelRemoved(resourceTreeModel: SDK.ResourceTreeModel.ResourceTreeModel): void {\n    const info = this.#modelToInfo.get(resourceTreeModel);\n    if (info) {\n      info.dispose();\n      this.#modelToInfo.delete(resourceTreeModel);\n    }\n  }\n\n  private infoForTarget(target: SDK.Target.Target): ModelInfo|null {\n    const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    return resourceTreeModel ? this.#modelToInfo.get(resourceTreeModel) || null : null;\n  }\n\n  cssLocationToUILocation(cssLocation: SDK.CSSModel.CSSLocation): Workspace.UISourceCode.UILocation|null {\n    const header = cssLocation.header();\n    if (!header) {\n      return null;\n    }\n    const info = this.infoForTarget(cssLocation.cssModel().target());\n    if (!info) {\n      return null;\n    }\n    const uiSourceCode = info.getProject().uiSourceCodeForURL(cssLocation.url);\n    if (!uiSourceCode) {\n      return null;\n    }\n    const offset = styleSheetOffsetMap.get(header) ||\n        TextUtils.TextRange.TextRange.createFromLocation(header.startLine, header.startColumn);\n    const lineNumber = cssLocation.lineNumber + offset.startLine - header.startLine;\n    let columnNumber = cssLocation.columnNumber;\n    if (cssLocation.lineNumber === header.startLine) {\n      columnNumber += offset.startColumn - header.startColumn;\n    }\n    return uiSourceCode.uiLocation(lineNumber, columnNumber);\n  }\n\n  jsLocationToUILocation(jsLocation: SDK.DebuggerModel.Location): Workspace.UISourceCode.UILocation|null {\n    const script = jsLocation.script();\n    if (!script) {\n      return null;\n    }\n    const info = this.infoForTarget(jsLocation.debuggerModel.target());\n    if (!info) {\n      return null;\n    }\n    const embedderName = script.embedderName();\n    if (!embedderName) {\n      return null;\n    }\n    const uiSourceCode = info.getProject().uiSourceCodeForURL(embedderName);\n    if (!uiSourceCode) {\n      return null;\n    }\n    const offset = scriptOffsetMap.get(script) ||\n        TextUtils.TextRange.TextRange.createFromLocation(script.lineOffset, script.columnOffset);\n    let lineNumber = jsLocation.lineNumber + offset.startLine - script.lineOffset;\n    let columnNumber = jsLocation.columnNumber;\n    if (jsLocation.lineNumber === script.lineOffset) {\n      columnNumber += offset.startColumn - script.columnOffset;\n    }\n    if (script.hasSourceURL) {\n      if (lineNumber === 0) {\n        columnNumber += script.columnOffset;\n      }\n      lineNumber += script.lineOffset;\n    }\n    return uiSourceCode.uiLocation(lineNumber, columnNumber);\n  }\n\n  uiLocationToJSLocations(uiSourceCode: Workspace.UISourceCode.UISourceCode, lineNumber: number, columnNumber: number):\n      SDK.DebuggerModel.Location[] {\n    if (!boundUISourceCodes.has(uiSourceCode)) {\n      return [];\n    }\n    const target = NetworkProject.targetForUISourceCode(uiSourceCode);\n    if (!target) {\n      return [];\n    }\n    const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n    if (!debuggerModel) {\n      return [];\n    }\n    const locations = [];\n    for (const script of debuggerModel.scripts()) {\n      if (script.embedderName() !== uiSourceCode.url()) {\n        continue;\n      }\n      const {startLine, startColumn} = scriptOffsetMap.get(script) ||\n          TextUtils.TextRange.TextRange.createFromLocation(script.lineOffset, script.columnOffset);\n      if (lineNumber < startLine || (lineNumber === startLine && columnNumber < startColumn)) {\n        continue;\n      }\n      const endLine = startLine + (script.endLine - script.lineOffset);\n      const endColumn =\n          startLine === endLine ? startColumn + (script.endColumn - script.columnOffset) : script.endColumn;\n      if (lineNumber > endLine || (lineNumber === endLine && columnNumber > endColumn)) {\n        continue;\n      }\n      let scriptLineNumber = lineNumber;\n      let scriptColumnNumber = columnNumber;\n      if (script.hasSourceURL) {\n        scriptLineNumber -= startLine;\n        if (scriptLineNumber === 0) {\n          scriptColumnNumber -= startColumn;\n        }\n      }\n      locations.push(debuggerModel.createRawLocation(script, scriptLineNumber, scriptColumnNumber));\n    }\n    return locations;\n  }\n\n  uiLocationToCSSLocations(uiLocation: Workspace.UISourceCode.UILocation): SDK.CSSModel.CSSLocation[] {\n    if (!boundUISourceCodes.has(uiLocation.uiSourceCode)) {\n      return [];\n    }\n    const target = NetworkProject.targetForUISourceCode(uiLocation.uiSourceCode);\n    if (!target) {\n      return [];\n    }\n    const cssModel = target.model(SDK.CSSModel.CSSModel);\n    if (!cssModel) {\n      return [];\n    }\n    return cssModel.createRawLocationsByURL(\n        uiLocation.uiSourceCode.url(), uiLocation.lineNumber, uiLocation.columnNumber);\n  }\n\n  resetForTest(target: SDK.Target.Target): void {\n    const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    const info = resourceTreeModel ? this.#modelToInfo.get(resourceTreeModel) : null;\n    if (info) {\n      info.resetForTest();\n    }\n  }\n}\n\nclass ModelInfo {\n  project: ContentProviderBasedProject;\n  readonly #bindings: Map<string, Binding>;\n  readonly #cssModel: SDK.CSSModel.CSSModel;\n  readonly #eventListeners: Common.EventTarget.EventDescriptor[];\n  constructor(\n      workspace: Workspace.Workspace.WorkspaceImpl, resourceTreeModel: SDK.ResourceTreeModel.ResourceTreeModel) {\n    const target = resourceTreeModel.target();\n    this.project = new ContentProviderBasedProject(\n        workspace, 'resources:' + target.id(), Workspace.Workspace.projectTypes.Network, '',\n        false /* isServiceProject */);\n    NetworkProject.setTargetForProject(this.project, target);\n\n    this.#bindings = new Map();\n\n    const cssModel = target.model(SDK.CSSModel.CSSModel);\n    console.assert(Boolean(cssModel));\n    this.#cssModel = (cssModel as SDK.CSSModel.CSSModel);\n    this.#eventListeners = [\n      resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.ResourceAdded, this.resourceAdded, this),\n      resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.FrameWillNavigate, this.frameWillNavigate, this),\n      resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.FrameDetached, this.frameDetached, this),\n      this.#cssModel.addEventListener(\n          SDK.CSSModel.Events.StyleSheetChanged,\n          event => {\n            void this.styleSheetChanged(event);\n          },\n          this),\n    ];\n  }\n\n  private async styleSheetChanged(event: Common.EventTarget.EventTargetEvent<SDK.CSSModel.StyleSheetChangedEvent>):\n      Promise<void> {\n    const header = this.#cssModel.styleSheetHeaderForId(event.data.styleSheetId);\n    if (!header || !header.isInline || (header.isInline && header.isMutable)) {\n      return;\n    }\n    const binding = this.#bindings.get(header.resourceURL());\n    if (!binding) {\n      return;\n    }\n    await binding.styleSheetChanged(header, event.data.edit || null);\n  }\n\n  private acceptsResource(resource: SDK.Resource.Resource): boolean {\n    const resourceType = resource.resourceType();\n    // Only load selected resource types from resources.\n    if (resourceType !== Common.ResourceType.resourceTypes.Image &&\n        resourceType !== Common.ResourceType.resourceTypes.Font &&\n        resourceType !== Common.ResourceType.resourceTypes.Document &&\n        resourceType !== Common.ResourceType.resourceTypes.Manifest) {\n      return false;\n    }\n\n    // Ignore non-images and non-fonts.\n    if (resourceType === Common.ResourceType.resourceTypes.Image && resource.mimeType &&\n        !resource.mimeType.startsWith('image')) {\n      return false;\n    }\n    if (resourceType === Common.ResourceType.resourceTypes.Font && resource.mimeType &&\n        !resource.mimeType.includes('font')) {\n      return false;\n    }\n    if ((resourceType === Common.ResourceType.resourceTypes.Image ||\n         resourceType === Common.ResourceType.resourceTypes.Font) &&\n        resource.contentURL().startsWith('data:')) {\n      return false;\n    }\n    return true;\n  }\n\n  private resourceAdded(event: Common.EventTarget.EventTargetEvent<SDK.Resource.Resource>): void {\n    const resource = event.data;\n    if (!this.acceptsResource(resource)) {\n      return;\n    }\n\n    let binding = this.#bindings.get(resource.url);\n    if (!binding) {\n      binding = new Binding(this.project, resource);\n      this.#bindings.set(resource.url, binding);\n    } else {\n      binding.addResource(resource);\n    }\n  }\n\n  private removeFrameResources(frame: SDK.ResourceTreeModel.ResourceTreeFrame): void {\n    for (const resource of frame.resources()) {\n      if (!this.acceptsResource(resource)) {\n        continue;\n      }\n      const binding = this.#bindings.get(resource.url);\n      if (!binding) {\n        continue;\n      }\n      if (binding.resources.size === 1) {\n        binding.dispose();\n        this.#bindings.delete(resource.url);\n      } else {\n        binding.removeResource(resource);\n      }\n    }\n  }\n\n  private frameWillNavigate(event: Common.EventTarget.EventTargetEvent<SDK.ResourceTreeModel.ResourceTreeFrame>): void {\n    this.removeFrameResources(event.data);\n  }\n\n  private frameDetached(\n      event: Common.EventTarget.EventTargetEvent<{frame: SDK.ResourceTreeModel.ResourceTreeFrame, isSwap: boolean}>):\n      void {\n    this.removeFrameResources(event.data.frame);\n  }\n\n  resetForTest(): void {\n    for (const binding of this.#bindings.values()) {\n      binding.dispose();\n    }\n    this.#bindings.clear();\n  }\n\n  dispose(): void {\n    Common.EventTarget.removeEventListeners(this.#eventListeners);\n    for (const binding of this.#bindings.values()) {\n      binding.dispose();\n    }\n    this.#bindings.clear();\n    this.project.removeProject();\n  }\n\n  getProject(): ContentProviderBasedProject {\n    return this.project;\n  }\n}\n\nclass Binding implements TextUtils.ContentProvider.ContentProvider {\n  readonly resources: Set<SDK.Resource.Resource>;\n  readonly #project: ContentProviderBasedProject;\n  readonly #uiSourceCode: Workspace.UISourceCode.UISourceCode;\n  #edits: {\n    stylesheet: SDK.CSSStyleSheetHeader.CSSStyleSheetHeader,\n    edit: SDK.CSSModel.Edit|null,\n  }[];\n  constructor(project: ContentProviderBasedProject, resource: SDK.Resource.Resource) {\n    this.resources = new Set([resource]);\n    this.#project = project;\n    this.#uiSourceCode = this.#project.createUISourceCode(resource.url, resource.contentType());\n    boundUISourceCodes.add(this.#uiSourceCode);\n    if (resource.frameId) {\n      NetworkProject.setInitialFrameAttribution(this.#uiSourceCode, resource.frameId);\n    }\n    this.#project.addUISourceCodeWithProvider(this.#uiSourceCode, this, resourceMetadata(resource), resource.mimeType);\n    this.#edits = [];\n  }\n\n  private inlineStyles(): SDK.CSSStyleSheetHeader.CSSStyleSheetHeader[] {\n    const target = NetworkProject.targetForUISourceCode(this.#uiSourceCode);\n    const stylesheets: SDK.CSSStyleSheetHeader.CSSStyleSheetHeader[] = [];\n    if (!target) {\n      return stylesheets;\n    }\n    const cssModel = target.model(SDK.CSSModel.CSSModel);\n    if (cssModel) {\n      for (const headerId of cssModel.getStyleSheetIdsForURL(this.#uiSourceCode.url())) {\n        const header = cssModel.styleSheetHeaderForId(headerId);\n        if (header) {\n          stylesheets.push(header);\n        }\n      }\n    }\n    return stylesheets;\n  }\n\n  private inlineScripts(): SDK.Script.Script[] {\n    const target = NetworkProject.targetForUISourceCode(this.#uiSourceCode);\n    if (!target) {\n      return [];\n    }\n    const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n    if (!debuggerModel) {\n      return [];\n    }\n    return debuggerModel.scripts().filter(script => script.embedderName() === this.#uiSourceCode.url());\n  }\n\n  async styleSheetChanged(stylesheet: SDK.CSSStyleSheetHeader.CSSStyleSheetHeader, edit: SDK.CSSModel.Edit|null):\n      Promise<void> {\n    this.#edits.push({stylesheet, edit});\n    if (this.#edits.length > 1) {\n      return;\n    }  // There is already a styleSheetChanged loop running\n\n    const {content} = await this.#uiSourceCode.requestContent();\n    if (content !== null) {\n      await this.innerStyleSheetChanged(content);\n    }\n    this.#edits = [];\n  }\n\n  private async innerStyleSheetChanged(content: string): Promise<void> {\n    const scripts = this.inlineScripts();\n    const styles = this.inlineStyles();\n    let text: TextUtils.Text.Text = new TextUtils.Text.Text(content);\n    for (const data of this.#edits) {\n      const edit = data.edit;\n      if (!edit) {\n        continue;\n      }\n      const stylesheet = data.stylesheet;\n      const startLocation = styleSheetOffsetMap.get(stylesheet) ||\n          TextUtils.TextRange.TextRange.createFromLocation(stylesheet.startLine, stylesheet.startColumn);\n\n      const oldRange = edit.oldRange.relativeFrom(startLocation.startLine, startLocation.startColumn);\n      const newRange = edit.newRange.relativeFrom(startLocation.startLine, startLocation.startColumn);\n      text = new TextUtils.Text.Text(text.replaceRange(oldRange, edit.newText));\n      const updatePromises = [];\n      for (const script of scripts) {\n        const scriptOffset = scriptOffsetMap.get(script) ||\n            TextUtils.TextRange.TextRange.createFromLocation(script.lineOffset, script.columnOffset);\n        if (!scriptOffset.follows(oldRange)) {\n          continue;\n        }\n        scriptOffsetMap.set(script, scriptOffset.rebaseAfterTextEdit(oldRange, newRange));\n        updatePromises.push(DebuggerWorkspaceBinding.instance().updateLocations(script));\n      }\n      for (const style of styles) {\n        const styleOffset = styleSheetOffsetMap.get(style) ||\n            TextUtils.TextRange.TextRange.createFromLocation(style.startLine, style.startColumn);\n        if (!styleOffset.follows(oldRange)) {\n          continue;\n        }\n        styleSheetOffsetMap.set(style, styleOffset.rebaseAfterTextEdit(oldRange, newRange));\n        updatePromises.push(CSSWorkspaceBinding.instance().updateLocations(style));\n      }\n      await Promise.all(updatePromises);\n    }\n    this.#uiSourceCode.addRevision(text.value());\n  }\n\n  addResource(resource: SDK.Resource.Resource): void {\n    this.resources.add(resource);\n    if (resource.frameId) {\n      NetworkProject.addFrameAttribution(this.#uiSourceCode, resource.frameId);\n    }\n  }\n\n  removeResource(resource: SDK.Resource.Resource): void {\n    this.resources.delete(resource);\n    if (resource.frameId) {\n      NetworkProject.removeFrameAttribution(this.#uiSourceCode, resource.frameId);\n    }\n  }\n\n  dispose(): void {\n    this.#project.removeFile(this.#uiSourceCode.url());\n  }\n\n  private firstResource(): SDK.Resource.Resource {\n    console.assert(this.resources.size > 0);\n    return this.resources.values().next().value;\n  }\n\n  contentURL(): Platform.DevToolsPath.UrlString {\n    return this.firstResource().contentURL();\n  }\n\n  contentType(): Common.ResourceType.ResourceType {\n    return this.firstResource().contentType();\n  }\n\n  contentEncoded(): Promise<boolean> {\n    return this.firstResource().contentEncoded();\n  }\n\n  requestContent(): Promise<TextUtils.ContentProvider.DeferredContent> {\n    return this.firstResource().requestContent();\n  }\n\n  searchInContent(query: string, caseSensitive: boolean, isRegex: boolean):\n      Promise<TextUtils.ContentProvider.SearchMatch[]> {\n    return this.firstResource().searchInContent(query, caseSensitive, isRegex);\n  }\n}\n"]}