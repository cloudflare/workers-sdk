{"version":3,"file":"ZoomManager.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/ZoomManager.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,MAAM,MAAM,6BAA6B,CAAC;AAGtD,IAAI,mBAA0C,CAAC;AAE/C,MAAM,OAAO,WAAY,SAAQ,MAAM,CAAC,aAAa,CAAC,aAAyB;IACrE,YAAY,CAAyD;IACrE,kBAAkB,CAAS;IAEnC,YAAoB,MAAc,EAAE,YAAoE;QACtG,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;QACjC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC;QACzD,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;IAC1E,CAAC;IAED,MAAM,CAAC,QAAQ,CAAC,OAIZ,EAAC,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAC;QACjD,MAAM,EAAC,QAAQ,EAAE,GAAG,EAAE,YAAY,EAAC,GAAG,IAAI,CAAC;QAC3C,IAAI,CAAC,mBAAmB,IAAI,QAAQ,EAAE;YACpC,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE;gBACzB,MAAM,IAAI,KAAK,CACX,4EAA4E,IAAI,KAAK,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC;aACtG;YAED,mBAAmB,GAAG,IAAI,WAAW,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;SAC1D;QAED,OAAO,mBAAmB,CAAC;IAC7B,CAAC;IAED,MAAM,CAAC,cAAc;QACnB,mBAAmB,GAAG,SAAS,CAAC;IAClC,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,kBAAkB,CAAC;IACjC,CAAC;IAED,QAAQ,CAAC,KAAa;QACpB,OAAO,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC;IACzC,CAAC;IAED,QAAQ,CAAC,QAAgB;QACvB,OAAO,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC;IAC5C,CAAC;IAEO,cAAc;QACpB,MAAM,aAAa,GAAG,IAAI,CAAC,kBAAkB,CAAC;QAC9C,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC;QACzD,IAAI,aAAa,KAAK,IAAI,CAAC,kBAAkB,EAAE;YAC7C,IAAI,CAAC,wBAAwB,kCAAqB,EAAC,IAAI,EAAE,aAAa,EAAE,EAAE,EAAE,IAAI,CAAC,kBAAkB,EAAC,CAAC,CAAC;SACvG;IACH,CAAC;CACF","sourcesContent":["// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport type * as Host from '../../core/host/host.js';\n\nlet zoomManagerInstance: ZoomManager|undefined;\n\nexport class ZoomManager extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  private frontendHost: Host.InspectorFrontendHostAPI.InspectorFrontendHostAPI;\n  private zoomFactorInternal: number;\n\n  private constructor(window: Window, frontendHost: Host.InspectorFrontendHostAPI.InspectorFrontendHostAPI) {\n    super();\n    this.frontendHost = frontendHost;\n    this.zoomFactorInternal = this.frontendHost.zoomFactor();\n    window.addEventListener('resize', this.onWindowResize.bind(this), true);\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    win: Window|null,\n    frontendHost: Host.InspectorFrontendHostAPI.InspectorFrontendHostAPI|null,\n  } = {forceNew: null, win: null, frontendHost: null}): ZoomManager {\n    const {forceNew, win, frontendHost} = opts;\n    if (!zoomManagerInstance || forceNew) {\n      if (!win || !frontendHost) {\n        throw new Error(\n            `Unable to create zoom manager: window and frontendHost must be provided: ${new Error().stack}`);\n      }\n\n      zoomManagerInstance = new ZoomManager(win, frontendHost);\n    }\n\n    return zoomManagerInstance;\n  }\n\n  static removeInstance(): void {\n    zoomManagerInstance = undefined;\n  }\n\n  zoomFactor(): number {\n    return this.zoomFactorInternal;\n  }\n\n  cssToDIP(value: number): number {\n    return value * this.zoomFactorInternal;\n  }\n\n  dipToCSS(valueDIP: number): number {\n    return valueDIP / this.zoomFactorInternal;\n  }\n\n  private onWindowResize(): void {\n    const oldZoomFactor = this.zoomFactorInternal;\n    this.zoomFactorInternal = this.frontendHost.zoomFactor();\n    if (oldZoomFactor !== this.zoomFactorInternal) {\n      this.dispatchEventToListeners(Events.ZoomChanged, {from: oldZoomFactor, to: this.zoomFactorInternal});\n    }\n  }\n}\n\nexport const enum Events {\n  ZoomChanged = 'ZoomChanged',\n}\n\nexport interface ZoomChangedEvent {\n  from: number;\n  to: number;\n}\n\nexport type EventTypes = {\n  [Events.ZoomChanged]: ZoomChangedEvent,\n};\n"]}