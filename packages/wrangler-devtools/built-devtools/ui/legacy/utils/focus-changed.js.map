{"version":3,"file":"focus-changed.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/legacy/utils/focus-changed.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,QAAQ,MAAM,oCAAoC,CAAC;AAE/D,mEAAmE;AACnE,gEAAgE;AAChE,SAAS,wBAAwB,CAAC,IAAe;IAC/C,OAAO,IAAI,EAAE;QACX,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,MAAM;SACP;QAED,IAAI,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;KACtC;IACD,IAAI,CAAC,IAAI,EAAE;QACT,OAAO;KACR;IAED,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC;IAC3B,OAAO,MAAM,IAAI,MAAM,CAAC,YAAY,EAAE,EAAE;QACtC,MAAM,YAAY,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;QAC3C,IAAI,CAAC,YAAY,EAAE;YACjB,MAAM;SACP;QAED,YAAY,CAAC,mBAAmB,GAAG,MAAM,CAAC;QAC1C,MAAM,GAAG,YAAY,CAAC;KACvB;AACH,CAAC;AAED,mEAAmE;AACnE,gEAAgE;AAChE,SAAS,yBAAyB,CAAC,IAAe;IAChD,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAC7C,MAAM,WAAW,GAAG,cAAc,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;IACnD,IAAI,MAAM,GAAG,IAAI,CAAC;IAClB,OAAO,IAAI,EAAE;QACX,IAAI,WAAW,IAAI,IAAI,YAAY,WAAW,EAAE;YAC9C,IAAI,MAAM,EAAE;gBACV,mEAAmE;gBACnE,8DAA8D;gBAC7D,IAAY,CAAC,qBAAqB,GAAG,MAAM,CAAC;aAC9C;YACD,MAAM,GAAG,IAAI,CAAC;SACf;QACD,IAAI,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;KACtC;AACH,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,KAAY;IACvC,MAAM,MAAM,GAAG,KAAK,CAAC,MAAqB,CAAC;IAC3C,MAAM,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC;IACtD,MAAM,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IACpF,wBAAwB,CAAC,OAAO,CAAC,CAAC;IAClC,yBAAyB,CAAC,OAAO,CAAC,CAAC;AACrC,CAAC","sourcesContent":["// Copyright 2019 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../../core/platform/platform.js';\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction WidgetfocusWidgetForNode(node: Node|null): void {\n  while (node) {\n    if (node.__widget) {\n      break;\n    }\n\n    node = node.parentNodeOrShadowHost();\n  }\n  if (!node) {\n    return;\n  }\n\n  let widget = node.__widget;\n  while (widget && widget.parentWidget()) {\n    const parentWidget = widget.parentWidget();\n    if (!parentWidget) {\n      break;\n    }\n\n    parentWidget.defaultFocusedChild = widget;\n    widget = parentWidget;\n  }\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction XWidgetfocusWidgetForNode(node: Node|null): void {\n  node = node && node.parentNodeOrShadowHost();\n  const XWidgetCtor = customElements.get('x-widget');\n  let widget = null;\n  while (node) {\n    if (XWidgetCtor && node instanceof XWidgetCtor) {\n      if (widget) {\n        // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (node as any).defaultFocusedElement = widget;\n      }\n      widget = node;\n    }\n    node = node.parentNodeOrShadowHost();\n  }\n}\n\nexport function focusChanged(event: Event): void {\n  const target = event.target as HTMLElement;\n  const document = target ? target.ownerDocument : null;\n  const element = document ? Platform.DOMUtilities.deepActiveElement(document) : null;\n  WidgetfocusWidgetForNode(element);\n  XWidgetfocusWidgetForNode(element);\n}\n"]}