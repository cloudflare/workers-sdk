{"version":3,"file":"Swatches.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/inline_editor/Swatches.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as TextUtils from '../../../../models/text_utils/text_utils.js';\nimport * as UI from '../../legacy.js';\n\nimport {ColorSwatch, FormatChangedEvent} from './ColorSwatch.js';\nimport type {CSSShadowModel} from './CSSShadowModel.js';\nimport bezierSwatchStyles from './bezierSwatch.css.js';\nimport cssShadowSwatchStyles from './cssShadowSwatch.css.js';\n\nexport class BezierSwatch extends HTMLSpanElement {\n  private readonly iconElementInternal: UI.Icon.Icon;\n  private textElement: HTMLElement;\n\n  constructor() {\n    super();\n    const root = UI.Utils.createShadowRootWithCoreStyles(this, {\n      cssFile: [bezierSwatchStyles],\n      delegatesFocus: undefined,\n    });\n    this.iconElementInternal = UI.Icon.Icon.create('smallicon-bezier', 'bezier-swatch-icon');\n    root.appendChild(this.iconElementInternal);\n    this.textElement = this.createChild('span');\n    root.createChild('slot');\n  }\n\n  static create(): BezierSwatch {\n    let constructor: (() => Element)|((() => Element) | null) = BezierSwatch.constructorInternal;\n    if (!constructor) {\n      constructor = UI.Utils.registerCustomElement('span', 'bezier-swatch', BezierSwatch);\n      BezierSwatch.constructorInternal = constructor;\n    }\n\n    return constructor() as BezierSwatch;\n  }\n\n  bezierText(): string {\n    return this.textElement.textContent || '';\n  }\n\n  setBezierText(text: string): void {\n    this.textElement.textContent = text;\n  }\n\n  hideText(hide: boolean): void {\n    this.textElement.hidden = hide;\n  }\n\n  iconElement(): HTMLSpanElement {\n    return this.iconElementInternal;\n  }\n\n  private static constructorInternal: (() => Element)|null = null;\n}\n\nexport class CSSShadowSwatch extends HTMLSpanElement {\n  private readonly iconElementInternal: UI.Icon.Icon;\n  private contentElement: HTMLElement;\n  private colorSwatchInternal!: ColorSwatch|null;\n  private modelInternal?: CSSShadowModel;\n\n  constructor() {\n    super();\n    const root = UI.Utils.createShadowRootWithCoreStyles(this, {\n      cssFile: [cssShadowSwatchStyles],\n      delegatesFocus: undefined,\n    });\n    this.iconElementInternal = UI.Icon.Icon.create('smallicon-shadow', 'shadow-swatch-icon');\n    root.appendChild(this.iconElementInternal);\n    root.createChild('slot');\n    this.contentElement = this.createChild('span');\n  }\n\n  static create(): CSSShadowSwatch {\n    let constructor: (() => Element)|((() => Element) | null) = CSSShadowSwatch.constructorInternal;\n    if (!constructor) {\n      constructor = UI.Utils.registerCustomElement('span', 'css-shadow-swatch', CSSShadowSwatch);\n      CSSShadowSwatch.constructorInternal = constructor;\n    }\n\n    return constructor() as CSSShadowSwatch;\n  }\n\n  model(): CSSShadowModel {\n    return this.modelInternal as CSSShadowModel;\n  }\n\n  setCSSShadow(model: CSSShadowModel): void {\n    this.modelInternal = model;\n    this.contentElement.removeChildren();\n    const results = TextUtils.TextUtils.Utils.splitStringByRegexes(\n        model.asCSSText(), [/!important/g, /inset/g, Common.Color.Regex]);\n    for (let i = 0; i < results.length; i++) {\n      const result = results[i];\n      if (result.regexIndex === 2) {\n        if (!this.colorSwatchInternal) {\n          this.colorSwatchInternal = new ColorSwatch();\n          const value = this.colorSwatchInternal.createChild('span');\n          this.colorSwatchInternal.addEventListener(FormatChangedEvent.eventName, (event: FormatChangedEvent) => {\n            value.textContent = event.data.text;\n          });\n        }\n\n        this.colorSwatchInternal.renderColor(model.color());\n        const value = this.colorSwatchInternal.querySelector('span');\n        if (value) {\n          value.textContent = model.color().asString();\n        }\n        this.contentElement.appendChild(this.colorSwatchInternal);\n      } else {\n        this.contentElement.appendChild(document.createTextNode(result.value));\n      }\n    }\n  }\n\n  hideText(hide: boolean): void {\n    this.contentElement.hidden = hide;\n  }\n\n  iconElement(): HTMLSpanElement {\n    return this.iconElementInternal;\n  }\n\n  colorSwatch(): ColorSwatch|null {\n    return this.colorSwatchInternal;\n  }\n\n  private static constructorInternal: (() => Element)|null = null;\n}\n"]}