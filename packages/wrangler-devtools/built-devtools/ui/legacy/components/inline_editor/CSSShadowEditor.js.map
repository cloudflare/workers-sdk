{"version":3,"file":"CSSShadowEditor.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/inline_editor/CSSShadowEditor.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as UI from '../../legacy.js';\n\nimport type {CSSShadowModel} from './CSSShadowModel.js';\nimport {CSSLength} from './CSSShadowModel.js';\nimport cssShadowEditorStyles from './cssShadowEditor.css.js';\n\nconst UIStrings = {\n  /**\n  *@description Text that refers to some types\n  */\n  type: 'Type',\n  /**\n  *@description Text in CSSShadow Editor of the inline editor in the Styles tab\n  */\n  xOffset: 'X offset',\n  /**\n  *@description Text in CSSShadow Editor of the inline editor in the Styles tab\n  */\n  yOffset: 'Y offset',\n  /**\n  * @description Text in CSSShadow Editor of the inline editor in the Styles tab. Noun which is a\n  * label for an input that allows the user to specify how blurred the box-shadow should be.\n  */\n  blur: 'Blur',\n  /**\n  *@description Text in CSSShadow Editor of the inline editor in the Styles tab\n  */\n  spread: 'Spread',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/inline_editor/CSSShadowEditor.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst maxRange: number = 20;\nconst defaultUnit: string = 'px';\nconst sliderThumbRadius: number = 6;\nconst canvasSize: number = 88;\n\nexport class CSSShadowEditor extends Common.ObjectWrapper.eventMixin<EventTypes, typeof UI.Widget.VBox>(\n    UI.Widget.VBox) {\n  private readonly typeField: HTMLElement;\n  private readonly outsetButton: HTMLElement;\n  private readonly insetButton: HTMLElement;\n  private xInput: HTMLInputElement;\n  private yInput: HTMLInputElement;\n  private xySlider: HTMLCanvasElement;\n  private halfCanvasSize: number;\n  private readonly innerCanvasSize: number;\n  private blurInput: HTMLInputElement;\n  private blurSlider: HTMLInputElement;\n  private readonly spreadField: HTMLElement;\n  private spreadInput: HTMLInputElement;\n  private spreadSlider: HTMLInputElement;\n  private model!: CSSShadowModel;\n  private canvasOrigin!: UI.Geometry.Point;\n  private changedElement?: HTMLInputElement|null;\n  constructor() {\n    super(true);\n    this.contentElement.tabIndex = 0;\n    this.setDefaultFocusedElement(this.contentElement);\n\n    this.typeField = this.contentElement.createChild('div', 'shadow-editor-field shadow-editor-flex-field');\n    this.typeField.createChild('label', 'shadow-editor-label').textContent = i18nString(UIStrings.type);\n    this.outsetButton = this.typeField.createChild('button', 'shadow-editor-button-left');\n    this.outsetButton.textContent = i18n.i18n.lockedString('Outset');\n    this.outsetButton.addEventListener('click', this.onButtonClick.bind(this), false);\n    this.insetButton = this.typeField.createChild('button', 'shadow-editor-button-right');\n    this.insetButton.textContent = i18n.i18n.lockedString('Inset');\n    this.insetButton.addEventListener('click', this.onButtonClick.bind(this), false);\n\n    const xField = this.contentElement.createChild('div', 'shadow-editor-field');\n    this.xInput = this.createTextInput(xField, i18nString(UIStrings.xOffset));\n    const yField = this.contentElement.createChild('div', 'shadow-editor-field');\n    this.yInput = this.createTextInput(yField, i18nString(UIStrings.yOffset));\n    this.xySlider = (xField.createChild('canvas', 'shadow-editor-2D-slider') as HTMLCanvasElement);\n    this.xySlider.width = canvasSize;\n    this.xySlider.height = canvasSize;\n    this.xySlider.tabIndex = -1;\n    this.halfCanvasSize = canvasSize / 2;\n    this.innerCanvasSize = this.halfCanvasSize - sliderThumbRadius;\n    UI.UIUtils.installDragHandle(this.xySlider, this.dragStart.bind(this), this.dragMove.bind(this), null, 'default');\n    this.xySlider.addEventListener('keydown', this.onCanvasArrowKey.bind(this), false);\n    this.xySlider.addEventListener('blur', this.onCanvasBlur.bind(this), false);\n\n    const blurField =\n        this.contentElement.createChild('div', 'shadow-editor-field shadow-editor-flex-field shadow-editor-blur-field');\n    this.blurInput = this.createTextInput(blurField, i18nString(UIStrings.blur));\n    this.blurSlider = this.createSlider(blurField);\n\n    this.spreadField = this.contentElement.createChild('div', 'shadow-editor-field shadow-editor-flex-field');\n    this.spreadInput = this.createTextInput(this.spreadField, i18nString(UIStrings.spread));\n    this.spreadSlider = this.createSlider(this.spreadField);\n  }\n\n  private createTextInput(field: Element, propertyName: string): HTMLInputElement {\n    const label = field.createChild('label', 'shadow-editor-label');\n    label.textContent = propertyName;\n    label.setAttribute('for', propertyName);\n    const textInput = UI.UIUtils.createInput('shadow-editor-text-input', 'text');\n    field.appendChild(textInput);\n    textInput.id = propertyName;\n    textInput.addEventListener('keydown', this.handleValueModification.bind(this), false);\n    textInput.addEventListener('wheel', this.handleValueModification.bind(this), false);\n    textInput.addEventListener('input', this.onTextInput.bind(this), false);\n    textInput.addEventListener('blur', this.onTextBlur.bind(this), false);\n    return textInput;\n  }\n\n  private createSlider(field: Element): HTMLInputElement {\n    const slider = UI.UIUtils.createSlider(0, maxRange, -1);\n    slider.addEventListener('input', this.onSliderInput.bind(this), false);\n    field.appendChild(slider);\n    return slider as HTMLInputElement;\n  }\n\n  wasShown(): void {\n    this.registerCSSFiles([cssShadowEditorStyles]);\n    this.updateUI();\n  }\n\n  setModel(model: CSSShadowModel): void {\n    this.model = model;\n    this.typeField.classList.toggle('hidden', !model.isBoxShadow());\n    this.spreadField.classList.toggle('hidden', !model.isBoxShadow());\n    this.updateUI();\n  }\n\n  private updateUI(): void {\n    this.updateButtons();\n    this.xInput.value = this.model.offsetX().asCSSText();\n    this.yInput.value = this.model.offsetY().asCSSText();\n    this.blurInput.value = this.model.blurRadius().asCSSText();\n    this.spreadInput.value = this.model.spreadRadius().asCSSText();\n    this.blurSlider.value = this.model.blurRadius().amount.toString();\n    this.spreadSlider.value = this.model.spreadRadius().amount.toString();\n    this.updateCanvas(false);\n  }\n\n  private updateButtons(): void {\n    this.insetButton.classList.toggle('enabled', this.model.inset());\n    this.outsetButton.classList.toggle('enabled', !this.model.inset());\n  }\n\n  private updateCanvas(drawFocus: boolean): void {\n    const context = this.xySlider.getContext('2d');\n    if (!context) {\n      throw new Error('Unable to obtain canvas context');\n    }\n    context.clearRect(0, 0, this.xySlider.width, this.xySlider.height);\n\n    // Draw dashed axes.\n    context.save();\n    context.setLineDash([1, 1]);\n    context.strokeStyle = 'rgba(210, 210, 210, 0.8)';\n    context.beginPath();\n    context.moveTo(this.halfCanvasSize, 0);\n    context.lineTo(this.halfCanvasSize, canvasSize);\n    context.moveTo(0, this.halfCanvasSize);\n    context.lineTo(canvasSize, this.halfCanvasSize);\n    context.stroke();\n    context.restore();\n\n    const thumbPoint = this.sliderThumbPosition();\n    // Draw 2D slider line.\n    context.save();\n    context.translate(this.halfCanvasSize, this.halfCanvasSize);\n    context.lineWidth = 2;\n    context.strokeStyle = 'rgba(130, 130, 130, 0.75)';\n    context.beginPath();\n    context.moveTo(0, 0);\n    context.lineTo(thumbPoint.x, thumbPoint.y);\n    context.stroke();\n    // Draw 2D slider thumb.\n    if (drawFocus) {\n      context.beginPath();\n      context.fillStyle = 'rgba(66, 133, 244, 0.4)';\n      context.arc(thumbPoint.x, thumbPoint.y, sliderThumbRadius + 2, 0, 2 * Math.PI);\n      context.fill();\n    }\n    context.beginPath();\n    context.fillStyle = '#4285F4';\n    context.arc(thumbPoint.x, thumbPoint.y, sliderThumbRadius, 0, 2 * Math.PI);\n    context.fill();\n    context.restore();\n  }\n\n  private onButtonClick(event: Event): void {\n    const insetClicked = (event.currentTarget === this.insetButton);\n    if (insetClicked && this.model.inset() || !insetClicked && !this.model.inset()) {\n      return;\n    }\n    this.model.setInset(insetClicked);\n    this.updateButtons();\n    this.dispatchEventToListeners(Events.ShadowChanged, this.model);\n  }\n\n  private handleValueModification(event: Event): void {\n    const target = (event.currentTarget as HTMLInputElement);\n    const modifiedValue = UI.UIUtils.createReplacementString(target.value, event, customNumberHandler);\n    if (!modifiedValue) {\n      return;\n    }\n    const length = CSSLength.parse(modifiedValue);\n    if (!length) {\n      return;\n    }\n    if (event.currentTarget === this.blurInput && length.amount < 0) {\n      length.amount = 0;\n    }\n    target.value = length.asCSSText();\n    target.selectionStart = 0;\n    target.selectionEnd = target.value.length;\n    this.onTextInput(event);\n    event.consume(true);\n\n    function customNumberHandler(prefix: string, number: number, suffix: string): string {\n      if (!suffix.length) {\n        suffix = defaultUnit;\n      }\n      return prefix + number + suffix;\n    }\n  }\n\n  private onTextInput(event: Event): void {\n    const currentTarget = (event.currentTarget as HTMLInputElement);\n    this.changedElement = currentTarget;\n    this.changedElement.classList.remove('invalid');\n    const length = CSSLength.parse(currentTarget.value);\n    if (!length || currentTarget === this.blurInput && length.amount < 0) {\n      return;\n    }\n    if (currentTarget === this.xInput) {\n      this.model.setOffsetX(length);\n      this.updateCanvas(false);\n    } else if (currentTarget === this.yInput) {\n      this.model.setOffsetY(length);\n      this.updateCanvas(false);\n    } else if (currentTarget === this.blurInput) {\n      this.model.setBlurRadius(length);\n      this.blurSlider.value = length.amount.toString();\n    } else if (currentTarget === this.spreadInput) {\n      this.model.setSpreadRadius(length);\n      this.spreadSlider.value = length.amount.toString();\n    }\n    this.dispatchEventToListeners(Events.ShadowChanged, this.model);\n  }\n\n  private onTextBlur(): void {\n    if (!this.changedElement) {\n      return;\n    }\n    let length: (CSSLength|null)|CSSLength =\n        !this.changedElement.value.trim() ? CSSLength.zero() : CSSLength.parse(this.changedElement.value);\n    if (!length) {\n      length = CSSLength.parse(this.changedElement.value + defaultUnit);\n    }\n    if (!length) {\n      this.changedElement.classList.add('invalid');\n      this.changedElement = null;\n      return;\n    }\n    if (this.changedElement === this.xInput) {\n      this.model.setOffsetX(length);\n      this.xInput.value = length.asCSSText();\n      this.updateCanvas(false);\n    } else if (this.changedElement === this.yInput) {\n      this.model.setOffsetY(length);\n      this.yInput.value = length.asCSSText();\n      this.updateCanvas(false);\n    } else if (this.changedElement === this.blurInput) {\n      if (length.amount < 0) {\n        length = CSSLength.zero();\n      }\n      this.model.setBlurRadius(length);\n      this.blurInput.value = length.asCSSText();\n      this.blurSlider.value = length.amount.toString();\n    } else if (this.changedElement === this.spreadInput) {\n      this.model.setSpreadRadius(length);\n      this.spreadInput.value = length.asCSSText();\n      this.spreadSlider.value = length.amount.toString();\n    }\n    this.changedElement = null;\n    this.dispatchEventToListeners(Events.ShadowChanged, this.model);\n  }\n\n  private onSliderInput(event: Event): void {\n    if (event.currentTarget === this.blurSlider) {\n      this.model.setBlurRadius(\n          new CSSLength(Number(this.blurSlider.value), this.model.blurRadius().unit || defaultUnit));\n      this.blurInput.value = this.model.blurRadius().asCSSText();\n      this.blurInput.classList.remove('invalid');\n    } else if (event.currentTarget === this.spreadSlider) {\n      this.model.setSpreadRadius(\n          new CSSLength(Number(this.spreadSlider.value), this.model.spreadRadius().unit || defaultUnit));\n      this.spreadInput.value = this.model.spreadRadius().asCSSText();\n      this.spreadInput.classList.remove('invalid');\n    }\n    this.dispatchEventToListeners(Events.ShadowChanged, this.model);\n  }\n\n  private dragStart(event: MouseEvent): boolean {\n    this.xySlider.focus();\n    this.updateCanvas(true);\n    this.canvasOrigin = new UI.Geometry.Point(\n        this.xySlider.totalOffsetLeft() + this.halfCanvasSize, this.xySlider.totalOffsetTop() + this.halfCanvasSize);\n    const clickedPoint = new UI.Geometry.Point(event.x - this.canvasOrigin.x, event.y - this.canvasOrigin.y);\n    const thumbPoint = this.sliderThumbPosition();\n    if (clickedPoint.distanceTo(thumbPoint) >= sliderThumbRadius) {\n      this.dragMove(event);\n    }\n    return true;\n  }\n\n  private dragMove(event: MouseEvent): void {\n    let point: UI.Geometry.Point = new UI.Geometry.Point(event.x - this.canvasOrigin.x, event.y - this.canvasOrigin.y);\n    if (event.shiftKey) {\n      point = this.snapToClosestDirection(point);\n    }\n    const constrainedPoint = this.constrainPoint(point, this.innerCanvasSize);\n    const newX = Math.round((constrainedPoint.x / this.innerCanvasSize) * maxRange);\n    const newY = Math.round((constrainedPoint.y / this.innerCanvasSize) * maxRange);\n\n    if (event.shiftKey) {\n      this.model.setOffsetX(new CSSLength(newX, this.model.offsetX().unit || defaultUnit));\n      this.model.setOffsetY(new CSSLength(newY, this.model.offsetY().unit || defaultUnit));\n    } else {\n      if (!event.altKey) {\n        this.model.setOffsetX(new CSSLength(newX, this.model.offsetX().unit || defaultUnit));\n      }\n      if (!UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlEquivalentKey(event)) {\n        this.model.setOffsetY(new CSSLength(newY, this.model.offsetY().unit || defaultUnit));\n      }\n    }\n    this.xInput.value = this.model.offsetX().asCSSText();\n    this.yInput.value = this.model.offsetY().asCSSText();\n    this.xInput.classList.remove('invalid');\n    this.yInput.classList.remove('invalid');\n    this.updateCanvas(true);\n    this.dispatchEventToListeners(Events.ShadowChanged, this.model);\n  }\n\n  private onCanvasBlur(): void {\n    this.updateCanvas(false);\n  }\n\n  private onCanvasArrowKey(event: Event): void {\n    const keyboardEvent = (event as KeyboardEvent);\n    let shiftX = 0;\n    let shiftY = 0;\n    if (keyboardEvent.key === 'ArrowRight') {\n      shiftX = 1;\n    } else if (keyboardEvent.key === 'ArrowLeft') {\n      shiftX = -1;\n    } else if (keyboardEvent.key === 'ArrowUp') {\n      shiftY = -1;\n    } else if (keyboardEvent.key === 'ArrowDown') {\n      shiftY = 1;\n    }\n\n    if (!shiftX && !shiftY) {\n      return;\n    }\n    event.consume(true);\n\n    if (shiftX) {\n      const offsetX = this.model.offsetX();\n      const newAmount = Platform.NumberUtilities.clamp(offsetX.amount + shiftX, -maxRange, maxRange);\n      if (newAmount === offsetX.amount) {\n        return;\n      }\n      this.model.setOffsetX(new CSSLength(newAmount, offsetX.unit || defaultUnit));\n      this.xInput.value = this.model.offsetX().asCSSText();\n      this.xInput.classList.remove('invalid');\n    }\n    if (shiftY) {\n      const offsetY = this.model.offsetY();\n      const newAmount = Platform.NumberUtilities.clamp(offsetY.amount + shiftY, -maxRange, maxRange);\n      if (newAmount === offsetY.amount) {\n        return;\n      }\n      this.model.setOffsetY(new CSSLength(newAmount, offsetY.unit || defaultUnit));\n      this.yInput.value = this.model.offsetY().asCSSText();\n      this.yInput.classList.remove('invalid');\n    }\n    this.updateCanvas(true);\n    this.dispatchEventToListeners(Events.ShadowChanged, this.model);\n  }\n\n  private constrainPoint(point: UI.Geometry.Point, max: number): UI.Geometry.Point {\n    if (Math.abs(point.x) <= max && Math.abs(point.y) <= max) {\n      return new UI.Geometry.Point(point.x, point.y);\n    }\n    return point.scale(max / Math.max(Math.abs(point.x), Math.abs(point.y)));\n  }\n\n  private snapToClosestDirection(point: UI.Geometry.Point): UI.Geometry.Point {\n    let minDistance: number = Number.MAX_VALUE;\n    let closestPoint: UI.Geometry.Point = point;\n\n    const directions = [\n      new UI.Geometry.Point(0, -1), new UI.Geometry.Point(1, -1), new UI.Geometry.Point(1, 0),\n      new UI.Geometry.Point(1, 1),  // Southeast\n    ];\n\n    for (const direction of directions) {\n      const projection = point.projectOn(direction);\n      const distance = point.distanceTo(projection);\n      if (distance < minDistance) {\n        minDistance = distance;\n        closestPoint = projection;\n      }\n    }\n\n    return closestPoint;\n  }\n\n  private sliderThumbPosition(): UI.Geometry.Point {\n    const x = (this.model.offsetX().amount / maxRange) * this.innerCanvasSize;\n    const y = (this.model.offsetY().amount / maxRange) * this.innerCanvasSize;\n    return this.constrainPoint(new UI.Geometry.Point(x, y), this.innerCanvasSize);\n  }\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  ShadowChanged = 'ShadowChanged',\n}\n\nexport type EventTypes = {\n  [Events.ShadowChanged]: CSSShadowModel,\n};\n"]}