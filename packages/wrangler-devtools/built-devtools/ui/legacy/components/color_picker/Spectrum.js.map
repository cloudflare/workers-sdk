{"version":3,"file":"Spectrum.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/color_picker/Spectrum.ts"],"names":[],"mappings":"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S,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;IACD;QACE,SAAS;QACT,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC/G;CACF,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,eAAe,GAAG;IAC7B,KAAK,EAAE,UAAU;IACjB,OAAO,EAAE,KAAK;IACd,eAAe,EAAE,IAAI;IACrB,MAAM,EAAE,CAAC,GAAG,qBAAqB,CAAC,IAAI,EAAE,CAAC;IACzC,UAAU,EAAE,EAAE;CACf,CAAC;AAEF,MAAM,OAAO,MAAM;IACT,WAAW,CAAe;IAC1B,kBAAkB,CAAc;IAChC,oBAAoB,CAAc;IACzB,cAAc,CAAe;IAC9C,YAAY,aAA0B;QACpC,MAAM,aAAa,GAAG,aAAa,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;QAClE,IAAI,CAAC,kBAAkB,GAAG,aAAa,CAAC,WAAW,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;QAC5E,IAAI,CAAC,oBAAoB,GAAG,aAAa,CAAC,WAAW,CAAC,MAAM,EAAE,gBAAgB,CAAgB,CAAC;QAC/F,EAAE,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QACrD,EAAE,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC;QAC1D,IAAI,CAAC,oBAAoB,CAAC,QAAQ,GAAG,CAAC,CAAC;QACvC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5E,IAAI,CAAC,oBAAoB,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC3F,IAAI,CAAC,oBAAoB,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACvF,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,iBAAiB,CAAC,CAAC;QAC/E,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE,UAAU,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC,CAAC;QAC5F,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC3D,EAAE,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;IACvF,CAAC;IAED,QAAQ,CAAC,KAAyB,EAAE,WAAoB;QACtD,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,eAAe,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAW,CAAC;QACnG,sCAAsC;QACtC,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,MAAM,CAAC,oBAAoB,EAAE,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;QACtF,IAAI,CAAC,WAAW,GAAG,WAAW,IAAI,IAAI,CAAC;QACvC,IAAI,WAAW,EAAE;YACf,IAAI,CAAC,oBAAoB,CAAC,MAAM,GAAG,KAAK,CAAC;SAC1C;aAAM;YACL,IAAI,CAAC,oBAAoB,CAAC,MAAM,GAAG,IAAI,CAAC;SACzC;IACH,CAAC;IAEO,UAAU,CAAC,KAAY;QAC7B,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,qBAAqB,CAAC,CAAC;QACvD,IAAI,CAAC,qBAAqB,CAAC,6BAA6B,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACpF,EAAE,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;QACzD,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAEO,kBAAkB;QACxB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;QAClD,EAAE,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC;IAC5D,CAAC;CACF","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2011 Brian Grinstead All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as Host from '../../../../core/host/host.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as Root from '../../../../core/root/root.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport * as IconButton from '../../../components/icon_button/icon_button.js';\nimport * as UI from '../../legacy.js';\n\nimport {ContrastDetails, Events as ContrastDetailsEvents} from './ContrastDetails.js';\n\nimport type {ContrastInfo} from './ContrastInfo.js';\nimport {ContrastOverlay} from './ContrastOverlay.js';\nimport spectrumStyles from './spectrum.css.js';\n\nconst UIStrings = {\n  /**\n  *@description Tooltip text that appears when hovering over largeicon eyedropper button in Spectrum of the Color Picker\n  */\n  toggleColorPicker: 'Toggle color picker',\n  /**\n  *@description Aria label for hue slider in Color Picker\n  */\n  changeHue: 'Change hue',\n  /**\n  * @description Aria label for alpha slider in Color Picker. Alpha refers to the alpha channel of a\n  * color, and this tool allows the user to change the alpha value.\n  */\n  changeAlpha: 'Change alpha',\n  /**\n  *@description Aria label for HEX color format input\n  */\n  hex: 'HEX',\n  /**\n  *@description Aria label for color format switcher button in Color Picker\n  */\n  changeColorFormat: 'Change color format',\n  /**\n  *@description Screen reader reads this text when palette switcher button receives focus\n  */\n  previewPalettes: 'Preview palettes',\n  /**\n  *@description Tooltip text that appears when hovering over the largeicon add button in the Spectrum of the Color Picker\n  */\n  addToPalette: 'Add to palette',\n  /**\n  *@description Title text content in Spectrum of the Color Picker\n  */\n  colorPalettes: 'Color Palettes',\n  /**\n  *@description Label for close button in Color Picker\n  */\n  returnToColorPicker: 'Return to color picker',\n  /**\n  *@description Aria label which declares hex value of a swatch in the Color Picker\n  *@example {#969696} PH1\n  */\n  colorS: 'Color {PH1}',\n  /**\n  *@description Color element title in Spectrum of the Color Picker\n  *@example {#9c1724} PH1\n  */\n  longclickOrLongpressSpaceToShow: 'Long-click or long-press space to show alternate shades of {PH1}',\n  /**\n  *@description A context menu item in the Color Picker to organize the user-defined color palette (removes the user-defined color to which this action is performed)\"\n  */\n  removeColor: 'Remove color',\n  /**\n  *@description A context menu item in the Color Picker to organize the user-defined color palette (removes all user-defined colors to the right of the color to which this action is performed)\"\n  */\n  removeAllToTheRight: 'Remove all to the right',\n  /**\n  *@description A context menu item in the Color Picker to organize the user-defined color palette (removes all user-defined colors)\"\n  */\n  clearPalette: 'Clear palette',\n  /**\n  *@description Aria label for RGBA and HSLA color format inputs in Color Picker\n  *@example {R} PH1\n  *@example {RGBA} PH2\n  */\n  sInS: '{PH1} in {PH2}',\n  /**\n  *@description Swatch copy icon title in Spectrum of the Color Picker\n  */\n  copyColorToClipboard: 'Copy color to clipboard',\n  /**\n  *@description Aria text for the swatch position. Swatch is the color picker spectrum tool.\n  */\n  pressArrowKeysMessage:\n      'Press arrow keys with or without modifiers to move swatch position. Arrow key with Shift key moves position largely, with Ctrl key it is less and with Alt key it is even less',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/color_picker/Spectrum.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst colorElementToMutable = new WeakMap<HTMLElement, boolean>();\n\nconst colorElementToColor = new WeakMap<HTMLElement, string>();\n\nexport class Spectrum extends Common.ObjectWrapper.eventMixin<EventTypes, typeof UI.Widget.VBox>(UI.Widget.VBox) {\n  private colorElement: HTMLElement;\n  private colorDragElement: HTMLElement;\n  private dragX: number;\n  private dragY: number;\n  private colorPickerButton: UI.Toolbar.ToolbarToggle;\n  private readonly swatch: Swatch;\n  private hueElement: HTMLElement;\n  private hueSlider: HTMLElement;\n  private readonly alphaElement: HTMLElement;\n  private alphaElementBackground: HTMLElement;\n  private alphaSlider: HTMLElement;\n  private displayContainer: HTMLElement;\n  private textValues: HTMLInputElement[];\n  private textLabels: HTMLElement;\n  private hexContainer: HTMLElement;\n  private hexValue: HTMLInputElement;\n  private readonly contrastInfo: ContrastInfo|undefined;\n  private contrastOverlay: ContrastOverlay|undefined;\n  private contrastDetails: ContrastDetails|undefined;\n  private readonly contrastDetailsBackgroundColorPickedToggledBound:\n      ((event: Common.EventTarget.EventTargetEvent<boolean>) => void)|undefined;\n  private readonly palettes: Map<string, Palette>;\n  private readonly palettePanel: HTMLElement;\n  private palettePanelShowing: boolean;\n  private readonly paletteSectionContainer: HTMLElement;\n  private paletteContainer: HTMLElement;\n  private shadesContainer: HTMLElement;\n  private readonly deleteIconToolbar: UI.Toolbar.Toolbar;\n  private readonly deleteButton: UI.Toolbar.ToolbarButton;\n  private readonly addColorToolbar: UI.Toolbar.Toolbar;\n  private readonly colorPickedBound:\n      (event: Common.EventTarget.EventTargetEvent<Host.InspectorFrontendHostAPI.EyeDropperPickedColorEvent>) => void;\n  private hsv!: number[];\n  private hueAlphaWidth!: number;\n  dragWidth!: number;\n  dragHeight!: number;\n  private colorDragElementHeight!: number;\n  slideHelperWidth!: number;\n  private numPaletteRowsShown: number;\n  private selectedColorPalette!: Common.Settings.Setting<string>;\n  private customPaletteSetting!: Common.Settings.Setting<Palette>;\n  private colorOffset?: {\n    left: number,\n    top: number,\n  };\n  private closeButton?: UI.Toolbar.ToolbarButton;\n  private paletteContainerMutable?: boolean;\n  private eyeDropperExperimentEnabled?: boolean;\n  private shadesCloseHandler?: (() => void);\n  private dragElement?: HTMLElement;\n  private dragHotSpotX?: number;\n  private dragHotSpotY?: number;\n  private originalFormat?: string;\n  private colorNameInternal?: string;\n  private colorStringInternal?: string;\n  private colorFormat?: string;\n  constructor(contrastInfo?: ContrastInfo|null) {\n    super(true);\n\n    this.contentElement.tabIndex = 0;\n    this.colorElement = this.contentElement.createChild('div', 'spectrum-color');\n    this.colorElement.tabIndex = 0;\n    this.setDefaultFocusedElement(this.colorElement);\n    this.colorElement.addEventListener('keydown', this.onSliderKeydown.bind(this, positionColor.bind(this)));\n    const swatchAriaText = i18nString(UIStrings.pressArrowKeysMessage);\n    UI.ARIAUtils.setAccessibleName(this.colorElement, swatchAriaText);\n    UI.ARIAUtils.markAsApplication(this.colorElement);\n    this.colorDragElement = this.colorElement.createChild('div', 'spectrum-sat fill')\n                                .createChild('div', 'spectrum-val fill')\n                                .createChild('div', 'spectrum-dragger');\n    this.dragX = 0;\n    this.dragY = 0;\n\n    const toolsContainer: HTMLElement = this.contentElement.createChild('div', 'spectrum-tools') as HTMLElement;\n    const toolbar = new UI.Toolbar.Toolbar('spectrum-eye-dropper', toolsContainer);\n    this.colorPickerButton =\n        new UI.Toolbar.ToolbarToggle(i18nString(UIStrings.toggleColorPicker), 'largeicon-eyedropper');\n    this.colorPickerButton.setToggled(true);\n    this.colorPickerButton.addEventListener(\n        UI.Toolbar.ToolbarButton.Events.Click, this.toggleColorPicker.bind(this, undefined));\n    toolbar.appendToolbarItem(this.colorPickerButton);\n\n    this.swatch = new Swatch(toolsContainer);\n\n    this.hueElement = toolsContainer.createChild('div', 'spectrum-hue');\n    this.hueElement.tabIndex = 0;\n    this.hueElement.addEventListener('keydown', this.onSliderKeydown.bind(this, positionHue.bind(this)));\n    UI.ARIAUtils.setAccessibleName(this.hueElement, i18nString(UIStrings.changeHue));\n    UI.ARIAUtils.markAsSlider(this.hueElement, 0, 360);\n    this.hueSlider = this.hueElement.createChild('div', 'spectrum-slider');\n    this.alphaElement = toolsContainer.createChild('div', 'spectrum-alpha');\n    this.alphaElement.tabIndex = 0;\n    this.alphaElement.addEventListener('keydown', this.onSliderKeydown.bind(this, positionAlpha.bind(this)));\n    UI.ARIAUtils.setAccessibleName(this.alphaElement, i18nString(UIStrings.changeAlpha));\n    UI.ARIAUtils.markAsSlider(this.alphaElement, 0, 1);\n    this.alphaElementBackground = this.alphaElement.createChild('div', 'spectrum-alpha-background');\n    this.alphaSlider = this.alphaElement.createChild('div', 'spectrum-slider');\n\n    // RGBA/HSLA/HWBA display.\n    this.displayContainer = toolsContainer.createChild('div', 'spectrum-text source-code');\n    UI.ARIAUtils.markAsPoliteLiveRegion(this.displayContainer, true);\n    this.textValues = [];\n    for (let i = 0; i < 4; ++i) {\n      const inputValue = UI.UIUtils.createInput('spectrum-text-value');\n      this.displayContainer.appendChild(inputValue);\n      inputValue.maxLength = 4;\n      this.textValues.push(inputValue);\n      inputValue.addEventListener('keydown', this.inputChanged.bind(this), false);\n      inputValue.addEventListener('input', this.inputChanged.bind(this), false);\n      inputValue.addEventListener('wheel', this.inputChanged.bind(this), false);\n      inputValue.addEventListener('paste', this.pasted.bind(this), false);\n    }\n\n    this.textLabels = this.displayContainer.createChild('div', 'spectrum-text-label');\n\n    // HEX display.\n    this.hexContainer = toolsContainer.createChild('div', 'spectrum-text spectrum-text-hex source-code');\n    UI.ARIAUtils.markAsPoliteLiveRegion(this.hexContainer, true);\n    this.hexValue = UI.UIUtils.createInput('spectrum-text-value');\n    this.hexContainer.appendChild(this.hexValue);\n    this.hexValue.maxLength = 9;\n    this.hexValue.addEventListener('keydown', this.inputChanged.bind(this), false);\n    this.hexValue.addEventListener('input', this.inputChanged.bind(this), false);\n    this.hexValue.addEventListener('wheel', this.inputChanged.bind(this), false);\n    this.hexValue.addEventListener('paste', this.pasted.bind(this), false);\n\n    const label = this.hexContainer.createChild('div', 'spectrum-text-label');\n    label.textContent = i18nString(UIStrings.hex);\n    UI.ARIAUtils.setAccessibleName(this.hexValue, label.textContent);\n\n    const displaySwitcher = toolsContainer.createChild('div', 'spectrum-display-switcher spectrum-switcher');\n    appendSwitcherIcon(displaySwitcher);\n    UI.UIUtils.setTitle(displaySwitcher, i18nString(UIStrings.changeColorFormat));\n    displaySwitcher.tabIndex = 0;\n    self.onInvokeElement(displaySwitcher, event => {\n      this.formatViewSwitch();\n      event.consume(true);\n    });\n    UI.ARIAUtils.markAsButton(displaySwitcher);\n\n    UI.UIUtils.installDragHandle(\n        this.hueElement, this.dragStart.bind(this, positionHue.bind(this)), positionHue.bind(this), null, 'ew-resize',\n        'crosshair');\n    UI.UIUtils.installDragHandle(\n        this.alphaElement, this.dragStart.bind(this, positionAlpha.bind(this)), positionAlpha.bind(this), null,\n        'ew-resize', 'crosshair');\n    UI.UIUtils.installDragHandle(\n        this.colorElement, this.dragStart.bind(this, positionColor.bind(this)), positionColor.bind(this), null, 'move',\n        'crosshair');\n\n    // Color contrast business.\n    if (contrastInfo) {\n      this.contrastInfo = contrastInfo;\n      this.contrastOverlay = new ContrastOverlay(this.contrastInfo, this.colorElement);\n      this.contrastDetails = new ContrastDetails(\n          this.contrastInfo, this.contentElement, this.toggleColorPicker.bind(this),\n          this.contrastPanelExpanded.bind(this), this.colorSelected.bind(this));\n\n      this.contrastDetailsBackgroundColorPickedToggledBound =\n          this.contrastDetailsBackgroundColorPickedToggled.bind(this);\n    }\n\n    this.element.classList.add('flex-none');\n    this.palettes = new Map();\n    this.palettePanel = this.contentElement.createChild('div', 'palette-panel');\n    this.palettePanelShowing = false;\n    this.paletteSectionContainer = this.contentElement.createChild('div', 'spectrum-palette-container');\n    this.paletteContainer = this.paletteSectionContainer.createChild('div', 'spectrum-palette');\n    this.paletteContainer.addEventListener('contextmenu', this.showPaletteColorContextMenu.bind(this, -1));\n    this.shadesContainer = this.contentElement.createChild('div', 'palette-color-shades hidden');\n    UI.UIUtils.installDragHandle(\n        this.paletteContainer, this.paletteDragStart.bind(this), this.paletteDrag.bind(this),\n        this.paletteDragEnd.bind(this), 'default');\n    const paletteSwitcher =\n        this.paletteSectionContainer.createChild('div', 'spectrum-palette-switcher spectrum-switcher');\n    appendSwitcherIcon(paletteSwitcher);\n    UI.UIUtils.setTitle(paletteSwitcher, i18nString(UIStrings.previewPalettes));\n    UI.ARIAUtils.markAsButton(paletteSwitcher);\n    paletteSwitcher.tabIndex = 0;\n    self.onInvokeElement(paletteSwitcher, event => {\n      this.togglePalettePanel(true);\n      event.consume(true);\n    });\n\n    this.deleteIconToolbar = new UI.Toolbar.Toolbar('delete-color-toolbar');\n    this.deleteButton = new UI.Toolbar.ToolbarButton('', 'largeicon-trash-bin');\n    this.deleteIconToolbar.appendToolbarItem(this.deleteButton);\n\n    const overlay = this.contentElement.createChild('div', 'spectrum-overlay fill');\n    overlay.addEventListener('click', this.togglePalettePanel.bind(this, false));\n\n    this.addColorToolbar = new UI.Toolbar.Toolbar('add-color-toolbar');\n    const addColorButton = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.addToPalette), 'largeicon-add');\n    addColorButton.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, this.onAddColorMousedown.bind(this));\n    addColorButton.element.addEventListener('keydown', this.onAddColorKeydown.bind(this));\n    this.addColorToolbar.appendToolbarItem(addColorButton);\n\n    this.colorPickedBound = this.colorPicked.bind(this);\n\n    this.numPaletteRowsShown = -1;\n\n    this.loadPalettes();\n    new PaletteGenerator(palette => {\n      if (palette.colors.length) {\n        this.addPalette(palette);\n      } else if (this.selectedColorPalette.get() === palette.title) {\n        this.paletteSelected(MaterialPalette);\n      }\n    });\n\n    function getUpdatedSliderPosition(element: Element, event: Event): number {\n      const keyboardEvent = event as KeyboardEvent;\n      const elementPosition = element.getBoundingClientRect();\n      switch (keyboardEvent.key) {\n        case 'ArrowLeft':\n        case 'ArrowDown':\n          return elementPosition.left - 1;\n        case 'ArrowRight':\n        case 'ArrowUp':\n          return elementPosition.right + 1;\n        default:\n          return (event as MouseEvent).x;\n      }\n    }\n\n    function positionHue(this: Spectrum, event: Event): void {\n      const hsva = this.hsv.slice();\n      const sliderPosition = getUpdatedSliderPosition(this.hueSlider, event);\n      const hueAlphaLeft = this.hueElement.getBoundingClientRect().left;\n      const positionFraction = (sliderPosition - hueAlphaLeft) / this.hueAlphaWidth;\n      const newHue = 1 - positionFraction;\n      hsva[0] = Platform.NumberUtilities.clamp(newHue, 0, 1);\n      this.innerSetColor(hsva, '', undefined /* colorName */, undefined, ChangeSource.Other);\n      const colorValues = this.color().canonicalHSLA();\n      UI.ARIAUtils.setValueNow(this.hueElement, colorValues[0]);\n    }\n\n    function positionAlpha(this: Spectrum, event: Event): void {\n      const hsva = this.hsv.slice();\n      const sliderPosition = getUpdatedSliderPosition(this.alphaSlider, event);\n      const hueAlphaLeft = this.hueElement.getBoundingClientRect().left;\n      const positionFraction = (sliderPosition - hueAlphaLeft) / this.hueAlphaWidth;\n      const newAlpha = Math.round(positionFraction * 100) / 100;\n      hsva[3] = Platform.NumberUtilities.clamp(newAlpha, 0, 1);\n      this.innerSetColor(hsva, '', undefined /* colorName */, undefined, ChangeSource.Other);\n      const colorValues = this.color().canonicalHSLA();\n      UI.ARIAUtils.setValueText(this.alphaElement, colorValues[3]);\n    }\n\n    function positionColor(this: Spectrum, event: Event): void {\n      const hsva = this.hsv.slice();\n      const colorPosition = getUpdatedColorPosition(this.colorDragElement, event);\n      this.colorOffset = this.colorElement.totalOffset();\n      hsva[1] = Platform.NumberUtilities.clamp((colorPosition.x - this.colorOffset.left) / this.dragWidth, 0, 1);\n      hsva[2] = Platform.NumberUtilities.clamp(1 - (colorPosition.y - this.colorOffset.top) / this.dragHeight, 0, 1);\n\n      this.innerSetColor(hsva, '', undefined /* colorName */, undefined, ChangeSource.Other);\n    }\n\n    function getUpdatedColorPosition(dragElement: Element, event: Event): {\n      x: number,\n      y: number,\n    } {\n      const elementPosition = dragElement.getBoundingClientRect();\n      const verticalX = elementPosition.x + elementPosition.width / 2;\n      const horizontalY = elementPosition.y + elementPosition.width / 2;\n      const defaultUnit = elementPosition.width / 4;\n      const unit = getUnitToMove(defaultUnit, event);\n      const keyboardEvent = event as KeyboardEvent;\n      switch (keyboardEvent.key) {\n        case 'ArrowLeft':\n          return {x: elementPosition.left - unit, y: horizontalY};\n        case 'ArrowRight':\n          return {x: elementPosition.right + unit, y: horizontalY};\n        case 'ArrowDown':\n          return {x: verticalX, y: elementPosition.bottom + unit};\n        case 'ArrowUp':\n          return {x: verticalX, y: elementPosition.top - unit};\n        default:\n          return {\n            x: (event as MouseEvent).x,\n            y: (event as MouseEvent).y,\n          };\n      }\n    }\n\n    function getUnitToMove(unit: number, event: Event): number {\n      const keyboardEvent = event as KeyboardEvent;\n      if (keyboardEvent.altKey) {\n        unit = 1;\n      } else if (keyboardEvent.ctrlKey) {\n        unit = 10;\n      } else if (keyboardEvent.shiftKey) {\n        unit = 20;\n      }\n      return unit;\n    }\n\n    function appendSwitcherIcon(parentElement: Element): void {\n      const switcherIcon = new IconButton.Icon.Icon();\n      switcherIcon.data = {iconName: 'switcherIcon', color: 'var(--color-text-primary)', width: '16px', height: '16px'};\n      parentElement.appendChild(switcherIcon);\n    }\n  }\n\n  private dragStart(this: Spectrum, callback: (arg0: Event) => void, event: Event): boolean {\n    this.colorOffset = this.colorElement.totalOffset();\n    callback(event);\n    return true;\n  }\n\n  private contrastDetailsBackgroundColorPickedToggled(event: {\n    data: unknown,\n  }): void {\n    if (event.data) {\n      void this.toggleColorPicker(false);\n    }\n  }\n\n  private contrastPanelExpanded(): void {\n    if (!this.contrastOverlay || !this.contrastDetails) {\n      return;\n    }\n    this.contrastOverlay.setVisible(this.contrastDetails.expanded());\n    this.resizeForSelectedPalette(true);\n  }\n\n  private updatePalettePanel(): void {\n    this.palettePanel.removeChildren();\n    const title = this.palettePanel.createChild('div', 'palette-title');\n    title.textContent = i18nString(UIStrings.colorPalettes);\n    const toolbar = new UI.Toolbar.Toolbar('', this.palettePanel);\n    this.closeButton = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.returnToColorPicker), 'largeicon-delete');\n    this.closeButton.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, this.togglePalettePanel.bind(this, false));\n    this.closeButton.element.addEventListener('keydown', this.onCloseBtnKeydown.bind(this));\n    toolbar.appendToolbarItem(this.closeButton);\n    for (const palette of this.palettes.values()) {\n      this.palettePanel.appendChild(this.createPreviewPaletteElement(palette));\n    }\n  }\n\n  private togglePalettePanel(show: boolean): void {\n    if (this.palettePanelShowing === show) {\n      return;\n    }\n    if (show) {\n      this.updatePalettePanel();\n    }\n    this.palettePanelShowing = show;\n    this.contentElement.classList.toggle('palette-panel-showing', show);\n    this.focusInternal();\n  }\n\n  private onCloseBtnKeydown(event: Event): void {\n    if (isEscKey(event) || isEnterOrSpaceKey(event)) {\n      this.togglePalettePanel(false);\n      event.consume(true);\n    }\n  }\n\n  private onSliderKeydown(sliderNewPosition: (arg0: Event) => void, event: Event): void {\n    const keyboardEvent = event as KeyboardEvent;\n    switch (keyboardEvent.key) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'ArrowDown':\n      case 'ArrowUp':\n        sliderNewPosition(event);\n        event.consume(true);\n    }\n  }\n\n  /**\n   * (Suppress warning about preventScroll)\n   */\n  private focusInternal(): void {\n    if (!this.isShowing()) {\n      return;\n    }\n    if (this.palettePanelShowing && this.closeButton) {\n      this.closeButton.element.focus({preventScroll: true});\n    } else {\n      this.contentElement.focus();\n    }\n  }\n\n  private createPaletteColor(colorText: string, colorName?: string, animationDelay?: number): HTMLElement {\n    const element = document.createElement('div') as HTMLElement;\n    element.classList.add('spectrum-palette-color');\n    element.style.background =\n        Platform.StringUtilities.sprintf('linear-gradient(%s, %s), var(--image-file-checker)', colorText, colorText);\n    if (animationDelay) {\n      element.animate([{opacity: 0}, {opacity: 1}], {duration: 100, delay: animationDelay, fill: 'backwards'});\n    }\n    UI.Tooltip.Tooltip.install(element, colorName || colorText);\n    return element;\n  }\n\n  private showPalette(palette: Palette, animate: boolean, _event?: Event): void {\n    this.resizeForSelectedPalette();\n    this.paletteContainer.removeChildren();\n    for (let i = 0; i < palette.colors.length; i++) {\n      const animationDelay = animate ? i * 100 / palette.colors.length : 0;\n      const colorElement = this.createPaletteColor(palette.colors[i], palette.colorNames[i], animationDelay);\n      UI.ARIAUtils.markAsButton(colorElement);\n      UI.ARIAUtils.setAccessibleName(colorElement, i18nString(UIStrings.colorS, {PH1: palette.colors[i]}));\n      colorElement.tabIndex = -1;\n      colorElement.addEventListener(\n          'mousedown',\n          this.paletteColorSelected.bind(\n              this, palette.colors[i], palette.colorNames[i], Boolean(palette.matchUserFormat)));\n      colorElement.addEventListener(\n          'focus',\n          this.paletteColorSelected.bind(\n              this, palette.colors[i], palette.colorNames[i], Boolean(palette.matchUserFormat)));\n      colorElement.addEventListener('keydown', this.onPaletteColorKeydown.bind(this, i));\n      if (palette.mutable) {\n        colorElementToMutable.set(colorElement, true);\n        colorElementToColor.set(colorElement, palette.colors[i]);\n        colorElement.addEventListener('contextmenu', this.showPaletteColorContextMenu.bind(this, i));\n      } else if (palette === MaterialPalette) {\n        colorElement.classList.add('has-material-shades');\n        let shadow = colorElement.createChild('div', 'spectrum-palette-color spectrum-palette-color-shadow');\n        shadow.style.background = palette.colors[i];\n        shadow = colorElement.createChild('div', 'spectrum-palette-color spectrum-palette-color-shadow');\n        shadow.style.background = palette.colors[i];\n        const tooltipText = i18nString(UIStrings.longclickOrLongpressSpaceToShow, {PH1: palette.colors[i]});\n        UI.Tooltip.Tooltip.install(colorElement, tooltipText);\n        UI.ARIAUtils.setAccessibleName(colorElement, tooltipText);\n        new UI.UIUtils.LongClickController(\n            colorElement, this.showLightnessShades.bind(this, colorElement, palette.colors[i]));\n      }\n      this.paletteContainer.appendChild(colorElement);\n    }\n    if (this.paletteContainer.childNodes.length > 0) {\n      (this.paletteContainer.childNodes[0] as HTMLElement).tabIndex = 0;\n    }\n    this.paletteContainerMutable = palette.mutable;\n\n    if (palette.mutable) {\n      this.paletteContainer.appendChild(this.addColorToolbar.element);\n      this.paletteContainer.appendChild(this.deleteIconToolbar.element);\n    } else {\n      this.addColorToolbar.element.remove();\n      this.deleteIconToolbar.element.remove();\n    }\n\n    this.togglePalettePanel(false);\n    this.focusInternal();\n  }\n\n  private showLightnessShades(colorElement: HTMLElement, colorText: string, _event: Event): void {\n    function closeLightnessShades(this: Spectrum, element: Element): void {\n      this.shadesContainer.classList.add('hidden');\n      element.classList.remove('spectrum-shades-shown');\n      if (this.shadesCloseHandler) {\n        this.shadesContainer.ownerDocument.removeEventListener('mousedown', this.shadesCloseHandler, true);\n      }\n      delete this.shadesCloseHandler;\n    }\n\n    if (this.shadesCloseHandler) {\n      this.shadesCloseHandler();\n    }\n\n    this.shadesContainer.classList.remove('hidden');\n    this.shadesContainer.removeChildren();\n    this.shadesContainer.animate(\n        [{transform: 'scaleY(0)', opacity: '0'}, {transform: 'scaleY(1)', opacity: '1'}],\n        {duration: 200, easing: 'cubic-bezier(0.4, 0, 0.2, 1)'});\n    let shadesTop = this.paletteContainer.offsetTop + colorElement.offsetTop +\n        (colorElement.parentElement ? colorElement.parentElement.offsetTop : 0);\n    if (this.contrastDetails) {\n      shadesTop += this.contrastDetails.element().offsetHeight;\n    }\n    this.shadesContainer.style.top = shadesTop + 'px';\n    this.shadesContainer.style.left = colorElement.offsetLeft + 'px';\n    colorElement.classList.add('spectrum-shades-shown');\n\n    const shades = MaterialPaletteShades.get(colorText);\n    if (shades !== undefined) {\n      for (let i = shades.length - 1; i >= 0; i--) {\n        const shadeElement =\n            this.createPaletteColor(shades[i], undefined /* colorName */, i * 200 / shades.length + 100);\n        UI.ARIAUtils.markAsButton(shadeElement);\n        UI.ARIAUtils.setAccessibleName(shadeElement, i18nString(UIStrings.colorS, {PH1: shades[i]}));\n        shadeElement.tabIndex = -1;\n        shadeElement.addEventListener('mousedown', this.paletteColorSelected.bind(this, shades[i], shades[i], false));\n        shadeElement.addEventListener('focus', this.paletteColorSelected.bind(this, shades[i], shades[i], false));\n        shadeElement.addEventListener('keydown', this.onShadeColorKeydown.bind(this, colorElement));\n        this.shadesContainer.appendChild(shadeElement);\n      }\n    }\n\n    if (this.shadesContainer.childNodes.length > 0) {\n      (this.shadesContainer.childNodes[this.shadesContainer.childNodes.length - 1] as HTMLElement).focus();\n    }\n    this.shadesCloseHandler = closeLightnessShades.bind(this, colorElement);\n    this.shadesContainer.ownerDocument.addEventListener('mousedown', this.shadesCloseHandler, true);\n  }\n\n  private slotIndexForEvent(event: Event): number {\n    const mouseEvent = event as MouseEvent;\n    const localX = mouseEvent.pageX - this.paletteContainer.totalOffsetLeft();\n    const localY = mouseEvent.pageY - this.paletteContainer.totalOffsetTop();\n    const col = Math.min(localX / COLOR_CHIP_SIZE | 0, ITEMS_PER_PALETTE_ROW - 1);\n    const row = (localY / COLOR_CHIP_SIZE) | 0;\n    return Math.min(row * ITEMS_PER_PALETTE_ROW + col, this.customPaletteSetting.get().colors.length - 1);\n  }\n\n  private isDraggingToBin(event: Event): boolean {\n    const mouseEvent = event as MouseEvent;\n    return mouseEvent.pageX > this.deleteIconToolbar.element.totalOffsetLeft();\n  }\n\n  private paletteDragStart(event: Event): boolean {\n    const element = UI.UIUtils.deepElementFromEvent(event) as HTMLElement;\n    if (!element || !colorElementToMutable.get(element)) {\n      return false;\n    }\n\n    const index = this.slotIndexForEvent(event);\n    this.dragElement = element;\n    const mouseEvent = event as MouseEvent;\n    this.dragHotSpotX = mouseEvent.pageX - (index % ITEMS_PER_PALETTE_ROW) * COLOR_CHIP_SIZE;\n    this.dragHotSpotY = mouseEvent.pageY - (index / ITEMS_PER_PALETTE_ROW | 0) * COLOR_CHIP_SIZE;\n    return true;\n  }\n\n  private paletteDrag(event: Event): void {\n    const mouseEvent = event as MouseEvent;\n    if (mouseEvent.pageX < this.paletteContainer.totalOffsetLeft() ||\n        mouseEvent.pageY < this.paletteContainer.totalOffsetTop()) {\n      return;\n    }\n    if (!this.dragElement || this.dragHotSpotX === undefined || this.dragHotSpotY === undefined) {\n      return;\n    }\n    const newIndex = this.slotIndexForEvent(event);\n    const offsetX = mouseEvent.pageX - (newIndex % ITEMS_PER_PALETTE_ROW) * COLOR_CHIP_SIZE;\n    const offsetY = mouseEvent.pageY - (newIndex / ITEMS_PER_PALETTE_ROW | 0) * COLOR_CHIP_SIZE;\n\n    const isDeleting = this.isDraggingToBin(event);\n    this.deleteIconToolbar.element.classList.add('dragging');\n    this.deleteIconToolbar.element.classList.toggle('delete-color-toolbar-active', isDeleting);\n    const dragElementTransform =\n        'translateX(' + (offsetX - this.dragHotSpotX) + 'px) translateY(' + (offsetY - this.dragHotSpotY) + 'px)';\n    this.dragElement.style.transform = isDeleting ? dragElementTransform + ' scale(0.8)' : dragElementTransform;\n    const children = Array.prototype.slice.call(this.paletteContainer.children);\n    const index = children.indexOf(this.dragElement);\n    const swatchOffsets = new Map<Element, {left: number, top: number}>();\n    for (const swatch of children) {\n      swatchOffsets.set(swatch, swatch.totalOffset());\n    }\n\n    if (index !== newIndex) {\n      this.paletteContainer.insertBefore(this.dragElement, children[newIndex > index ? newIndex + 1 : newIndex]);\n    }\n\n    for (const swatch of children) {\n      if (swatch === this.dragElement) {\n        continue;\n      }\n      const before = swatchOffsets.get(swatch);\n      const after = swatch.totalOffset();\n      if (before && (before.left !== after.left || before.top !== after.top)) {\n        swatch.animate(\n            [\n              {\n                transform:\n                    'translateX(' + (before.left - after.left) + 'px) translateY(' + (before.top - after.top) + 'px)',\n              },\n              {transform: 'none'},\n            ],\n            {duration: 100, easing: 'cubic-bezier(0, 0, 0.2, 1)'});\n      }\n    }\n  }\n\n  private paletteDragEnd(e: Event): void {\n    if (!this.dragElement) {\n      return;\n    }\n    if (this.isDraggingToBin(e)) {\n      this.dragElement.remove();\n    }\n    this.dragElement.style.removeProperty('transform');\n    const children = this.paletteContainer.children;\n    const colors = [];\n    for (let i = 0; i < children.length; ++i) {\n      const color = colorElementToColor.get(children[i] as HTMLElement);\n      if (color) {\n        colors.push(color);\n      }\n    }\n    const palette = this.customPaletteSetting.get() as Palette;\n    palette.colors = colors;\n    this.customPaletteSetting.set(palette);\n    this.showPalette(palette, false);\n\n    this.deleteIconToolbar.element.classList.remove('dragging');\n    this.deleteIconToolbar.element.classList.remove('delete-color-toolbar-active');\n  }\n\n  private loadPalettes(): void {\n    this.palettes.set(MaterialPalette.title, MaterialPalette);\n    const defaultCustomPalette:\n        Palette = {title: 'Custom', colors: [], colorNames: [], mutable: true, matchUserFormat: undefined};\n    this.customPaletteSetting =\n        Common.Settings.Settings.instance().createSetting('customColorPalette', defaultCustomPalette);\n    const customPalette = this.customPaletteSetting.get() as Palette;\n    // Fallback case for custom palettes created pre-m67\n    customPalette.colorNames = customPalette.colorNames || [];\n    this.palettes.set(customPalette.title, customPalette);\n\n    this.selectedColorPalette =\n        Common.Settings.Settings.instance().createSetting('selectedColorPalette', GeneratedPaletteTitle);\n    const palette = this.palettes.get(this.selectedColorPalette.get() as string);\n    if (palette) {\n      this.showPalette(palette, true);\n    }\n  }\n\n  addPalette(palette: Palette): void {\n    this.palettes.set(palette.title, palette);\n    if (this.selectedColorPalette.get() === palette.title) {\n      this.showPalette(palette, true);\n    }\n  }\n\n  private createPreviewPaletteElement(palette: Palette): Element {\n    const colorsPerPreviewRow = 5;\n    const previewElement = document.createElement('div');\n    previewElement.classList.add('palette-preview');\n    UI.ARIAUtils.markAsButton(previewElement);\n    previewElement.tabIndex = 0;\n    const titleElement = previewElement.createChild('div', 'palette-preview-title');\n    titleElement.textContent = palette.title;\n    let i;\n    for (i = 0; i < colorsPerPreviewRow && i < palette.colors.length; i++) {\n      previewElement.appendChild(this.createPaletteColor(palette.colors[i], palette.colorNames[i]));\n    }\n    for (; i < colorsPerPreviewRow; i++) {\n      previewElement.createChild('div', 'spectrum-palette-color empty-color');\n    }\n    self.onInvokeElement(previewElement, event => {\n      this.paletteSelected(palette);\n      event.consume(true);\n    });\n    return previewElement;\n  }\n\n  private paletteSelected(palette: Palette): void {\n    this.selectedColorPalette.set(palette.title);\n    this.showPalette(palette, true);\n  }\n\n  private resizeForSelectedPalette(force?: boolean): void {\n    const palette = this.palettes.get(this.selectedColorPalette.get() as string);\n    if (!palette) {\n      return;\n    }\n    let numColors = palette.colors.length;\n    if (palette === this.customPaletteSetting.get()) {\n      numColors++;\n    }\n    const rowsNeeded = Math.max(1, Math.ceil(numColors / ITEMS_PER_PALETTE_ROW));\n    if (this.numPaletteRowsShown === rowsNeeded && !force) {\n      return;\n    }\n    this.numPaletteRowsShown = rowsNeeded;\n    const paletteColorHeight = 12;\n    const paletteMargin = 12;\n    let paletteTop = 236;\n    if (this.contrastDetails) {\n      if (this.contrastDetails.expanded()) {\n        paletteTop += 78;\n      } else {\n        paletteTop += 36;\n      }\n    }\n    this.element.style.height = (paletteTop + paletteMargin + (paletteColorHeight + paletteMargin) * rowsNeeded) + 'px';\n    this.dispatchEventToListeners(Events.SizeChanged);\n  }\n\n  private paletteColorSelected(colorText: string, colorName: string|undefined, matchUserFormat: boolean): void {\n    const color = Common.Color.Color.parse(colorText);\n    if (!color) {\n      return;\n    }\n    this.innerSetColor(\n        color.hsva(), colorText, colorName, matchUserFormat ? this.colorFormat : color.format(), ChangeSource.Other);\n  }\n\n  private onPaletteColorKeydown(colorIndex: number, event: Event): void {\n    const keyboardEvent = event as KeyboardEvent;\n    let nextColorIndex;\n    switch (keyboardEvent.key) {\n      case 'ArrowLeft':\n        nextColorIndex = colorIndex - 1;\n        break;\n      case 'ArrowRight':\n        nextColorIndex = colorIndex + 1;\n        break;\n      case 'ArrowUp':\n        nextColorIndex = colorIndex - ITEMS_PER_PALETTE_ROW;\n        break;\n      case 'ArrowDown':\n        nextColorIndex = colorIndex + ITEMS_PER_PALETTE_ROW;\n        break;\n    }\n    if (nextColorIndex !== undefined && nextColorIndex > -1 &&\n        nextColorIndex < this.paletteContainer.childNodes.length) {\n      (this.paletteContainer.childNodes[nextColorIndex] as HTMLElement).focus();\n    }\n  }\n\n  private onShadeColorKeydown(colorElement: HTMLElement, event: Event): void {\n    const keyboardEvent = event as KeyboardEvent;\n    const target = keyboardEvent.target as HTMLElement;\n    if (isEscKey(event) || keyboardEvent.key === 'Tab') {\n      colorElement.focus();\n      if (this.shadesCloseHandler) {\n        this.shadesCloseHandler();\n      }\n      event.consume(true);\n    } else if (keyboardEvent.key === 'ArrowUp' && target.previousElementSibling) {\n      (target.previousElementSibling as HTMLElement).focus();\n      event.consume(true);\n    } else if (keyboardEvent.key === 'ArrowDown' && target.nextElementSibling) {\n      (target.nextElementSibling as HTMLElement).focus();\n      event.consume(true);\n    }\n  }\n\n  private onAddColorMousedown(): void {\n    this.addColorToCustomPalette();\n  }\n\n  private onAddColorKeydown(event: Event): void {\n    if (isEnterOrSpaceKey(event)) {\n      this.addColorToCustomPalette();\n      event.consume(true);\n    }\n  }\n\n  private addColorToCustomPalette(): void {\n    const palette = this.customPaletteSetting.get() as Palette;\n    palette.colors.push(this.colorString());\n    this.customPaletteSetting.set(palette);\n    this.showPalette(palette, false);\n    const colorElements = this.paletteContainer.querySelectorAll('.spectrum-palette-color');\n    (colorElements[colorElements.length - 1] as HTMLElement).focus();\n  }\n\n  private showPaletteColorContextMenu(colorIndex: number, event: Event): void {\n    if (!this.paletteContainerMutable) {\n      return;\n    }\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    if (colorIndex !== -1) {\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.removeColor), this.deletePaletteColors.bind(this, colorIndex, false));\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.removeAllToTheRight), this.deletePaletteColors.bind(this, colorIndex, true));\n    }\n    contextMenu.defaultSection().appendItem(\n        i18nString(UIStrings.clearPalette), this.deletePaletteColors.bind(this, -1, true));\n    void contextMenu.show();\n  }\n\n  private deletePaletteColors(colorIndex: number, toRight: boolean): void {\n    const palette = this.customPaletteSetting.get() as Palette;\n    if (toRight) {\n      palette.colors.splice(colorIndex + 1, palette.colors.length - colorIndex - 1);\n    } else {\n      palette.colors.splice(colorIndex, 1);\n    }\n    this.customPaletteSetting.set(palette);\n    this.showPalette(palette, false);\n  }\n\n  setColor(color: Common.Color.Color, colorFormat: string): void {\n    this.originalFormat = colorFormat;\n    this.innerSetColor(color.hsva(), '', undefined /* colorName */, colorFormat, ChangeSource.Model);\n    const colorValues = this.color().canonicalHSLA();\n    UI.ARIAUtils.setValueNow(this.hueElement, colorValues[0]);\n    UI.ARIAUtils.setValueText(this.alphaElement, colorValues[3]);\n  }\n\n  colorSelected(color: Common.Color.Color): void {\n    this.innerSetColor(color.hsva(), '', undefined /* colorName */, undefined /* colorFormat */, ChangeSource.Other);\n  }\n\n  private innerSetColor(\n      hsva: number[]|undefined, colorString: string|undefined, colorName: string|undefined,\n      colorFormat: string|undefined, changeSource: string): void {\n    if (hsva !== undefined) {\n      this.hsv = hsva;\n    }\n    this.colorNameInternal = colorName;\n    if (colorString !== undefined) {\n      this.colorStringInternal = colorString;\n    }\n    if (colorFormat !== undefined) {\n      const cf = Common.Color.Format;\n      console.assert(colorFormat !== cf.Original, 'Spectrum\\'s color format cannot be Original');\n      if (colorFormat === cf.RGBA) {\n        colorFormat = cf.RGB;\n      } else if (colorFormat === cf.HSLA) {\n        colorFormat = cf.HSL;\n      } else if (colorFormat === cf.HWBA) {\n        colorFormat = cf.HWB;\n      } else if (colorFormat === cf.HEXA) {\n        colorFormat = cf.HEX;\n      } else if (colorFormat === cf.ShortHEXA) {\n        colorFormat = cf.ShortHEX;\n      }\n      this.colorFormat = colorFormat;\n    }\n\n    if (this.contrastInfo) {\n      this.contrastInfo.setColor(Common.Color.Color.fromHSVA(this.hsv), this.colorFormat);\n    }\n\n    this.updateHelperLocations();\n    this.updateUI();\n\n    if (changeSource !== ChangeSource.Input) {\n      this.updateInput();\n    }\n    if (changeSource !== ChangeSource.Model) {\n      this.dispatchEventToListeners(Events.ColorChanged, this.colorString());\n    }\n  }\n\n  private color(): Common.Color.Color {\n    return Common.Color.Color.fromHSVA(this.hsv);\n  }\n\n  colorName(): string|undefined {\n    return this.colorNameInternal;\n  }\n\n  colorString(): string {\n    if (this.colorStringInternal) {\n      return this.colorStringInternal;\n    }\n    const cf = Common.Color.Format;\n    const color = this.color();\n\n    let colorString = color.asString(this.colorFormat);\n    if (colorString) {\n      return colorString;\n    }\n\n    if (this.colorFormat === cf.Nickname) {\n      colorString = color.asString(color.hasAlpha() ? cf.HEXA : cf.HEX);\n    } else if (this.colorFormat === cf.ShortHEX) {\n      colorString = color.asString(color.detectHEXFormat());\n    } else if (this.colorFormat === cf.HEX) {\n      colorString = color.asString(cf.HEXA);\n    } else if (this.colorFormat === cf.HSL) {\n      colorString = color.asString(cf.HSLA);\n    } else if (this.colorFormat === cf.HWB) {\n      colorString = color.asString(cf.HWBA);\n    } else {\n      colorString = color.asString(cf.RGBA);\n    }\n\n    console.assert(Boolean(colorString));\n    return colorString || '';\n  }\n\n  private updateHelperLocations(): void {\n    const h = this.hsv[0];\n    const s = this.hsv[1];\n    const v = this.hsv[2];\n    const alpha = this.hsv[3];\n\n    // Where to show the little circle that displays your current selected color.\n    this.dragX = s * this.dragWidth;\n    this.dragY = this.dragHeight - (v * this.dragHeight);\n\n    const dragX = Math.max(\n        -this.colorDragElementHeight,\n        Math.min(this.dragWidth - this.colorDragElementHeight, this.dragX - this.colorDragElementHeight));\n    const dragY = Math.max(\n        -this.colorDragElementHeight,\n        Math.min(this.dragHeight - this.colorDragElementHeight, this.dragY - this.colorDragElementHeight));\n\n    this.colorDragElement.positionAt(dragX, dragY);\n\n    // Where to show the bar that displays your current selected hue.\n    const hueSlideX = (1 - h) * this.hueAlphaWidth - this.slideHelperWidth;\n    this.hueSlider.style.left = hueSlideX + 'px';\n    const alphaSlideX = alpha * this.hueAlphaWidth - this.slideHelperWidth;\n    this.alphaSlider.style.left = alphaSlideX + 'px';\n  }\n\n  private updateInput(): void {\n    const cf = Common.Color.Format;\n    if (this.colorFormat === cf.HEX || this.colorFormat === cf.ShortHEX || this.colorFormat === cf.Nickname) {\n      this.hexContainer.hidden = false;\n      this.displayContainer.hidden = true;\n      if (this.colorFormat === cf.ShortHEX) {\n        this.hexValue.value = String(this.color().asString(this.color().detectHEXFormat()));\n      } else {  // Don't use ShortHEX if original was not in that format.\n        this.hexValue.value = String(this.color().asString(this.color().hasAlpha() ? cf.HEXA : cf.HEX));\n      }\n    } else {\n      // RGBA, HSLA, HWBA display.\n      this.hexContainer.hidden = true;\n      this.displayContainer.hidden = false;\n      let colorValues;\n      if (this.colorFormat === cf.RGB) {\n        this.textLabels.textContent = 'RGBA';\n        colorValues = this.color().canonicalRGBA();\n      } else if (this.colorFormat === cf.HSL) {\n        this.textLabels.textContent = 'HSLA';\n        colorValues = this.color().canonicalHSLA();\n      } else {\n        this.textLabels.textContent = 'HWBA';\n        colorValues = this.color().canonicalHWBA();\n      }\n\n      for (let i = 0; i < 3; ++i) {\n        UI.ARIAUtils.setAccessibleName(\n            this.textValues[i],\n            /** R in RGBA */ i18nString(UIStrings.sInS, {\n              PH1: this.textLabels.textContent.charAt(i),\n              PH2: this.textLabels.textContent,\n            }));\n        this.textValues[i].value = String(colorValues[i]);\n        if (this.colorFormat !== cf.RGB && (i === 1 || i === 2)) {\n          this.textValues[i].value += '%';\n        }\n      }\n      UI.ARIAUtils.setAccessibleName(\n          this.textValues[3],\n          /** A in RGBA */ i18nString(UIStrings.sInS, {\n            PH1: this.textLabels.textContent.charAt(3),\n            PH2: this.textLabels.textContent,\n          }));\n      this.textValues[3].value = String(Math.round(colorValues[3] * 100) / 100);\n    }\n  }\n\n  private updateUI(): void {\n    const h = Common.Color.Color.fromHSVA([this.hsv[0], 1, 1, 1]);\n    this.colorElement.style.backgroundColor = h.asString(Common.Color.Format.RGB) as string;\n    if (this.contrastOverlay) {\n      this.contrastOverlay.setDimensions(this.dragWidth, this.dragHeight);\n    }\n\n    this.swatch.setColor(this.color(), this.colorString());\n    this.colorDragElement.style.backgroundColor = this.color().asString(Common.Color.Format.RGBA) as string;\n    const noAlpha = Common.Color.Color.fromHSVA(this.hsv.slice(0, 3).concat(1));\n    this.alphaElementBackground.style.backgroundImage = Platform.StringUtilities.sprintf(\n        'linear-gradient(to right, rgba(0,0,0,0), %s)', noAlpha.asString(Common.Color.Format.RGB));\n  }\n\n  private formatViewSwitch(): void {\n    const cf = Common.Color.Format;\n    let format: string = cf.RGB;\n    if (this.colorFormat === cf.RGB) {\n      format = cf.HSL;\n    } else if (this.colorFormat === cf.HSL) {\n      format = cf.HWB;\n    } else if (this.colorFormat === cf.HWB) {\n      format = (this.originalFormat === cf.ShortHEX || this.originalFormat === cf.ShortHEXA) ? cf.ShortHEX : cf.HEX;\n    }\n    this.innerSetColor(undefined, '', undefined /* colorName */, format, ChangeSource.Other);\n  }\n\n  /**\n   * If the pasted input is parsable as a color, applies it converting to the current user format\n   */\n  private pasted(event: ClipboardEvent): void {\n    if (!event.clipboardData) {\n      return;\n    }\n    const text = event.clipboardData.getData('text');\n    const color = Common.Color.Color.parse(text);\n    if (!color) {\n      return;\n    }\n    this.innerSetColor(color.hsva(), text, undefined /* colorName */, undefined /* colorFormat */, ChangeSource.Other);\n    event.preventDefault();\n  }\n\n  private inputChanged(event: Event): void {\n    function elementValue(element: HTMLInputElement): string {\n      return element.value;\n    }\n\n    const inputElement = event.currentTarget as HTMLInputElement;\n    const newValue = UI.UIUtils.createReplacementString(inputElement.value, event);\n    if (newValue) {\n      inputElement.value = newValue;\n      inputElement.selectionStart = 0;\n      inputElement.selectionEnd = newValue.length;\n      event.consume(true);\n    }\n\n    const cf = Common.Color.Format;\n    let colorString;\n    if (this.colorFormat === cf.Nickname || this.colorFormat === cf.HEX || this.colorFormat === cf.ShortHEX) {\n      colorString = this.hexValue.value;\n    } else {\n      const values = this.textValues.slice(0, -1).map(elementValue).join(' ');\n      const alpha = this.textValues.slice(-1).map(elementValue).join(' ');\n      colorString = Platform.StringUtilities.sprintf('%s(%s)', this.colorFormat, [values, alpha].join(' / '));\n    }\n\n    const color = Common.Color.Color.parse(colorString);\n    if (!color) {\n      return;\n    }\n\n    let colorFormat: string|undefined = undefined;\n    if (this.colorFormat === cf.HEX || this.colorFormat === cf.ShortHEX) {\n      colorFormat = color.detectHEXFormat();\n    }\n    this.innerSetColor(color.hsva(), colorString, undefined /* colorName */, colorFormat, ChangeSource.Input);\n  }\n\n  wasShown(): void {\n    this.registerCSSFiles([spectrumStyles]);\n    this.hueAlphaWidth = this.hueElement.offsetWidth;\n    this.slideHelperWidth = this.hueSlider.offsetWidth / 2;\n    this.dragWidth = this.colorElement.offsetWidth;\n    this.dragHeight = this.colorElement.offsetHeight;\n    this.colorDragElementHeight = this.colorDragElement.offsetHeight / 2;\n    this.innerSetColor(undefined, undefined, undefined /* colorName */, undefined, ChangeSource.Model);\n    this.eyeDropperExperimentEnabled =\n        Root.Runtime.experiments.isEnabled(Root.Runtime.ExperimentName.EYEDROPPER_COLOR_PICKER);\n    // When flag is turned on, eye dropper is not turned on by default.\n    // This is because the global change of the cursor into a dropper will disturb the user.\n    if (!this.eyeDropperExperimentEnabled) {\n      void this.toggleColorPicker(true);\n    } else {\n      this.colorPickerButton.setToggled(false);\n    }\n\n    if (this.contrastDetails && this.contrastDetailsBackgroundColorPickedToggledBound) {\n      this.contrastDetails.addEventListener(\n          ContrastDetailsEvents.BackgroundColorPickerWillBeToggled,\n          this.contrastDetailsBackgroundColorPickedToggledBound);\n    }\n  }\n\n  willHide(): void {\n    void this.toggleColorPicker(false);\n    if (this.contrastDetails && this.contrastDetailsBackgroundColorPickedToggledBound) {\n      this.contrastDetails.removeEventListener(\n          ContrastDetailsEvents.BackgroundColorPickerWillBeToggled,\n          this.contrastDetailsBackgroundColorPickedToggledBound);\n    }\n  }\n\n  private async toggleColorPicker(enabled?: boolean): Promise<void> {\n    const eyeDropperExperimentEnabled = this.eyeDropperExperimentEnabled;\n\n    if (enabled === undefined) {\n      enabled = !this.colorPickerButton.toggled();\n    }\n    this.colorPickerButton.setToggled(enabled);\n\n    // This is to make sure that only one picker is open at a time\n    // Also have a look at this.contrastDetailsBackgroundColorPickedToggled\n    if (this.contrastDetails && enabled && this.contrastDetails.backgroundColorPickerEnabled()) {\n      this.contrastDetails.toggleBackgroundColorPicker(false);\n    }\n\n    // With the old color picker, colors can only be picked up within the page.\n    if (!eyeDropperExperimentEnabled) {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.setEyeDropperActive(enabled);\n      if (enabled) {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n            Host.InspectorFrontendHostAPI.Events.EyeDropperPickedColor, this.colorPickedBound);\n      } else {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.removeEventListener(\n            Host.InspectorFrontendHostAPI.Events.EyeDropperPickedColor, this.colorPickedBound);\n      }\n    } else if (eyeDropperExperimentEnabled && enabled) {\n      // Use EyeDropper API, can pick up colors outside the browser window,\n      // Note: The current EyeDropper API is not designed to pick up colors continuously.\n      // Wait for TypeScript to support the definition of EyeDropper API:\n      // https://github.com/microsoft/TypeScript/issues/48638\n      /* eslint-disable  @typescript-eslint/no-explicit-any */\n      const eyeDropper = new (<any>window).EyeDropper();\n\n      try {\n        const hexColor = await eyeDropper.open();\n        const color = Common.Color.Color.parse(hexColor.sRGBHex);\n        this.innerSetColor(color?.hsva(), '', undefined /* colorName */, undefined, ChangeSource.Other);\n      } catch (error) {\n        console.error(error);\n      }\n\n      this.colorPickerButton.setToggled(false);\n    }\n  }\n\n  private colorPicked({\n    data: rgbColor,\n  }: Common.EventTarget.EventTargetEvent<Host.InspectorFrontendHostAPI.EyeDropperPickedColorEvent>): void {\n    const rgba = [rgbColor.r, rgbColor.g, rgbColor.b, (rgbColor.a / 2.55 | 0) / 100];\n    const color = Common.Color.Color.fromRGBA(rgba);\n    this.innerSetColor(color.hsva(), '', undefined /* colorName */, undefined, ChangeSource.Other);\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.bringToFront();\n  }\n}\n\nexport const ChangeSource = {\n  Input: 'Input',\n  Model: 'Model',\n  Other: 'Other',\n};\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  ColorChanged = 'ColorChanged',\n  SizeChanged = 'SizeChanged',\n}\n\nexport type EventTypes = {\n  [Events.ColorChanged]: string,\n  [Events.SizeChanged]: void,\n};\n\nconst COLOR_CHIP_SIZE = 24;\nconst ITEMS_PER_PALETTE_ROW = 8;\nconst GeneratedPaletteTitle = 'Page colors';\n\nexport class PaletteGenerator {\n  private readonly callback: (arg0: Palette) => void;\n  private readonly frequencyMap: Map<string, number>;\n  constructor(callback: (arg0: Palette) => void) {\n    this.callback = callback;\n    this.frequencyMap = new Map();\n    const stylesheetPromises = [];\n    for (const cssModel of SDK.TargetManager.TargetManager.instance().models(SDK.CSSModel.CSSModel)) {\n      for (const stylesheet of cssModel.allStyleSheets()) {\n        stylesheetPromises.push(this.processStylesheet(stylesheet));\n      }\n    }\n    void Promise.all(stylesheetPromises)\n        .catch(error => {\n          console.error(error);\n        })\n        .then(this.finish.bind(this));\n  }\n\n  private frequencyComparator(a: string, b: string): number {\n    return (this.frequencyMap.get(b) as number) - (this.frequencyMap.get(a) as number);\n  }\n\n  private finish(): void {\n    function hueComparator(a: string, b: string): number {\n      const hsva = (paletteColors.get(a) as Common.Color.Color).hsva();\n      const hsvb = (paletteColors.get(b) as Common.Color.Color).hsva();\n\n      // First trim the shades of gray\n      if (hsvb[1] < 0.12 && hsva[1] < 0.12) {\n        return hsvb[2] * hsvb[3] - hsva[2] * hsva[3];\n      }\n      if (hsvb[1] < 0.12) {\n        return -1;\n      }\n      if (hsva[1] < 0.12) {\n        return 1;\n      }\n\n      // Equal hue -> sort by sat\n      if (hsvb[0] === hsva[0]) {\n        return hsvb[1] * hsvb[3] - hsva[1] * hsva[3];\n      }\n\n      return (hsvb[0] + 0.94) % 1 - (hsva[0] + 0.94) % 1;\n    }\n\n    let colors: string[]|string[] = [...this.frequencyMap.keys()];\n    colors = colors.sort(this.frequencyComparator.bind(this));\n    const paletteColors = new Map<string, Common.Color.Color>();\n    const colorsPerRow = 24;\n    while (paletteColors.size < colorsPerRow && colors.length) {\n      const colorText = colors.shift() as string;\n      const color = Common.Color.Color.parse(colorText);\n      if (!color || color.nickname() === 'white' || color.nickname() === 'black') {\n        continue;\n      }\n      paletteColors.set(colorText, color);\n    }\n\n    this.callback({\n      title: GeneratedPaletteTitle,\n      colors: [...paletteColors.keys()].sort(hueComparator),\n      colorNames: [],\n      mutable: false,\n      matchUserFormat: undefined,\n    });\n  }\n\n  private async processStylesheet(stylesheet: SDK.CSSStyleSheetHeader.CSSStyleSheetHeader): Promise<void> {\n    let text: string = (await stylesheet.requestContent()).content || '';\n    text = text.toLowerCase();\n    const regexResult = text.match(/((?:rgb|hsl|hwb)a?\\([^)]+\\)|#[0-9a-f]{6}|#[0-9a-f]{3})/g) || [];\n    for (const c of regexResult) {\n      let frequency = this.frequencyMap.get(c) || 0;\n      this.frequencyMap.set(c, ++frequency);\n    }\n  }\n}\n\nconst MaterialPaletteShades = new Map([\n  [\n    '#F44336',\n    ['#FFEBEE', '#FFCDD2', '#EF9A9A', '#E57373', '#EF5350', '#F44336', '#E53935', '#D32F2F', '#C62828', '#B71C1C'],\n  ],\n  [\n    '#E91E63',\n    ['#FCE4EC', '#F8BBD0', '#F48FB1', '#F06292', '#EC407A', '#E91E63', '#D81B60', '#C2185B', '#AD1457', '#880E4F'],\n  ],\n  [\n    '#9C27B0',\n    ['#F3E5F5', '#E1BEE7', '#CE93D8', '#BA68C8', '#AB47BC', '#9C27B0', '#8E24AA', '#7B1FA2', '#6A1B9A', '#4A148C'],\n  ],\n  [\n    '#673AB7',\n    ['#EDE7F6', '#D1C4E9', '#B39DDB', '#9575CD', '#7E57C2', '#673AB7', '#5E35B1', '#512DA8', '#4527A0', '#311B92'],\n  ],\n  [\n    '#3F51B5',\n    ['#E8EAF6', '#C5CAE9', '#9FA8DA', '#7986CB', '#5C6BC0', '#3F51B5', '#3949AB', '#303F9F', '#283593', '#1A237E'],\n  ],\n  [\n    '#2196F3',\n    ['#E3F2FD', '#BBDEFB', '#90CAF9', '#64B5F6', '#42A5F5', '#2196F3', '#1E88E5', '#1976D2', '#1565C0', '#0D47A1'],\n  ],\n  [\n    '#03A9F4',\n    ['#E1F5FE', '#B3E5FC', '#81D4FA', '#4FC3F7', '#29B6F6', '#03A9F4', '#039BE5', '#0288D1', '#0277BD', '#01579B'],\n  ],\n  [\n    '#00BCD4',\n    ['#E0F7FA', '#B2EBF2', '#80DEEA', '#4DD0E1', '#26C6DA', '#00BCD4', '#00ACC1', '#0097A7', '#00838F', '#006064'],\n  ],\n  [\n    '#009688',\n    ['#E0F2F1', '#B2DFDB', '#80CBC4', '#4DB6AC', '#26A69A', '#009688', '#00897B', '#00796B', '#00695C', '#004D40'],\n  ],\n  [\n    '#4CAF50',\n    ['#E8F5E9', '#C8E6C9', '#A5D6A7', '#81C784', '#66BB6A', '#4CAF50', '#43A047', '#388E3C', '#2E7D32', '#1B5E20'],\n  ],\n  [\n    '#8BC34A',\n    ['#F1F8E9', '#DCEDC8', '#C5E1A5', '#AED581', '#9CCC65', '#8BC34A', '#7CB342', '#689F38', '#558B2F', '#33691E'],\n  ],\n  [\n    '#CDDC39',\n    ['#F9FBE7', '#F0F4C3', '#E6EE9C', '#DCE775', '#D4E157', '#CDDC39', '#C0CA33', '#AFB42B', '#9E9D24', '#827717'],\n  ],\n  [\n    '#FFEB3B',\n    ['#FFFDE7', '#FFF9C4', '#FFF59D', '#FFF176', '#FFEE58', '#FFEB3B', '#FDD835', '#FBC02D', '#F9A825', '#F57F17'],\n  ],\n  [\n    '#FFC107',\n    ['#FFF8E1', '#FFECB3', '#FFE082', '#FFD54F', '#FFCA28', '#FFC107', '#FFB300', '#FFA000', '#FF8F00', '#FF6F00'],\n  ],\n  [\n    '#FF9800',\n    ['#FFF3E0', '#FFE0B2', '#FFCC80', '#FFB74D', '#FFA726', '#FF9800', '#FB8C00', '#F57C00', '#EF6C00', '#E65100'],\n  ],\n  [\n    '#FF5722',\n    ['#FBE9E7', '#FFCCBC', '#FFAB91', '#FF8A65', '#FF7043', '#FF5722', '#F4511E', '#E64A19', '#D84315', '#BF360C'],\n  ],\n  [\n    '#795548',\n    ['#EFEBE9', '#D7CCC8', '#BCAAA4', '#A1887F', '#8D6E63', '#795548', '#6D4C41', '#5D4037', '#4E342E', '#3E2723'],\n  ],\n  [\n    '#9E9E9E',\n    ['#FAFAFA', '#F5F5F5', '#EEEEEE', '#E0E0E0', '#BDBDBD', '#9E9E9E', '#757575', '#616161', '#424242', '#212121'],\n  ],\n  [\n    '#607D8B',\n    ['#ECEFF1', '#CFD8DC', '#B0BEC5', '#90A4AE', '#78909C', '#607D8B', '#546E7A', '#455A64', '#37474F', '#263238'],\n  ],\n]);\n\nexport const MaterialPalette = {\n  title: 'Material',\n  mutable: false,\n  matchUserFormat: true,\n  colors: [...MaterialPaletteShades.keys()],\n  colorNames: [],\n};\n\nexport class Swatch {\n  private colorString!: string|null;\n  private swatchInnerElement: HTMLElement;\n  private swatchOverlayElement: HTMLElement;\n  private readonly swatchCopyIcon: UI.Icon.Icon;\n  constructor(parentElement: HTMLElement) {\n    const swatchElement = parentElement.createChild('span', 'swatch');\n    this.swatchInnerElement = swatchElement.createChild('span', 'swatch-inner');\n    this.swatchOverlayElement = swatchElement.createChild('span', 'swatch-overlay') as HTMLElement;\n    UI.ARIAUtils.markAsButton(this.swatchOverlayElement);\n    UI.ARIAUtils.setPressed(this.swatchOverlayElement, false);\n    this.swatchOverlayElement.tabIndex = 0;\n    self.onInvokeElement(this.swatchOverlayElement, this.onCopyText.bind(this));\n    this.swatchOverlayElement.addEventListener('mouseout', this.onCopyIconMouseout.bind(this));\n    this.swatchOverlayElement.addEventListener('blur', this.onCopyIconMouseout.bind(this));\n    this.swatchCopyIcon = UI.Icon.Icon.create('largeicon-copy', 'copy-color-icon');\n    UI.Tooltip.Tooltip.install(this.swatchCopyIcon, i18nString(UIStrings.copyColorToClipboard));\n    this.swatchOverlayElement.appendChild(this.swatchCopyIcon);\n    UI.ARIAUtils.setAccessibleName(this.swatchOverlayElement, this.swatchCopyIcon.title);\n  }\n\n  setColor(color: Common.Color.Color, colorString?: string): void {\n    this.swatchInnerElement.style.backgroundColor = color.asString(Common.Color.Format.RGBA) as string;\n    // Show border if the swatch is white.\n    this.swatchInnerElement.classList.toggle('swatch-inner-white', color.hsla()[2] > 0.9);\n    this.colorString = colorString || null;\n    if (colorString) {\n      this.swatchOverlayElement.hidden = false;\n    } else {\n      this.swatchOverlayElement.hidden = true;\n    }\n  }\n\n  private onCopyText(event: Event): void {\n    this.swatchCopyIcon.setIconType('largeicon-checkmark');\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(this.colorString);\n    UI.ARIAUtils.setPressed(this.swatchOverlayElement, true);\n    event.consume();\n  }\n\n  private onCopyIconMouseout(): void {\n    this.swatchCopyIcon.setIconType('largeicon-copy');\n    UI.ARIAUtils.setPressed(this.swatchOverlayElement, false);\n  }\n}\nexport interface Palette {\n  title: string;\n  colors: string[];\n  colorNames: string[];\n  mutable: boolean;\n  matchUserFormat?: boolean;\n}\n"]}