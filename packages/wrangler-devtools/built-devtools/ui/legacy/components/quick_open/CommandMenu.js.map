{"version":3,"file":"CommandMenu.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/quick_open/CommandMenu.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as Host from '../../../../core/host/host.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as Diff from '../../../../third_party/diff/diff.js';\nimport * as UI from '../../legacy.js';\n\nimport {FilteredListWidget, Provider, registerProvider} from './FilteredListWidget.js';\nimport {QuickOpenImpl} from './QuickOpen.js';\n\nconst UIStrings = {\n  /**\n  * @description Message to display if a setting change requires a reload of DevTools\n  */\n  oneOrMoreSettingsHaveChanged: 'One or more settings have changed which requires a reload to take effect.',\n  /**\n  * @description Text in Command Menu of the Command Menu\n  */\n  noCommandsFound: 'No commands found',\n  /**\n  * @description Text for command prefix of run a command\n  */\n  run: 'Run',\n  /**\n  * @description Text for command suggestion of run a command\n  */\n  command: 'Command',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/quick_open/CommandMenu.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nlet commandMenuInstance: CommandMenu;\n\nexport class CommandMenu {\n  private readonly commandsInternal: Command[];\n  private constructor() {\n    this.commandsInternal = [];\n    this.loadCommands();\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): CommandMenu {\n    const {forceNew} = opts;\n    if (!commandMenuInstance || forceNew) {\n      commandMenuInstance = new CommandMenu();\n    }\n    return commandMenuInstance;\n  }\n\n  static createCommand(options: CreateCommandOptions): Command {\n    const {category, keys, title, shortcut, executeHandler, availableHandler, userActionCode} = options;\n\n    let handler = executeHandler;\n    if (userActionCode) {\n      const actionCode = userActionCode;\n      handler = (): void => {\n        Host.userMetrics.actionTaken(actionCode);\n        executeHandler();\n      };\n    }\n    if (title === 'Show Issues') {\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      const cached_handler = handler;\n      handler = (): void => {\n        Host.userMetrics.issuesPanelOpenedFrom(Host.UserMetrics.IssueOpener.CommandMenu);\n        cached_handler();\n      };\n    }\n\n    return new Command(category, title, keys, shortcut, handler, availableHandler);\n  }\n\n  static createSettingCommand<V>(setting: Common.Settings.Setting<V>, title: string, value: V): Command {\n    const category = setting.category();\n    if (!category) {\n      throw new Error(`Creating '${title}' setting command failed. Setting has no category.`);\n    }\n    const tags = setting.tags() || '';\n    const reloadRequired = Boolean(setting.reloadRequired());\n    return CommandMenu.createCommand({\n      category: Common.Settings.getLocalizedSettingsCategory(category),\n      keys: tags,\n      title,\n      shortcut: '',\n      executeHandler: (): void => {\n        setting.set(value);\n        if (reloadRequired) {\n          UI.InspectorView.InspectorView.instance().displayReloadRequiredWarning(\n              i18nString(UIStrings.oneOrMoreSettingsHaveChanged));\n        }\n      },\n      availableHandler,\n      userActionCode: undefined,\n    });\n\n    function availableHandler(): boolean {\n      return setting.get() !== value;\n    }\n  }\n\n  static createActionCommand(options: ActionCommandOptions): Command {\n    const {action, userActionCode} = options;\n    const shortcut = UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutTitleForAction(action.id()) || '';\n\n    return CommandMenu.createCommand({\n      category: action.category(),\n      keys: action.tags() || '',\n      title: action.title() || '',\n      shortcut,\n      executeHandler: action.execute.bind(action),\n      userActionCode,\n      availableHandler: undefined,\n    });\n  }\n\n  static createRevealViewCommand(options: RevealViewCommandOptions): Command {\n    const {title, tags, category, userActionCode, id} = options;\n\n    return CommandMenu.createCommand({\n      category,\n      keys: tags,\n      title,\n      shortcut: '',\n      executeHandler: UI.ViewManager.ViewManager.instance().showView.bind(\n          UI.ViewManager.ViewManager.instance(), id, /* userGesture */ true),\n      userActionCode,\n      availableHandler: undefined,\n    });\n  }\n\n  private loadCommands(): void {\n    const locations = new Map<UI.ViewManager.ViewLocationValues, string>();\n    for (const {category, name} of UI.ViewManager.getRegisteredLocationResolvers()) {\n      if (category && name) {\n        locations.set(name, category);\n      }\n    }\n    const views = UI.ViewManager.getRegisteredViewExtensions();\n    for (const view of views) {\n      const viewLocation = view.location();\n      const category = viewLocation && locations.get(viewLocation);\n      if (!category) {\n        continue;\n      }\n\n      const options: RevealViewCommandOptions = {\n        title: view.commandPrompt(),\n        tags: view.tags() || '',\n        category,\n        userActionCode: undefined,\n        id: view.viewId(),\n      };\n      this.commandsInternal.push(CommandMenu.createRevealViewCommand(options));\n    }\n    // Populate allowlisted settings.\n    const settingsRegistrations = Common.Settings.getRegisteredSettings();\n    for (const settingRegistration of settingsRegistrations) {\n      const options = settingRegistration.options;\n      if (!options || !settingRegistration.category) {\n        continue;\n      }\n      for (const pair of options) {\n        const setting = Common.Settings.Settings.instance().moduleSetting(settingRegistration.settingName);\n        this.commandsInternal.push(CommandMenu.createSettingCommand(setting, pair.title(), pair.value));\n      }\n    }\n  }\n\n  commands(): Command[] {\n    return this.commandsInternal;\n  }\n}\nexport interface ActionCommandOptions {\n  action: UI.ActionRegistration.Action;\n  userActionCode?: number;\n}\n\nexport interface RevealViewCommandOptions {\n  id: string;\n  title: string;\n  tags: string;\n  category: string;\n  userActionCode?: number;\n}\n\nexport interface CreateCommandOptions {\n  category: string;\n  keys: string;\n  title: string;\n  shortcut: string;\n  executeHandler: () => void;\n  availableHandler?: () => boolean;\n  userActionCode?: number;\n}\n\nlet commandMenuProviderInstance: CommandMenuProvider;\n\nexport class CommandMenuProvider extends Provider {\n  private commands: Command[];\n  private constructor() {\n    super();\n    this.commands = [];\n  }\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): CommandMenuProvider {\n    const {forceNew} = opts;\n    if (!commandMenuProviderInstance || forceNew) {\n      commandMenuProviderInstance = new CommandMenuProvider();\n    }\n\n    return commandMenuProviderInstance;\n  }\n\n  attach(): void {\n    const allCommands = CommandMenu.instance().commands();\n\n    // Populate allowlisted actions.\n    const actions = UI.ActionRegistry.ActionRegistry.instance().availableActions();\n    for (const action of actions) {\n      const category = action.category();\n      if (!category) {\n        continue;\n      }\n\n      const options: ActionCommandOptions = {action, userActionCode: undefined};\n      this.commands.push(CommandMenu.createActionCommand(options));\n    }\n\n    for (const command of allCommands) {\n      if (command.available()) {\n        this.commands.push(command);\n      }\n    }\n\n    this.commands = this.commands.sort(commandComparator);\n\n    function commandComparator(left: Command, right: Command): number {\n      const cats = Platform.StringUtilities.compare(left.category(), right.category());\n      return cats ? cats : Platform.StringUtilities.compare(left.title(), right.title());\n    }\n  }\n\n  detach(): void {\n    this.commands = [];\n  }\n\n  itemCount(): number {\n    return this.commands.length;\n  }\n\n  itemKeyAt(itemIndex: number): string {\n    return this.commands[itemIndex].key();\n  }\n\n  itemScoreAt(itemIndex: number, query: string): number {\n    const command = this.commands[itemIndex];\n    let score = Diff.Diff.DiffWrapper.characterScore(query.toLowerCase(), command.title().toLowerCase());\n\n    // Score panel/drawer reveals above regular actions.\n    if (command.category().startsWith('Panel')) {\n      score += 2;\n    } else if (command.category().startsWith('Drawer')) {\n      score += 1;\n    }\n\n    return score;\n  }\n\n  renderItem(itemIndex: number, query: string, titleElement: Element, subtitleElement: Element): void {\n    const command = this.commands[itemIndex];\n\n    titleElement.removeChildren();\n    UI.UIUtils.createTextChild(titleElement, command.title());\n    FilteredListWidget.highlightRanges(titleElement, query, true);\n\n    subtitleElement.textContent = command.shortcut();\n\n    const tagElement = (titleElement.parentElement?.parentElement?.createChild('span', 'tag') as HTMLElement);\n    if (!tagElement) {\n      return;\n    }\n    const index = Platform.StringUtilities.hashCode(command.category()) % MaterialPaletteColors.length;\n    tagElement.style.backgroundColor = MaterialPaletteColors[index];\n    tagElement.style.color = 'var(--color-background)';\n    tagElement.textContent = command.category();\n  }\n\n  selectItem(itemIndex: number|null, _promptValue: string): void {\n    if (itemIndex === null) {\n      return;\n    }\n    this.commands[itemIndex].execute();\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.SelectCommandFromCommandMenu);\n  }\n\n  notFoundText(): string {\n    return i18nString(UIStrings.noCommandsFound);\n  }\n}\n\nexport const MaterialPaletteColors = [\n  '#F44336',\n  '#E91E63',\n  '#9C27B0',\n  '#673AB7',\n  '#3F51B5',\n  '#03A9F4',\n  '#00BCD4',\n  '#009688',\n  '#4CAF50',\n  '#8BC34A',\n  '#CDDC39',\n  '#FFC107',\n  '#FF9800',\n  '#FF5722',\n  '#795548',\n  '#9E9E9E',\n  '#607D8B',\n];\n\nexport class Command {\n  private readonly categoryInternal: string;\n  private readonly titleInternal: string;\n  private readonly keyInternal: string;\n  private readonly shortcutInternal: string;\n  private readonly executeHandler: () => void;\n  private readonly availableHandler?: () => boolean;\n\n  constructor(\n      category: string, title: string, key: string, shortcut: string, executeHandler: () => void,\n      availableHandler?: () => boolean) {\n    this.categoryInternal = category;\n    this.titleInternal = title;\n    this.keyInternal = category + '\\0' + title + '\\0' + key;\n    this.shortcutInternal = shortcut;\n    this.executeHandler = executeHandler;\n    this.availableHandler = availableHandler;\n  }\n\n  category(): string {\n    return this.categoryInternal;\n  }\n\n  title(): string {\n    return this.titleInternal;\n  }\n\n  key(): string {\n    return this.keyInternal;\n  }\n\n  shortcut(): string {\n    return this.shortcutInternal;\n  }\n\n  available(): boolean {\n    return this.availableHandler ? this.availableHandler() : true;\n  }\n\n  execute(): void {\n    this.executeHandler();\n  }\n}\n\nlet showActionDelegateInstance: ShowActionDelegate;\nexport class ShowActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): ShowActionDelegate {\n    const {forceNew} = opts;\n    if (!showActionDelegateInstance || forceNew) {\n      showActionDelegateInstance = new ShowActionDelegate();\n    }\n\n    return showActionDelegateInstance;\n  }\n\n  handleAction(_context: UI.Context.Context, _actionId: string): boolean {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.bringToFront();\n    QuickOpenImpl.show('>');\n    return true;\n  }\n}\n\nregisterProvider({\n  prefix: '>',\n  iconName: 'ic_command_run_command',\n  provider: () => Promise.resolve(CommandMenuProvider.instance()),\n  titlePrefix: (): Common.UIString.LocalizedString => i18nString(UIStrings.run),\n  titleSuggestion: (): Common.UIString.LocalizedString => i18nString(UIStrings.command),\n});\n"]}