{"version":3,"file":"FlameChart.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/perf_ui/FlameChart.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Copyright (C) 2013 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as Host from '../../../../core/host/host.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as Root from '../../../../core/root/root.js';\nimport type * as SDK from '../../../../core/sdk/sdk.js';\nimport type * as TimelineModel from '../../../../models/timeline_model/timeline_model.js';\nimport * as UI from '../../legacy.js';\nimport * as ThemeSupport from '../../theme_support/theme_support.js';\n\nimport type {ChartViewportDelegate} from './ChartViewport.js';\nimport {ChartViewport} from './ChartViewport.js';\nimport type {Calculator} from './TimelineGrid.js';\nimport {TimelineGrid} from './TimelineGrid.js';\nimport flameChartStyles from './flameChart.css.legacy.js';\n\nconst UIStrings = {\n  /**\n  *@description Aria accessible name in Flame Chart of the Performance panel\n  */\n  flameChart: 'Flame Chart',\n  /**\n  *@description Text for the screen reader to announce a hovered group\n  *@example {Network} PH1\n  */\n  sHovered: '{PH1} hovered',\n  /**\n  *@description Text for screen reader to announce a selected group.\n  *@example {Network} PH1\n  */\n  sSelected: '{PH1} selected',\n  /**\n  *@description Text for screen reader to announce an expanded group\n  *@example {Network} PH1\n  */\n  sExpanded: '{PH1} expanded',\n  /**\n  *@description Text for screen reader to announce a collapsed group\n  *@example {Network} PH1\n  */\n  sCollapsed: '{PH1} collapsed',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/perf_ui/FlameChart.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class FlameChartDelegate {\n  windowChanged(_startTime: number, _endTime: number, _animate: boolean): void {\n  }\n  updateRangeSelection(_startTime: number, _endTime: number): void {\n  }\n  updateSelectedGroup(_flameChart: FlameChart, _group: Group|null): void {\n  }\n}\n\ninterface GroupExpansionState {\n  [key: string]: boolean;\n}\n\nexport class FlameChart extends Common.ObjectWrapper.eventMixin<EventTypes, typeof UI.Widget.VBox>(UI.Widget.VBox)\n    implements Calculator, ChartViewportDelegate {\n  private readonly groupExpansionSetting?: Common.Settings.Setting<GroupExpansionState>;\n  private groupExpansionState: GroupExpansionState;\n  private readonly flameChartDelegate: FlameChartDelegate;\n  private useWebGL: boolean;\n  private chartViewport: ChartViewport;\n  private dataProvider: FlameChartDataProvider;\n  private candyStripeCanvas: HTMLCanvasElement;\n  private viewportElement: HTMLElement;\n  private canvasGL!: HTMLCanvasElement;\n  private canvas: HTMLCanvasElement;\n  private entryInfo: HTMLElement;\n  private readonly markerHighlighElement: HTMLElement;\n  private readonly highlightElement: HTMLElement;\n  private readonly selectedElement: HTMLElement;\n  private rulerEnabled: boolean;\n  private readonly rangeSelectionStart: number;\n  private readonly rangeSelectionEnd: number;\n  private barHeight: number;\n  private textBaseline: number;\n  private textPadding: number;\n  private readonly markerRadius: number;\n  private readonly headerLeftPadding: number;\n  private arrowSide: number;\n  private readonly expansionArrowIndent: number;\n  private readonly headerLabelXPadding: number;\n  private readonly headerLabelYPadding: number;\n  private highlightedMarkerIndex: number;\n  private highlightedEntryIndex: number;\n  private selectedEntryIndex: number;\n  private rawTimelineDataLength: number;\n  private textWidth: Map<string, Map<string, number>>;\n  private readonly markerPositions: Map<number, {\n    x: number,\n    width: number,\n  }>;\n  private lastMouseOffsetX: number;\n  private selectedGroup: number;\n  private keyboardFocusedGroup: number;\n  private offsetWidth!: number;\n  private offsetHeight!: number;\n  private dragStartX!: number;\n  private dragStartY!: number;\n  private lastMouseOffsetY!: number;\n  private minimumBoundaryInternal!: number;\n  private maxDragOffset!: number;\n  private shaderProgram?: WebGLProgram|null;\n  private vertexBuffer?: WebGLBuffer|null;\n  private colorBuffer?: WebGLBuffer|null;\n  private uScalingFactor?: WebGLUniformLocation|null;\n  private uShiftVector?: WebGLUniformLocation|null;\n  private aVertexPosition?: number;\n  private aVertexColor?: number;\n  private vertexCount?: number;\n  private prevTimelineData?: TimelineData;\n  private timelineLevels?: number[][]|null;\n  private visibleLevelOffsets?: Uint32Array|null;\n  private visibleLevels?: Uint16Array|null;\n  private groupOffsets?: Uint32Array|null;\n  private rawTimelineData?: TimelineData|null;\n  private forceDecorationCache?: Int8Array|null;\n  private entryColorsCache?: string[]|null;\n  private visibleLevelHeights?: Uint32Array;\n  private totalTime?: number;\n\n  constructor(\n      dataProvider: FlameChartDataProvider, flameChartDelegate: FlameChartDelegate,\n      groupExpansionSetting?: Common.Settings.Setting<GroupExpansionState>) {\n    super(true);\n    this.registerRequiredCSS(flameChartStyles);\n    this.contentElement.classList.add('flame-chart-main-pane');\n    this.groupExpansionSetting = groupExpansionSetting;\n    this.groupExpansionState = groupExpansionSetting && groupExpansionSetting.get() || {};\n    this.flameChartDelegate = flameChartDelegate;\n\n    this.useWebGL = Root.Runtime.experiments.isEnabled('timelineWebGL');\n    this.chartViewport = new ChartViewport(this);\n    this.chartViewport.show(this.contentElement);\n\n    this.dataProvider = dataProvider;\n    this.candyStripeCanvas = document.createElement('canvas');\n    this.createCandyStripePattern();\n\n    this.viewportElement = this.chartViewport.viewportElement;\n    if (this.useWebGL) {\n      this.canvasGL = (this.viewportElement.createChild('canvas', 'fill') as HTMLCanvasElement);\n      this.initWebGL();\n    }\n    this.canvas = (this.viewportElement.createChild('canvas', 'fill') as HTMLCanvasElement);\n\n    this.canvas.tabIndex = 0;\n    UI.ARIAUtils.setAccessibleName(this.canvas, i18nString(UIStrings.flameChart));\n    UI.ARIAUtils.markAsTree(this.canvas);\n    this.setDefaultFocusedElement(this.canvas);\n    this.canvas.classList.add('flame-chart-canvas');\n    this.canvas.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n    this.canvas.addEventListener('mouseout', this.onMouseOut.bind(this), false);\n    this.canvas.addEventListener('click', this.onClick.bind(this), false);\n    this.canvas.addEventListener('keydown', this.onKeyDown.bind(this), false);\n\n    this.entryInfo = this.viewportElement.createChild('div', 'flame-chart-entry-info');\n    this.markerHighlighElement = this.viewportElement.createChild('div', 'flame-chart-marker-highlight-element');\n    this.highlightElement = this.viewportElement.createChild('div', 'flame-chart-highlight-element');\n    this.selectedElement = this.viewportElement.createChild('div', 'flame-chart-selected-element');\n    this.canvas.addEventListener('focus', () => {\n      this.dispatchEventToListeners(Events.CanvasFocused);\n    }, false);\n\n    UI.UIUtils.installDragHandle(\n        this.viewportElement, this.startDragging.bind(this), this.dragging.bind(this), this.endDragging.bind(this),\n        null);\n\n    this.rulerEnabled = true;\n    this.rangeSelectionStart = 0;\n    this.rangeSelectionEnd = 0;\n    this.barHeight = 17;\n    this.textBaseline = 5;\n    this.textPadding = 5;\n    this.markerRadius = 6;\n    this.chartViewport.setWindowTimes(\n        dataProvider.minimumBoundary(), dataProvider.minimumBoundary() + dataProvider.totalTime());\n\n    this.headerLeftPadding = 6;\n    this.arrowSide = 8;\n    this.expansionArrowIndent = this.headerLeftPadding + this.arrowSide / 2;\n    this.headerLabelXPadding = 3;\n    this.headerLabelYPadding = 2;\n\n    this.highlightedMarkerIndex = -1;\n    this.highlightedEntryIndex = -1;\n    this.selectedEntryIndex = -1;\n    this.rawTimelineDataLength = 0;\n    this.textWidth = new Map();\n    this.markerPositions = new Map();\n\n    this.lastMouseOffsetX = 0;\n    this.selectedGroup = -1;\n\n    // Keyboard focused group is used to navigate groups irrespective of whether they are selectable or not\n    this.keyboardFocusedGroup = -1;\n\n    ThemeSupport.ThemeSupport.instance().addEventListener(ThemeSupport.ThemeChangeEvent.eventName, () => {\n      this.scheduleUpdate();\n    });\n  }\n\n  willHide(): void {\n    this.hideHighlight();\n  }\n\n  setBarHeight(value: number): void {\n    this.barHeight = value;\n  }\n\n  setTextBaseline(value: number): void {\n    this.textBaseline = value;\n  }\n\n  setTextPadding(value: number): void {\n    this.textPadding = value;\n  }\n\n  enableRuler(enable: boolean): void {\n    this.rulerEnabled = enable;\n  }\n\n  alwaysShowVerticalScroll(): void {\n    this.chartViewport.alwaysShowVerticalScroll();\n  }\n\n  disableRangeSelection(): void {\n    this.chartViewport.disableRangeSelection();\n  }\n\n  highlightEntry(entryIndex: number): void {\n    if (this.highlightedEntryIndex === entryIndex) {\n      return;\n    }\n    if (!this.dataProvider.entryColor(entryIndex)) {\n      return;\n    }\n    this.highlightedEntryIndex = entryIndex;\n    this.updateElementPosition(this.highlightElement, this.highlightedEntryIndex);\n    this.dispatchEventToListeners(Events.EntryHighlighted, entryIndex);\n  }\n\n  hideHighlight(): void {\n    this.entryInfo.removeChildren();\n    this.highlightedEntryIndex = -1;\n    this.updateElementPosition(this.highlightElement, this.highlightedEntryIndex);\n    this.dispatchEventToListeners(Events.EntryHighlighted, -1);\n  }\n\n  private createCandyStripePattern(): void {\n    // Set the candy stripe pattern to 17px so it repeats well.\n    const size = 17;\n    this.candyStripeCanvas.width = size;\n    this.candyStripeCanvas.height = size;\n\n    const ctx = this.candyStripeCanvas.getContext('2d');\n    if (!ctx) {\n      return;\n    }\n\n    // Rotate the stripe by 45deg to the right.\n    ctx.translate(size * 0.5, size * 0.5);\n    ctx.rotate(Math.PI * 0.25);\n    ctx.translate(-size * 0.5, -size * 0.5);\n\n    ctx.fillStyle = 'rgba(255, 0, 0, 0.4)';\n    for (let x = -size; x < size * 2; x += 3) {\n      ctx.fillRect(x, -size, 1, size * 3);\n    }\n  }\n\n  private resetCanvas(): void {\n    const ratio = window.devicePixelRatio;\n    const width = Math.round(this.offsetWidth * ratio);\n    const height = Math.round(this.offsetHeight * ratio);\n    this.canvas.width = width;\n    this.canvas.height = height;\n    this.canvas.style.width = `${width / ratio}px`;\n    this.canvas.style.height = `${height / ratio}px`;\n    if (this.useWebGL) {\n      this.canvasGL.width = width;\n      this.canvasGL.height = height;\n      this.canvasGL.style.width = `${width / ratio}px`;\n      this.canvasGL.style.height = `${height / ratio}px`;\n    }\n  }\n\n  windowChanged(startTime: number, endTime: number, animate: boolean): void {\n    this.flameChartDelegate.windowChanged(startTime, endTime, animate);\n  }\n\n  updateRangeSelection(startTime: number, endTime: number): void {\n    this.flameChartDelegate.updateRangeSelection(startTime, endTime);\n  }\n\n  setSize(width: number, height: number): void {\n    this.offsetWidth = width;\n    this.offsetHeight = height;\n  }\n\n  private startDragging(event: MouseEvent): boolean {\n    this.hideHighlight();\n    this.maxDragOffset = 0;\n    this.dragStartX = event.pageX;\n    this.dragStartY = event.pageY;\n    return true;\n  }\n\n  private dragging(event: MouseEvent): void {\n    const dx = event.pageX - this.dragStartX;\n    const dy = event.pageY - this.dragStartY;\n    this.maxDragOffset = Math.max(this.maxDragOffset, Math.sqrt(dx * dx + dy * dy));\n  }\n\n  private endDragging(_event: MouseEvent): void {\n    this.updateHighlight();\n  }\n\n  private timelineData(): TimelineData|null {\n    if (!this.dataProvider) {\n      return null;\n    }\n    const timelineData = this.dataProvider.timelineData();\n    if (timelineData !== this.rawTimelineData ||\n        (timelineData && timelineData.entryStartTimes.length !== this.rawTimelineDataLength)) {\n      this.processTimelineData(timelineData);\n    }\n    return this.rawTimelineData || null;\n  }\n\n  private revealEntry(entryIndex: number): void {\n    const timelineData = this.timelineData();\n    if (!timelineData) {\n      return;\n    }\n    const timeLeft = this.chartViewport.windowLeftTime();\n    const timeRight = this.chartViewport.windowRightTime();\n    const entryStartTime = timelineData.entryStartTimes[entryIndex];\n    const entryTotalTime = timelineData.entryTotalTimes[entryIndex];\n    const entryEndTime = entryStartTime + entryTotalTime;\n    let minEntryTimeWindow = Math.min(entryTotalTime, timeRight - timeLeft);\n\n    const level = timelineData.entryLevels[entryIndex];\n    this.chartViewport.setScrollOffset(this.levelToOffset(level), this.levelHeight(level));\n\n    const minVisibleWidthPx = 30;\n    const futurePixelToTime = (timeRight - timeLeft) / this.offsetWidth;\n    minEntryTimeWindow = Math.max(minEntryTimeWindow, futurePixelToTime * minVisibleWidthPx);\n    if (timeLeft > entryEndTime) {\n      const delta = timeLeft - entryEndTime + minEntryTimeWindow;\n      this.windowChanged(timeLeft - delta, timeRight - delta, /* animate */ true);\n    } else if (timeRight < entryStartTime) {\n      const delta = entryStartTime - timeRight + minEntryTimeWindow;\n      this.windowChanged(timeLeft + delta, timeRight + delta, /* animate */ true);\n    }\n  }\n\n  setWindowTimes(startTime: number, endTime: number, animate?: boolean): void {\n    this.chartViewport.setWindowTimes(startTime, endTime, animate);\n    this.updateHighlight();\n  }\n\n  private onMouseMove(event: Event): void {\n    const mouseEvent = (event as MouseEvent);\n    this.lastMouseOffsetX = mouseEvent.offsetX;\n    this.lastMouseOffsetY = mouseEvent.offsetY;\n    if (!this.enabled()) {\n      return;\n    }\n    if (this.chartViewport.isDragging()) {\n      return;\n    }\n    if (this.coordinatesToGroupIndex(mouseEvent.offsetX, mouseEvent.offsetY, true /* headerOnly */) >= 0) {\n      this.hideHighlight();\n      this.viewportElement.style.cursor = 'pointer';\n      return;\n    }\n    this.updateHighlight();\n  }\n\n  private updateHighlight(): void {\n    const entryIndex = this.coordinatesToEntryIndex(this.lastMouseOffsetX, this.lastMouseOffsetY);\n    if (entryIndex === -1) {\n      this.hideHighlight();\n      const group = this.coordinatesToGroupIndex(this.lastMouseOffsetX, this.lastMouseOffsetY, false /* headerOnly */);\n      if (group >= 0 && this.rawTimelineData && this.rawTimelineData.groups &&\n          this.rawTimelineData.groups[group].selectable) {\n        this.viewportElement.style.cursor = 'pointer';\n      } else {\n        this.viewportElement.style.cursor = 'default';\n      }\n      return;\n    }\n    if (this.chartViewport.isDragging()) {\n      return;\n    }\n    this.updatePopover(entryIndex);\n    this.viewportElement.style.cursor = this.dataProvider.canJumpToEntry(entryIndex) ? 'pointer' : 'default';\n    this.highlightEntry(entryIndex);\n  }\n\n  private onMouseOut(): void {\n    this.lastMouseOffsetX = -1;\n    this.lastMouseOffsetY = -1;\n    this.hideHighlight();\n  }\n\n  private updatePopover(entryIndex: number): void {\n    if (entryIndex === this.highlightedEntryIndex) {\n      this.updatePopoverOffset();\n      return;\n    }\n    this.entryInfo.removeChildren();\n    const popoverElement = this.dataProvider.prepareHighlightedEntryInfo(entryIndex);\n    if (popoverElement) {\n      this.entryInfo.appendChild(popoverElement);\n      this.updatePopoverOffset();\n    }\n  }\n\n  private updatePopoverOffset(): void {\n    const mouseX = this.lastMouseOffsetX;\n    const mouseY = this.lastMouseOffsetY;\n    const parentWidth = this.entryInfo.parentElement ? this.entryInfo.parentElement.clientWidth : 0;\n    const parentHeight = this.entryInfo.parentElement ? this.entryInfo.parentElement.clientHeight : 0;\n    const infoWidth = this.entryInfo.clientWidth;\n    const infoHeight = this.entryInfo.clientHeight;\n    const /** @const */ offsetX = 10;\n    const /** @const */ offsetY = 6;\n    let x;\n    let y;\n    for (let quadrant = 0; quadrant < 4; ++quadrant) {\n      const dx = quadrant & 2 ? -offsetX - infoWidth : offsetX;\n      const dy = quadrant & 1 ? -offsetY - infoHeight : offsetY;\n      x = Platform.NumberUtilities.clamp(mouseX + dx, 0, parentWidth - infoWidth);\n      y = Platform.NumberUtilities.clamp(mouseY + dy, 0, parentHeight - infoHeight);\n      if (x >= mouseX || mouseX >= x + infoWidth || y >= mouseY || mouseY >= y + infoHeight) {\n        break;\n      }\n    }\n    this.entryInfo.style.left = x + 'px';\n    this.entryInfo.style.top = y + 'px';\n  }\n\n  private onClick(event: Event): void {\n    const mouseEvent = (event as MouseEvent);\n    this.focus();\n    // onClick comes after dragStart and dragEnd events.\n    // So if there was drag (mouse move) in the middle of that events\n    // we skip the click. Otherwise we jump to the sources.\n    const clickThreshold = 5;\n    if (this.maxDragOffset > clickThreshold) {\n      return;\n    }\n\n    this.selectGroup(this.coordinatesToGroupIndex(mouseEvent.offsetX, mouseEvent.offsetY, false /* headerOnly */));\n    this.toggleGroupExpand(this.coordinatesToGroupIndex(mouseEvent.offsetX, mouseEvent.offsetY, true /* headerOnly */));\n    const timelineData = this.timelineData();\n    if (mouseEvent.shiftKey && this.highlightedEntryIndex !== -1 && timelineData) {\n      const start = timelineData.entryStartTimes[this.highlightedEntryIndex];\n      const end = start + timelineData.entryTotalTimes[this.highlightedEntryIndex];\n      this.chartViewport.setRangeSelection(start, end);\n    } else {\n      this.chartViewport.onClick(mouseEvent);\n      this.dispatchEventToListeners(Events.EntryInvoked, this.highlightedEntryIndex);\n    }\n  }\n\n  private selectGroup(groupIndex: number): void {\n    if (groupIndex < 0 || this.selectedGroup === groupIndex) {\n      return;\n    }\n    if (!this.rawTimelineData) {\n      return;\n    }\n\n    const groups = this.rawTimelineData.groups;\n    if (!groups) {\n      return;\n    }\n\n    this.keyboardFocusedGroup = groupIndex;\n    this.scrollGroupIntoView(groupIndex);\n    const groupName = groups[groupIndex].name;\n    if (!groups[groupIndex].selectable) {\n      this.deselectAllGroups();\n      UI.ARIAUtils.alert(i18nString(UIStrings.sHovered, {PH1: groupName}));\n    } else {\n      this.selectedGroup = groupIndex;\n      this.flameChartDelegate.updateSelectedGroup(this, groups[groupIndex]);\n      this.resetCanvas();\n      this.draw();\n      UI.ARIAUtils.alert(i18nString(UIStrings.sSelected, {PH1: groupName}));\n    }\n  }\n\n  private deselectAllGroups(): void {\n    this.selectedGroup = -1;\n    this.flameChartDelegate.updateSelectedGroup(this, null);\n    this.resetCanvas();\n    this.draw();\n  }\n\n  private deselectAllEntries(): void {\n    this.selectedEntryIndex = -1;\n    this.resetCanvas();\n    this.draw();\n  }\n\n  private isGroupFocused(index: number): boolean {\n    return index === this.selectedGroup || index === this.keyboardFocusedGroup;\n  }\n\n  private scrollGroupIntoView(index: number): void {\n    if (index < 0) {\n      return;\n    }\n\n    if (!this.rawTimelineData) {\n      return;\n    }\n\n    const groups = this.rawTimelineData.groups;\n    const groupOffsets = this.groupOffsets;\n    if (!groupOffsets || !groups) {\n      return;\n    }\n    const groupTop = groupOffsets[index];\n\n    let nextOffset = groupOffsets[index + 1];\n    if (index === groups.length - 1) {\n      nextOffset += groups[index].style.padding;\n    }\n\n    // For the top group, scroll all the way to the top of the chart\n    // to accommodate the bar with time markers\n    const scrollTop = index === 0 ? 0 : groupTop;\n\n    const scrollHeight = Math.min(nextOffset - scrollTop, this.chartViewport.chartHeight());\n    this.chartViewport.setScrollOffset(scrollTop, scrollHeight);\n  }\n\n  private toggleGroupExpand(groupIndex: number): void {\n    if (groupIndex < 0 || !this.isGroupCollapsible(groupIndex)) {\n      return;\n    }\n\n    if (!this.rawTimelineData || !this.rawTimelineData.groups) {\n      return;\n    }\n\n    this.expandGroup(groupIndex, !this.rawTimelineData.groups[groupIndex].expanded /* setExpanded */);\n  }\n\n  private expandGroup(\n      groupIndex: number, setExpanded: boolean|undefined = true, propagatedExpand: boolean|undefined = false): void {\n    if (groupIndex < 0 || !this.isGroupCollapsible(groupIndex)) {\n      return;\n    }\n\n    if (!this.rawTimelineData) {\n      return;\n    }\n\n    const groups = this.rawTimelineData.groups;\n    if (!groups) {\n      return;\n    }\n\n    const group = groups[groupIndex];\n    group.expanded = setExpanded;\n\n    this.groupExpansionState[group.name] = group.expanded;\n    if (this.groupExpansionSetting) {\n      this.groupExpansionSetting.set(this.groupExpansionState);\n    }\n    this.updateLevelPositions();\n\n    this.updateHighlight();\n    if (!group.expanded) {\n      const timelineData = this.timelineData();\n      if (timelineData) {\n        const level = timelineData.entryLevels[this.selectedEntryIndex];\n        if (this.selectedEntryIndex >= 0 && level >= group.startLevel &&\n            (groupIndex >= groups.length - 1 || groups[groupIndex + 1].startLevel > level)) {\n          this.selectedEntryIndex = -1;\n        }\n      }\n    }\n\n    this.updateHeight();\n    this.resetCanvas();\n    this.draw();\n\n    this.scrollGroupIntoView(groupIndex);\n    // We only want to read expanded/collapsed state on user inputted expand/collapse\n    if (!propagatedExpand) {\n      const groupName = groups[groupIndex].name;\n      const content = group.expanded ? i18nString(UIStrings.sExpanded, {PH1: groupName}) :\n                                       i18nString(UIStrings.sCollapsed, {PH1: groupName});\n      UI.ARIAUtils.alert(content);\n    }\n  }\n\n  private onKeyDown(e: KeyboardEvent): void {\n    if (!UI.KeyboardShortcut.KeyboardShortcut.hasNoModifiers(e) || !this.timelineData()) {\n      return;\n    }\n\n    const eventHandled = this.handleSelectionNavigation(e);\n\n    // Handle keyboard navigation in groups\n    if (!eventHandled && this.rawTimelineData && this.rawTimelineData.groups) {\n      this.handleKeyboardGroupNavigation(e);\n    }\n  }\n\n  bindCanvasEvent(eventName: string, onEvent: (arg0: Event) => void): void {\n    this.canvas.addEventListener(eventName, onEvent);\n  }\n\n  private handleKeyboardGroupNavigation(event: Event): void {\n    const keyboardEvent = (event as KeyboardEvent);\n    let handled = false;\n    let entrySelected = false;\n\n    if (keyboardEvent.code === 'ArrowUp') {\n      handled = this.selectPreviousGroup();\n    } else if (keyboardEvent.code === 'ArrowDown') {\n      handled = this.selectNextGroup();\n    } else if (keyboardEvent.code === 'ArrowLeft') {\n      if (this.keyboardFocusedGroup >= 0) {\n        this.expandGroup(this.keyboardFocusedGroup, false /* setExpanded */);\n        handled = true;\n      }\n    } else if (keyboardEvent.code === 'ArrowRight') {\n      if (this.keyboardFocusedGroup >= 0) {\n        this.expandGroup(this.keyboardFocusedGroup, true /* setExpanded */);\n        this.selectFirstChild();\n        handled = true;\n      }\n    } else if (keyboardEvent.key === 'Enter') {\n      entrySelected = this.selectFirstEntryInCurrentGroup();\n      handled = entrySelected;\n    }\n\n    if (handled && !entrySelected) {\n      this.deselectAllEntries();\n    }\n\n    if (handled) {\n      keyboardEvent.consume(true);\n    }\n  }\n\n  private selectFirstEntryInCurrentGroup(): boolean {\n    if (!this.rawTimelineData) {\n      return false;\n    }\n\n    const allGroups = this.rawTimelineData.groups;\n\n    if (this.keyboardFocusedGroup < 0 || !allGroups) {\n      return false;\n    }\n\n    const group = allGroups[this.keyboardFocusedGroup];\n    const startLevelInGroup = group.startLevel;\n\n    // Return if no levels in this group\n    if (startLevelInGroup < 0) {\n      return false;\n    }\n\n    // Make sure this is the innermost nested group with this startLevel\n    // This is because a parent group also contains levels of all its child groups\n    // So check if the next group has the same level, if it does, user should\n    // go to that child group to select this entry\n    if (this.keyboardFocusedGroup < allGroups.length - 1 &&\n        allGroups[this.keyboardFocusedGroup + 1].startLevel === startLevelInGroup) {\n      return false;\n    }\n\n    if (!this.timelineLevels) {\n      return false;\n    }\n\n    // Get first (default) entry in startLevel of selected group\n    const firstEntryIndex = this.timelineLevels[startLevelInGroup][0];\n\n    this.expandGroup(this.keyboardFocusedGroup, true /* setExpanded */);\n    this.setSelectedEntry(firstEntryIndex);\n    return true;\n  }\n\n  private selectPreviousGroup(): boolean {\n    if (this.keyboardFocusedGroup <= 0) {\n      return false;\n    }\n\n    const groupIndexToSelect = this.getGroupIndexToSelect(-1 /* offset */);\n    this.selectGroup(groupIndexToSelect);\n    return true;\n  }\n\n  private selectNextGroup(): boolean {\n    if (!this.rawTimelineData || !this.rawTimelineData.groups) {\n      return false;\n    }\n\n    if (this.keyboardFocusedGroup >= this.rawTimelineData.groups.length - 1) {\n      return false;\n    }\n\n    const groupIndexToSelect = this.getGroupIndexToSelect(1 /* offset */);\n    this.selectGroup(groupIndexToSelect);\n    return true;\n  }\n\n  private getGroupIndexToSelect(offset: number): number {\n    if (!this.rawTimelineData || !this.rawTimelineData.groups) {\n      throw new Error('No raw timeline data');\n    }\n    const allGroups = this.rawTimelineData.groups;\n    let groupIndexToSelect = this.keyboardFocusedGroup;\n    let groupName, groupWithSubNestingLevel;\n\n    do {\n      groupIndexToSelect += offset;\n      groupName = this.rawTimelineData.groups[groupIndexToSelect].name;\n      groupWithSubNestingLevel = this.keyboardFocusedGroup !== -1 &&\n          allGroups[groupIndexToSelect].style.nestingLevel > allGroups[this.keyboardFocusedGroup].style.nestingLevel;\n    } while (groupIndexToSelect > 0 && groupIndexToSelect < allGroups.length - 1 &&\n             (!groupName || groupWithSubNestingLevel));\n\n    return groupIndexToSelect;\n  }\n\n  private selectFirstChild(): void {\n    if (!this.rawTimelineData || !this.rawTimelineData.groups) {\n      return;\n    }\n\n    const allGroups = this.rawTimelineData.groups;\n    if (this.keyboardFocusedGroup < 0 || this.keyboardFocusedGroup >= allGroups.length - 1) {\n      return;\n    }\n\n    const groupIndexToSelect = this.keyboardFocusedGroup + 1;\n    if (allGroups[groupIndexToSelect].style.nestingLevel > allGroups[this.keyboardFocusedGroup].style.nestingLevel) {\n      this.selectGroup(groupIndexToSelect);\n    }\n  }\n\n  private handleSelectionNavigation(event: KeyboardEvent): boolean {\n    if (this.selectedEntryIndex === -1) {\n      return false;\n    }\n    const timelineData = this.timelineData();\n    if (!timelineData) {\n      return false;\n    }\n\n    function timeComparator(time: number, entryIndex: number): number {\n      if (!timelineData) {\n        throw new Error('No timeline data');\n      }\n      return time - timelineData.entryStartTimes[entryIndex];\n    }\n\n    function entriesIntersect(entry1: number, entry2: number): boolean {\n      if (!timelineData) {\n        throw new Error('No timeline data');\n      }\n\n      const start1 = timelineData.entryStartTimes[entry1];\n      const start2 = timelineData.entryStartTimes[entry2];\n      const end1 = start1 + timelineData.entryTotalTimes[entry1];\n      const end2 = start2 + timelineData.entryTotalTimes[entry2];\n      return start1 < end2 && start2 < end1;\n    }\n\n    const keyboardEvent = (event as KeyboardEvent);\n    const keys = UI.KeyboardShortcut.Keys;\n    if (keyboardEvent.keyCode === keys.Left.code || keyboardEvent.keyCode === keys.Right.code) {\n      const level = timelineData.entryLevels[this.selectedEntryIndex];\n      const levelIndexes = this.timelineLevels ? this.timelineLevels[level] : [];\n      let indexOnLevel = Platform.ArrayUtilities.lowerBound(levelIndexes, this.selectedEntryIndex, (a, b) => a - b);\n      indexOnLevel += keyboardEvent.keyCode === keys.Left.code ? -1 : 1;\n      event.consume(true);\n      if (indexOnLevel >= 0 && indexOnLevel < levelIndexes.length) {\n        this.dispatchEventToListeners(Events.EntrySelected, levelIndexes[indexOnLevel]);\n      }\n      return true;\n    }\n\n    if (keyboardEvent.keyCode === keys.Up.code || keyboardEvent.keyCode === keys.Down.code) {\n      let level = timelineData.entryLevels[this.selectedEntryIndex];\n      level += keyboardEvent.keyCode === keys.Up.code ? -1 : 1;\n      if (level < 0 || (this.timelineLevels && level >= this.timelineLevels.length)) {\n        this.deselectAllEntries();\n        keyboardEvent.consume(true);\n        return true;\n      }\n      const entryTime = timelineData.entryStartTimes[this.selectedEntryIndex] +\n          timelineData.entryTotalTimes[this.selectedEntryIndex] / 2;\n      const levelIndexes = this.timelineLevels ? this.timelineLevels[level] : [];\n      let indexOnLevel = Platform.ArrayUtilities.upperBound(levelIndexes, entryTime, timeComparator) - 1;\n      if (!entriesIntersect(this.selectedEntryIndex, levelIndexes[indexOnLevel])) {\n        ++indexOnLevel;\n        if (indexOnLevel >= levelIndexes.length ||\n            !entriesIntersect(this.selectedEntryIndex, levelIndexes[indexOnLevel])) {\n          if (keyboardEvent.code === 'ArrowDown') {\n            return false;\n          }\n\n          // Stay in the current group and give focus to the parent group instead of entries\n          this.deselectAllEntries();\n          keyboardEvent.consume(true);\n          return true;\n        }\n      }\n      keyboardEvent.consume(true);\n      this.dispatchEventToListeners(Events.EntrySelected, levelIndexes[indexOnLevel]);\n      return true;\n    }\n    if (event.key === 'Enter') {\n      event.consume(true);\n      this.dispatchEventToListeners(Events.EntryInvoked, this.selectedEntryIndex);\n      return true;\n    }\n    return false;\n  }\n\n  private coordinatesToEntryIndex(x: number, y: number): number {\n    if (x < 0 || y < 0) {\n      return -1;\n    }\n    const timelineData = this.timelineData();\n    if (!timelineData) {\n      return -1;\n    }\n    y += this.chartViewport.scrollOffset();\n    if (!this.visibleLevelOffsets) {\n      throw new Error('No visible level offsets');\n    }\n    const cursorLevel =\n        Platform.ArrayUtilities.upperBound(this.visibleLevelOffsets, y, Platform.ArrayUtilities.DEFAULT_COMPARATOR) - 1;\n    if (cursorLevel < 0 || (this.visibleLevels && !this.visibleLevels[cursorLevel])) {\n      return -1;\n    }\n    const offsetFromLevel = y - this.visibleLevelOffsets[cursorLevel];\n    if (offsetFromLevel > this.levelHeight(cursorLevel)) {\n      return -1;\n    }\n\n    // Check markers first.\n    for (const [index, pos] of this.markerPositions) {\n      if (timelineData.entryLevels[index] !== cursorLevel) {\n        continue;\n      }\n      if (pos.x <= x && x < pos.x + pos.width) {\n        return index as number;\n      }\n    }\n\n    // Check regular entries.\n    const entryStartTimes = timelineData.entryStartTimes;\n    const entriesOnLevel: number[] = this.timelineLevels ? this.timelineLevels[cursorLevel] : [];\n    if (!entriesOnLevel || !entriesOnLevel.length) {\n      return -1;\n    }\n\n    const cursorTime = this.chartViewport.pixelToTime(x);\n    const indexOnLevel = Math.max(\n        Platform.ArrayUtilities.upperBound(\n            entriesOnLevel, cursorTime, (time, entryIndex) => time - entryStartTimes[entryIndex]) -\n            1,\n        0);\n\n    function checkEntryHit(this: FlameChart, entryIndex: number|undefined): boolean {\n      if (entryIndex === undefined) {\n        return false;\n      }\n\n      if (!timelineData) {\n        return false;\n      }\n\n      const startTime = entryStartTimes[entryIndex];\n      const duration = timelineData.entryTotalTimes[entryIndex];\n      const startX = this.chartViewport.timeToPosition(startTime);\n      const endX = this.chartViewport.timeToPosition(startTime + duration);\n      const barThresholdPx = 3;\n      return startX - barThresholdPx < x && x < endX + barThresholdPx;\n    }\n\n    let entryIndex: number = entriesOnLevel[indexOnLevel];\n    if (checkEntryHit.call(this, entryIndex)) {\n      return entryIndex;\n    }\n    entryIndex = entriesOnLevel[indexOnLevel + 1];\n    if (checkEntryHit.call(this, entryIndex)) {\n      return entryIndex;\n    }\n    return -1;\n  }\n\n  private coordinatesToGroupIndex(x: number, y: number, headerOnly: boolean): number {\n    if (!this.rawTimelineData || !this.rawTimelineData.groups || !this.groupOffsets) {\n      return -1;\n    }\n\n    if (x < 0 || y < 0) {\n      return -1;\n    }\n    y += this.chartViewport.scrollOffset();\n    const groups = this.rawTimelineData.groups || [];\n    const group =\n        Platform.ArrayUtilities.upperBound(this.groupOffsets, y, Platform.ArrayUtilities.DEFAULT_COMPARATOR) - 1;\n    if (group < 0 || group >= groups.length) {\n      return -1;\n    }\n    const height = headerOnly ? groups[group].style.height : this.groupOffsets[group + 1] - this.groupOffsets[group];\n    if (y - this.groupOffsets[group] >= height) {\n      return -1;\n    }\n    if (!headerOnly) {\n      return group;\n    }\n\n    const context = (this.canvas.getContext('2d') as CanvasRenderingContext2D);\n    context.save();\n    context.font = groups[group].style.font;\n    const right = this.headerLeftPadding + this.labelWidthForGroup(context, groups[group]);\n    context.restore();\n    if (x > right) {\n      return -1;\n    }\n\n    return group;\n  }\n\n  private markerIndexAtPosition(x: number): number {\n    const timelineData = this.timelineData();\n    if (!timelineData) {\n      return -1;\n    }\n\n    const markers = timelineData.markers;\n    if (!markers) {\n      return -1;\n    }\n    const /** @const */ accurracyOffsetPx = 4;\n    const time = this.chartViewport.pixelToTime(x);\n    const leftTime = this.chartViewport.pixelToTime(x - accurracyOffsetPx);\n    const rightTime = this.chartViewport.pixelToTime(x + accurracyOffsetPx);\n    const left = this.markerIndexBeforeTime(leftTime);\n    let markerIndex = -1;\n    let distance: number = Infinity;\n    for (let i = left; i < markers.length && markers[i].startTime() < rightTime; i++) {\n      const nextDistance = Math.abs(markers[i].startTime() - time);\n      if (nextDistance < distance) {\n        markerIndex = i;\n        distance = nextDistance;\n      }\n    }\n    return markerIndex;\n  }\n\n  private markerIndexBeforeTime(time: number): number {\n    const timelineData = this.timelineData();\n    if (!timelineData) {\n      throw new Error('No timeline data');\n    }\n\n    const markers = timelineData.markers;\n    if (!markers) {\n      throw new Error('No timeline markers');\n    }\n\n    return Platform.ArrayUtilities.lowerBound(\n        timelineData.markers, time, (markerTimestamp, marker) => markerTimestamp - marker.startTime());\n  }\n\n  private draw(): void {\n    const timelineData = this.timelineData();\n    if (!timelineData) {\n      return;\n    }\n\n    const visibleLevelOffsets = this.visibleLevelOffsets ? this.visibleLevelOffsets : new Uint32Array();\n\n    const width = this.offsetWidth;\n    const height = this.offsetHeight;\n    const context = (this.canvas.getContext('2d') as CanvasRenderingContext2D);\n    context.save();\n    const ratio = window.devicePixelRatio;\n    const top = this.chartViewport.scrollOffset();\n    context.scale(ratio, ratio);\n    context.fillStyle = 'rgba(0, 0, 0, 0)';\n    context.fillRect(0, 0, width, height);\n    context.translate(0, -top);\n    const defaultFont = '11px ' + Host.Platform.fontFamily();\n    context.font = defaultFont;\n\n    const candyStripePattern = context.createPattern(this.candyStripeCanvas, 'repeat');\n\n    const entryTotalTimes = timelineData.entryTotalTimes;\n    const entryStartTimes = timelineData.entryStartTimes;\n    const entryLevels = timelineData.entryLevels;\n    const timeToPixel = this.chartViewport.timeToPixel();\n\n    const titleIndices = [];\n    const markerIndices = [];\n    const textPadding = this.textPadding;\n    const minTextWidth = 2 * textPadding + UI.UIUtils.measureTextWidth(context, '');\n    const minTextWidthDuration = this.chartViewport.pixelToTimeOffset(minTextWidth);\n    const minVisibleBarLevel = Math.max(\n        Platform.ArrayUtilities.upperBound(visibleLevelOffsets, top, Platform.ArrayUtilities.DEFAULT_COMPARATOR) - 1,\n        0);\n    this.markerPositions.clear();\n\n    let mainThreadTopLevel = -1;\n\n    // Find the main thread so that we can mark tasks longer than 50ms.\n    if ('groups' in timelineData && Array.isArray(timelineData.groups)) {\n      const mainThread = timelineData.groups.find(group => {\n        if (!group.track) {\n          return false;\n        }\n\n        return group.track.name === 'CrRendererMain';\n      });\n\n      if (mainThread) {\n        mainThreadTopLevel = mainThread.startLevel;\n      }\n    }\n\n    const colorBuckets = new Map<string, {\n      indexes: number[],\n    }>();\n    for (let level = minVisibleBarLevel; level < this.dataProvider.maxStackDepth(); ++level) {\n      if (this.levelToOffset(level) > top + height) {\n        break;\n      }\n      if (!this.visibleLevels || !this.visibleLevels[level]) {\n        continue;\n      }\n      if (!this.timelineLevels) {\n        continue;\n      }\n\n      // Entries are ordered by start time within a level, so find the last visible entry.\n      const levelIndexes = this.timelineLevels[level];\n      const rightIndexOnLevel = Platform.ArrayUtilities.lowerBound(\n                                    levelIndexes, this.chartViewport.windowRightTime(),\n                                    (time, entryIndex) => time - entryStartTimes[entryIndex]) -\n          1;\n      let lastDrawOffset = Infinity;\n      for (let entryIndexOnLevel = rightIndexOnLevel; entryIndexOnLevel >= 0; --entryIndexOnLevel) {\n        const entryIndex = levelIndexes[entryIndexOnLevel];\n        const duration = entryTotalTimes[entryIndex];\n        if (isNaN(duration)) {\n          markerIndices.push(entryIndex);\n          continue;\n        }\n        if (duration >= minTextWidthDuration || (this.forceDecorationCache && this.forceDecorationCache[entryIndex])) {\n          titleIndices.push(entryIndex);\n        }\n\n        const entryStartTime = entryStartTimes[entryIndex];\n        const entryOffsetRight = entryStartTime + duration;\n        if (entryOffsetRight <= this.chartViewport.windowLeftTime()) {\n          break;\n        }\n        if (this.useWebGL) {\n          continue;\n        }\n\n        const barX = this.timeToPositionClipped(entryStartTime);\n        // Check if the entry entirely fits into an already drawn pixel, we can just skip drawing it.\n        if (barX >= lastDrawOffset) {\n          continue;\n        }\n        lastDrawOffset = barX;\n\n        if (this.entryColorsCache) {\n          const color = this.entryColorsCache[entryIndex];\n          let bucket = colorBuckets.get(color);\n          if (!bucket) {\n            bucket = {indexes: []};\n            colorBuckets.set(color, bucket);\n          }\n          bucket.indexes.push(entryIndex);\n        }\n      }\n    }\n\n    if (this.useWebGL) {\n      this.drawGL();\n    } else {\n      context.save();\n      this.forEachGroupInViewport((offset, index, group, isFirst, groupHeight) => {\n        if (this.isGroupFocused(index)) {\n          context.fillStyle =\n              ThemeSupport.ThemeSupport.instance().getComputedValue('--selected-group-background', this.contentElement);\n          context.fillRect(0, offset, width, groupHeight - group.style.padding);\n        }\n      });\n      context.restore();\n\n      for (const [color, {indexes}] of colorBuckets) {\n        context.beginPath();\n        for (let i = 0; i < indexes.length; ++i) {\n          const entryIndex = indexes[i];\n          const duration = entryTotalTimes[entryIndex];\n          if (isNaN(duration)) {\n            continue;\n          }\n          const entryStartTime = entryStartTimes[entryIndex];\n          const barX = this.timeToPositionClipped(entryStartTime);\n          const barLevel = entryLevels[entryIndex];\n          const barHeight = this.levelHeight(barLevel);\n          const barY = this.levelToOffset(barLevel);\n          const barRight = this.timeToPositionClipped(entryStartTime + duration);\n          const barWidth = Math.max(barRight - barX, 1);\n          context.rect(barX, barY, barWidth - 0.4, barHeight - 1);\n        }\n        context.fillStyle = color;\n        context.fill();\n\n        // Draw long task regions.\n        context.beginPath();\n        for (let i = 0; i < indexes.length; ++i) {\n          const entryIndex = indexes[i];\n          const duration = entryTotalTimes[entryIndex];\n          const showLongDurations = entryLevels[entryIndex] === mainThreadTopLevel;\n\n          if (!showLongDurations) {\n            continue;\n          }\n\n          if (isNaN(duration) || duration < 50) {\n            continue;\n          }\n\n          const entryStartTime = entryStartTimes[entryIndex];\n          const barX = this.timeToPositionClipped(entryStartTime + 50);\n          const barLevel = entryLevels[entryIndex];\n          const barHeight = this.levelHeight(barLevel);\n          const barY = this.levelToOffset(barLevel);\n          const barRight = this.timeToPositionClipped(entryStartTime + duration);\n          const barWidth = Math.max(barRight - barX, 1);\n          context.rect(barX, barY, barWidth - 0.4, barHeight - 1);\n        }\n\n        if (candyStripePattern) {\n          context.fillStyle = candyStripePattern;\n          context.fill();\n        }\n      }\n    }\n\n    context.textBaseline = 'alphabetic';\n    context.beginPath();\n    let lastMarkerLevel = -1;\n    let lastMarkerX: number = -Infinity;\n    // Markers are sorted top to bottom, right to left.\n    for (let m = markerIndices.length - 1; m >= 0; --m) {\n      const entryIndex = markerIndices[m];\n      const title = this.dataProvider.entryTitle(entryIndex);\n      if (!title) {\n        continue;\n      }\n      const entryStartTime = entryStartTimes[entryIndex];\n      const level = entryLevels[entryIndex];\n      if (lastMarkerLevel !== level) {\n        lastMarkerX = -Infinity;\n      }\n      const x = Math.max(this.chartViewport.timeToPosition(entryStartTime), lastMarkerX);\n      const y = this.levelToOffset(level);\n      const h = this.levelHeight(level);\n      const padding = 4;\n      const width = Math.ceil(UI.UIUtils.measureTextWidth(context, title)) + 2 * padding;\n      lastMarkerX = x + width + 1;\n      lastMarkerLevel = level;\n      this.markerPositions.set(entryIndex, {x, width});\n      context.fillStyle = this.dataProvider.entryColor(entryIndex);\n      context.fillRect(x, y, width, h - 1);\n      context.fillStyle = 'white';\n      context.fillText(title, x + padding, y + h - this.textBaseline);\n    }\n    context.strokeStyle = 'rgba(0, 0, 0, 0.2)';\n    context.stroke();\n\n    for (let i = 0; i < titleIndices.length; ++i) {\n      const entryIndex = titleIndices[i];\n      const entryStartTime = entryStartTimes[entryIndex];\n      const barX = this.timeToPositionClipped(entryStartTime);\n      const barRight = Math.min(this.timeToPositionClipped(entryStartTime + entryTotalTimes[entryIndex]), width) + 1;\n      const barWidth = barRight - barX;\n      const barLevel = entryLevels[entryIndex];\n      const barY = this.levelToOffset(barLevel);\n      let text = this.dataProvider.entryTitle(entryIndex);\n      if (text && text.length) {\n        context.font = this.dataProvider.entryFont(entryIndex) || defaultFont;\n        text = UI.UIUtils.trimTextMiddle(context, text, barWidth - 2 * textPadding);\n      }\n      const unclippedBarX = this.chartViewport.timeToPosition(entryStartTime);\n      const barHeight = this.levelHeight(barLevel);\n      if (this.dataProvider.decorateEntry(\n              entryIndex, context, text, barX, barY, barWidth, barHeight, unclippedBarX, timeToPixel)) {\n        continue;\n      }\n      if (!text || !text.length) {\n        continue;\n      }\n      context.fillStyle = this.dataProvider.textColor(entryIndex);\n      context.fillText(text, barX + textPadding, barY + barHeight - this.textBaseline);\n    }\n\n    context.restore();\n\n    this.drawGroupHeaders(width, height);\n    this.drawFlowEvents(context, width, height);\n    this.drawMarkers();\n    const dividersData = TimelineGrid.calculateGridOffsets(this);\n    const navStartTimes = Array.from(this.dataProvider.navStartTimes().values());\n\n    let navStartTimeIndex = 0;\n    const drawAdjustedTime = (time: number): string => {\n      if (navStartTimes.length === 0) {\n        return this.formatValue(time, dividersData.precision);\n      }\n\n      // Track when the time crosses the boundary to the next nav start record,\n      // and when it does, move the nav start array index accordingly.\n      const hasNextNavStartTime = navStartTimes.length > navStartTimeIndex + 1;\n      if (hasNextNavStartTime && time > navStartTimes[navStartTimeIndex + 1].startTime) {\n        navStartTimeIndex++;\n      }\n\n      // Adjust the time by the nearest nav start marker's value.\n      const nearestMarker = navStartTimes[navStartTimeIndex];\n      if (nearestMarker) {\n        time -= nearestMarker.startTime - this.zeroTime();\n      }\n\n      return this.formatValue(time, dividersData.precision);\n    };\n\n    TimelineGrid.drawCanvasGrid(context, dividersData);\n    if (this.rulerEnabled) {\n      TimelineGrid.drawCanvasHeaders(context, dividersData, drawAdjustedTime, 3, HeaderHeight);\n    }\n\n    this.updateElementPosition(this.highlightElement, this.highlightedEntryIndex);\n    this.updateElementPosition(this.selectedElement, this.selectedEntryIndex);\n    this.updateMarkerHighlight();\n  }\n\n  private initWebGL(): void {\n    const gl = (this.canvasGL.getContext('webgl') as WebGLRenderingContext | null);\n    if (!gl) {\n      console.error('Failed to obtain WebGL context.');\n      this.useWebGL = false;  // Fallback to use canvas.\n      return;\n    }\n\n    const vertexShaderSource = `\n  attribute vec2 aVertexPosition;\n  attribute float aVertexColor;\n\n  uniform vec2 uScalingFactor;\n  uniform vec2 uShiftVector;\n\n  varying mediump vec2 vPalettePosition;\n\n  void main() {\n  vec2 shiftedPosition = aVertexPosition - uShiftVector;\n  gl_Position = vec4(shiftedPosition * uScalingFactor + vec2(-1.0, 1.0), 0.0, 1.0);\n  vPalettePosition = vec2(aVertexColor, 0.5);\n  }`;\n\n    const fragmentShaderSource = `\n  varying mediump vec2 vPalettePosition;\n  uniform sampler2D uSampler;\n\n  void main() {\n  gl_FragColor = texture2D(uSampler, vPalettePosition);\n  }`;\n\n    function loadShader(gl: WebGLRenderingContext, type: number, source: string): WebGLShader|null {\n      const shader = gl.createShader(type);\n      if (!shader) {\n        return null;\n      }\n\n      gl.shaderSource(shader, source);\n      gl.compileShader(shader);\n      if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        return shader;\n      }\n      console.error('Shader compile error: ' + gl.getShaderInfoLog(shader));\n      gl.deleteShader(shader);\n      return null;\n    }\n\n    const vertexShader = loadShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n    const fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n\n    const shaderProgram = gl.createProgram();\n    if (!shaderProgram || !vertexShader || !fragmentShader) {\n      return;\n    }\n    gl.attachShader(shaderProgram, vertexShader);\n    gl.attachShader(shaderProgram, fragmentShader);\n    gl.linkProgram(shaderProgram);\n\n    if (gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n      this.shaderProgram = shaderProgram;\n      gl.useProgram(shaderProgram);\n    } else {\n      this.shaderProgram = null;\n      throw new Error('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\n    }\n\n    this.vertexBuffer = gl.createBuffer();\n    this.colorBuffer = gl.createBuffer();\n\n    this.uScalingFactor = gl.getUniformLocation(shaderProgram, 'uScalingFactor');\n    this.uShiftVector = gl.getUniformLocation(shaderProgram, 'uShiftVector');\n    const uSampler = gl.getUniformLocation(shaderProgram, 'uSampler');\n    gl.uniform1i(uSampler, 0);\n    this.aVertexPosition = gl.getAttribLocation(this.shaderProgram, 'aVertexPosition');\n    this.aVertexColor = gl.getAttribLocation(this.shaderProgram, 'aVertexColor');\n    gl.enableVertexAttribArray(this.aVertexPosition);\n    gl.enableVertexAttribArray(this.aVertexColor);\n  }\n\n  private setupGLGeometry(): void {\n    const gl = (this.canvasGL.getContext('webgl') as WebGLRenderingContext | null);\n    if (!gl) {\n      return;\n    }\n\n    const timelineData = this.timelineData();\n    if (!timelineData) {\n      return;\n    }\n\n    const entryTotalTimes = timelineData.entryTotalTimes;\n    const entryStartTimes = timelineData.entryStartTimes;\n    const entryLevels = timelineData.entryLevels;\n\n    const verticesPerBar = 6;\n    const vertexArray = new Float32Array(entryTotalTimes.length * verticesPerBar * 2);\n    let colorArray = new Uint8Array(entryTotalTimes.length * verticesPerBar);\n    let vertex = 0;\n    const parsedColorCache = new Map<string, number>();\n    const colors: number[] = [];\n\n    const visibleLevels = this.visibleLevels || [];\n    const rawTimelineData = this.rawTimelineData || {groups: []};\n\n    const collapsedOverviewLevels = new Array(visibleLevels.length);\n    const groups = rawTimelineData.groups || [];\n    this.forEachGroup((offset, index, group) => {\n      if (group.style.useFirstLineForOverview || !this.isGroupCollapsible(index) || group.expanded) {\n        return;\n      }\n      let nextGroup = index + 1;\n      while (nextGroup < groups.length && groups[nextGroup].style.nestingLevel > group.style.nestingLevel) {\n        ++nextGroup;\n      }\n      const endLevel = nextGroup < groups.length ? groups[nextGroup].startLevel : this.dataProvider.maxStackDepth();\n      for (let i = group.startLevel; i < endLevel; ++i) {\n        collapsedOverviewLevels[i] = offset;\n      }\n    });\n\n    for (let i = 0; i < entryTotalTimes.length; ++i) {\n      const level = entryLevels[i];\n      const collapsedGroupOffset = collapsedOverviewLevels[level];\n      if (!visibleLevels[level] && !collapsedGroupOffset) {\n        continue;\n      }\n      if (!this.entryColorsCache) {\n        continue;\n      }\n\n      const color = this.entryColorsCache[i];\n      if (!color) {\n        continue;\n      }\n      let colorIndex = parsedColorCache.get(color);\n      if (colorIndex === undefined) {\n        const parsedColor = Common.Color.Color.parse(color);\n        if (parsedColor) {\n          const rgba = parsedColor.canonicalRGBA();\n          rgba[3] = Math.round(rgba[3] * 255);\n          colorIndex = colors.length / 4;\n          colors.push(...rgba);\n          if (colorIndex === 256) {\n            colorArray = new Uint8Array(colorArray);\n          }\n        }\n\n        if (colorIndex) {\n          parsedColorCache.set(color, colorIndex);\n        }\n      }\n      for (let j = 0; j < verticesPerBar; ++j) {\n        if (colorIndex) {\n          colorArray[vertex + j] = colorIndex;\n        }\n      }\n\n      const vpos = vertex * 2;\n      const x0 = entryStartTimes[i] - this.minimumBoundaryInternal;\n      const x1 = x0 + entryTotalTimes[i];\n      const y0 = collapsedGroupOffset || this.levelToOffset(level);\n      const y1 = y0 + this.levelHeight(level) - 1;\n      vertexArray[vpos + 0] = x0;\n      vertexArray[vpos + 1] = y0;\n      vertexArray[vpos + 2] = x1;\n      vertexArray[vpos + 3] = y0;\n      vertexArray[vpos + 4] = x0;\n      vertexArray[vpos + 5] = y1;\n      vertexArray[vpos + 6] = x0;\n      vertexArray[vpos + 7] = y1;\n      vertexArray[vpos + 8] = x1;\n      vertexArray[vpos + 9] = y0;\n      vertexArray[vpos + 10] = x1;\n      vertexArray[vpos + 11] = y1;\n\n      vertex += verticesPerBar;\n    }\n    this.vertexCount = vertex;\n\n    const paletteTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, paletteTexture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.activeTexture(gl.TEXTURE0);\n\n    const numColors = colors.length / 4;\n    const useShortForColors = numColors >= 256;\n    const width = !useShortForColors ? 256 : Math.min(1 << 16, gl.getParameter(gl.MAX_TEXTURE_SIZE));\n    console.assert(numColors <= width, 'Too many colors');\n    const height = 1;\n    const colorIndexType = useShortForColors ? gl.UNSIGNED_SHORT : gl.UNSIGNED_BYTE;\n    if (useShortForColors) {\n      const factor = (1 << 16) / width;\n      for (let i = 0; i < vertex; ++i) {\n        colorArray[i] *= factor;\n      }\n    }\n\n    const pixels = new Uint8Array(width * 4);\n    pixels.set(colors);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\n    if (this.vertexBuffer && this.aVertexPosition) {\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, vertexArray, gl.STATIC_DRAW);\n      gl.vertexAttribPointer(this.aVertexPosition, /* vertexComponents */ 2, gl.FLOAT, false, 0, 0);\n    }\n\n    if (this.colorBuffer && this.aVertexColor) {\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.colorBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, colorArray, gl.STATIC_DRAW);\n      gl.vertexAttribPointer(this.aVertexColor, /* colorComponents */ 1, colorIndexType, true, 0, 0);\n    }\n  }\n\n  private drawGL(): void {\n    const gl = (this.canvasGL.getContext('webgl') as WebGLRenderingContext | null);\n    if (!gl) {\n      return;\n    }\n    const timelineData = this.timelineData();\n    if (!timelineData) {\n      return;\n    }\n\n    if (!this.prevTimelineData || timelineData.entryTotalTimes !== this.prevTimelineData.entryTotalTimes) {\n      this.prevTimelineData = timelineData;\n      this.setupGLGeometry();\n    }\n\n    gl.viewport(0, 0, this.canvasGL.width, this.canvasGL.height);\n\n    if (!this.vertexCount) {\n      return;\n    }\n\n    const viewportScale = [2.0 / this.boundarySpan(), -2.0 * window.devicePixelRatio / this.canvasGL.height];\n    const viewportShift = [this.minimumBoundary() - this.zeroTime(), this.chartViewport.scrollOffset()];\n    if (this.uScalingFactor) {\n      gl.uniform2fv(this.uScalingFactor, viewportScale);\n    }\n\n    if (this.uShiftVector) {\n      gl.uniform2fv(this.uShiftVector, viewportShift);\n    }\n\n    gl.drawArrays(gl.TRIANGLES, 0, this.vertexCount);\n  }\n\n  private drawGroupHeaders(width: number, height: number): void {\n    const context = (this.canvas.getContext('2d') as CanvasRenderingContext2D);\n    const top = this.chartViewport.scrollOffset();\n    const ratio = window.devicePixelRatio;\n    if (!this.rawTimelineData) {\n      return;\n    }\n\n    const groups = this.rawTimelineData.groups || [];\n    if (!groups.length) {\n      return;\n    }\n\n    const groupOffsets = this.groupOffsets;\n    if (groupOffsets === null || groupOffsets === undefined) {\n      return;\n    }\n    const lastGroupOffset = groupOffsets[groupOffsets.length - 1];\n\n    context.save();\n    context.scale(ratio, ratio);\n    context.translate(0, -top);\n    const defaultFont = '11px ' + Host.Platform.fontFamily();\n    context.font = defaultFont;\n\n    context.fillStyle = ThemeSupport.ThemeSupport.instance().getComputedValue('--color-background');\n    this.forEachGroupInViewport((offset, index, group) => {\n      const paddingHeight = group.style.padding;\n      if (paddingHeight < 5) {\n        return;\n      }\n      context.fillRect(0, offset - paddingHeight + 2, width, paddingHeight - 4);\n    });\n    if (groups.length && lastGroupOffset < top + height) {\n      context.fillRect(0, lastGroupOffset + 2, width, top + height - lastGroupOffset);\n    }\n\n    context.strokeStyle = ThemeSupport.ThemeSupport.instance().getComputedValue('--color-background-elevation-1');\n    context.beginPath();\n    this.forEachGroupInViewport((offset, index, group, isFirst) => {\n      if (isFirst || group.style.padding < 4) {\n        return;\n      }\n      hLine(offset - 2.5);\n    });\n    hLine(lastGroupOffset + 1.5);\n    context.stroke();\n\n    this.forEachGroupInViewport((offset, index, group) => {\n      if (group.style.useFirstLineForOverview) {\n        return;\n      }\n      if (!this.isGroupCollapsible(index) || group.expanded) {\n        if (!group.style.shareHeaderLine && this.isGroupFocused(index)) {\n          context.fillStyle = group.style.backgroundColor;\n          context.fillRect(0, offset, width, group.style.height);\n        }\n        return;\n      }\n      if (this.useWebGL) {\n        return;\n      }\n      let nextGroup = index + 1;\n      while (nextGroup < groups.length && groups[nextGroup].style.nestingLevel > group.style.nestingLevel) {\n        nextGroup++;\n      }\n      const endLevel = nextGroup < groups.length ? groups[nextGroup].startLevel : this.dataProvider.maxStackDepth();\n      this.drawCollapsedOverviewForGroup(group, offset, endLevel);\n    });\n\n    context.save();\n    this.forEachGroupInViewport((offset, index, group) => {\n      context.font = group.style.font;\n      if (this.isGroupCollapsible(index) && !group.expanded || group.style.shareHeaderLine) {\n        const width = this.labelWidthForGroup(context, group) + 2;\n        if (this.isGroupFocused(index)) {\n          context.fillStyle =\n              ThemeSupport.ThemeSupport.instance().getComputedValue('--selected-group-background', this.contentElement);\n        } else {\n          const parsedColor = Common.Color.Color.parse(group.style.backgroundColor);\n          if (parsedColor) {\n            context.fillStyle = (parsedColor.setAlpha(0.8).asString(null) as string);\n          }\n        }\n\n        context.fillRect(\n            this.headerLeftPadding - this.headerLabelXPadding, offset + this.headerLabelYPadding, width,\n            group.style.height - 2 * this.headerLabelYPadding);\n      }\n      context.fillStyle = group.style.color;\n      context.fillText(\n          group.name, Math.floor(this.expansionArrowIndent * (group.style.nestingLevel + 1) + this.arrowSide),\n          offset + group.style.height - this.textBaseline);\n    });\n    context.restore();\n\n    context.fillStyle = ThemeSupport.ThemeSupport.instance().getComputedValue('--color-text-secondary');\n    context.beginPath();\n    this.forEachGroupInViewport((offset, index, group) => {\n      if (this.isGroupCollapsible(index)) {\n        drawExpansionArrow.call(\n            this, this.expansionArrowIndent * (group.style.nestingLevel + 1),\n            offset + group.style.height - this.textBaseline - this.arrowSide / 2, Boolean(group.expanded));\n      }\n    });\n    context.fill();\n\n    context.strokeStyle = ThemeSupport.ThemeSupport.instance().getComputedValue('--color-details-hairline-light');\n    context.beginPath();\n    context.stroke();\n\n    this.forEachGroupInViewport((offset, index, group, isFirst, groupHeight) => {\n      if (this.isGroupFocused(index)) {\n        const lineWidth = 2;\n        const bracketLength = 10;\n        context.fillStyle =\n            ThemeSupport.ThemeSupport.instance().getComputedValue('--selected-group-border', this.contentElement);\n        context.fillRect(0, offset - lineWidth, lineWidth, groupHeight - group.style.padding + 2 * lineWidth);\n        context.fillRect(0, offset - lineWidth, bracketLength, lineWidth);\n        context.fillRect(0, offset + groupHeight - group.style.padding, bracketLength, lineWidth);\n      }\n    });\n\n    context.restore();\n\n    function hLine(y: number): void {\n      context.moveTo(0, y);\n      context.lineTo(width, y);\n    }\n\n    function drawExpansionArrow(this: FlameChart, x: number, y: number, expanded: boolean): void {\n      const arrowHeight = this.arrowSide * Math.sqrt(3) / 2;\n      const arrowCenterOffset = Math.round(arrowHeight / 2);\n      context.save();\n      context.translate(x, y);\n      context.rotate(expanded ? Math.PI / 2 : 0);\n      context.moveTo(-arrowCenterOffset, -this.arrowSide / 2);\n      context.lineTo(-arrowCenterOffset, this.arrowSide / 2);\n      context.lineTo(arrowHeight - arrowCenterOffset, 0);\n      context.restore();\n    }\n  }\n\n  private forEachGroup(callback: (arg0: number, arg1: number, arg2: Group, arg3: boolean, arg4: number) => void): void {\n    if (!this.rawTimelineData) {\n      return;\n    }\n    const groups = this.rawTimelineData.groups || [];\n    if (!groups.length) {\n      return;\n    }\n    const groupOffsets = this.groupOffsets;\n    if (!groupOffsets) {\n      return;\n    }\n\n    const groupStack: {\n      nestingLevel: number,\n      visible: boolean,\n    }[] = [{nestingLevel: -1, visible: true}];\n    for (let i = 0; i < groups.length; ++i) {\n      const groupTop = groupOffsets[i];\n      const group = groups[i];\n      let firstGroup = true;\n      let last: {\n        nestingLevel: number,\n        visible: boolean,\n      } = groupStack[groupStack.length - 1];\n      while (last && last.nestingLevel >= group.style.nestingLevel) {\n        groupStack.pop();\n        firstGroup = false;\n        last = groupStack[groupStack.length - 1];\n      }\n      last = groupStack[groupStack.length - 1];\n      const parentGroupVisible = last ? last.visible : false;\n      const thisGroupVisible = parentGroupVisible && (!this.isGroupCollapsible(i) || group.expanded);\n      groupStack.push({nestingLevel: group.style.nestingLevel, visible: Boolean(thisGroupVisible)});\n      const nextOffset = i === groups.length - 1 ? groupOffsets[i + 1] + group.style.padding : groupOffsets[i + 1];\n      if (!parentGroupVisible) {\n        continue;\n      }\n      callback(groupTop, i, group, firstGroup, nextOffset - groupTop);\n    }\n  }\n\n  private forEachGroupInViewport(\n      callback: (arg0: number, arg1: number, arg2: Group, arg3: boolean, arg4: number) => void): void {\n    const top = this.chartViewport.scrollOffset();\n    this.forEachGroup((groupTop, index, group, firstGroup, height) => {\n      if (groupTop - group.style.padding > top + this.offsetHeight) {\n        return;\n      }\n      if (groupTop + height < top) {\n        return;\n      }\n      callback(groupTop, index, group, firstGroup, height);\n    });\n  }\n\n  private labelWidthForGroup(context: CanvasRenderingContext2D, group: Group): number {\n    return UI.UIUtils.measureTextWidth(context, group.name) +\n        this.expansionArrowIndent * (group.style.nestingLevel + 1) + 2 * this.headerLabelXPadding;\n  }\n\n  private drawCollapsedOverviewForGroup(group: Group, y: number, endLevel: number): void {\n    const range = new Common.SegmentedRange.SegmentedRange<string>(mergeCallback);\n    const timeWindowLeft = this.chartViewport.windowLeftTime();\n    const timeWindowRight = this.chartViewport.windowRightTime();\n    const context = (this.canvas.getContext('2d') as CanvasRenderingContext2D);\n    const barHeight = group.style.height;\n    if (!this.rawTimelineData) {\n      return;\n    }\n    const entryStartTimes = this.rawTimelineData.entryStartTimes;\n    const entryTotalTimes = this.rawTimelineData.entryTotalTimes;\n    const timeToPixel = this.chartViewport.timeToPixel();\n\n    for (let level = group.startLevel; level < endLevel; ++level) {\n      const levelIndexes: number[] = this.timelineLevels ? this.timelineLevels[level] : [];\n      const rightIndexOnLevel =\n          Platform.ArrayUtilities.lowerBound(\n              levelIndexes, timeWindowRight, (time, entryIndex) => time - entryStartTimes[entryIndex]) -\n          1;\n      let lastDrawOffset: number = Infinity;\n\n      for (let entryIndexOnLevel = rightIndexOnLevel; entryIndexOnLevel >= 0; --entryIndexOnLevel) {\n        const entryIndex = levelIndexes[entryIndexOnLevel];\n        const entryStartTime = entryStartTimes[entryIndex];\n        const barX = this.timeToPositionClipped(entryStartTime);\n        const entryEndTime = entryStartTime + entryTotalTimes[entryIndex];\n        if (isNaN(entryEndTime) || barX >= lastDrawOffset) {\n          continue;\n        }\n        if (entryEndTime <= timeWindowLeft) {\n          break;\n        }\n        lastDrawOffset = barX;\n        const color = this.entryColorsCache ? this.entryColorsCache[entryIndex] : '';\n        const endBarX = this.timeToPositionClipped(entryEndTime);\n        if (group.style.useDecoratorsForOverview && this.dataProvider.forceDecoration(entryIndex)) {\n          const unclippedBarX = this.chartViewport.timeToPosition(entryStartTime);\n          const barWidth = endBarX - barX;\n          context.beginPath();\n          context.fillStyle = color;\n          context.fillRect(barX, y, barWidth, barHeight - 1);\n          this.dataProvider.decorateEntry(\n              entryIndex, context, '', barX, y, barWidth, barHeight, unclippedBarX, timeToPixel);\n          continue;\n        }\n        range.append(new Common.SegmentedRange.Segment(barX, endBarX, color));\n      }\n    }\n\n    const segments = range.segments().slice().sort((a, b) => a.data.localeCompare(b.data));\n    let lastColor;\n    context.beginPath();\n    for (let i = 0; i < segments.length; ++i) {\n      const segment = segments[i];\n      if (lastColor !== segments[i].data) {\n        context.fill();\n        context.beginPath();\n        lastColor = segments[i].data;\n        context.fillStyle = lastColor;\n      }\n      context.rect(segment.begin, y, segment.end - segment.begin, barHeight);\n    }\n    context.fill();\n\n    function mergeCallback<T>(a: Common.SegmentedRange.Segment<T>, b: Common.SegmentedRange.Segment<T>):\n        Common.SegmentedRange.Segment<T>|null {\n      return a.data === b.data && a.end + 0.4 > b.end ? a : null;\n    }\n  }\n\n  private drawFlowEvents(context: CanvasRenderingContext2D, _width: number, _height: number): void {\n    context.save();\n    const ratio = window.devicePixelRatio;\n    const top = this.chartViewport.scrollOffset();\n    const arrowWidth = 6;\n    context.scale(ratio, ratio);\n    context.translate(0, -top);\n\n    context.fillStyle = '#7f5050';\n    context.strokeStyle = '#7f5050';\n    const td = this.timelineData();\n    if (!td) {\n      return;\n    }\n\n    const endIndex = Platform.ArrayUtilities.lowerBound(\n        td.flowStartTimes, this.chartViewport.windowRightTime(), Platform.ArrayUtilities.DEFAULT_COMPARATOR);\n\n    context.lineWidth = 0.5;\n    for (let i = 0; i < endIndex; ++i) {\n      if (!td.flowEndTimes[i] || td.flowEndTimes[i] < this.chartViewport.windowLeftTime()) {\n        continue;\n      }\n      const startX = this.chartViewport.timeToPosition(td.flowStartTimes[i]);\n      const endX = this.chartViewport.timeToPosition(td.flowEndTimes[i]);\n      const startLevel = td.flowStartLevels[i];\n      const endLevel = td.flowEndLevels[i];\n      const startY = this.levelToOffset(startLevel) + this.levelHeight(startLevel) / 2;\n      const endY = this.levelToOffset(endLevel) + this.levelHeight(endLevel) / 2;\n\n      const segment = Math.min((endX - startX) / 4, 40);\n      const distanceTime = td.flowEndTimes[i] - td.flowStartTimes[i];\n      const distanceY = (endY - startY) / 10;\n      const spread = 30;\n      const lineY = distanceTime < 1 ? startY : spread + Math.max(0, startY + distanceY * (i % spread));\n\n      const p = [];\n      p.push({x: startX, y: startY});\n      p.push({x: startX + arrowWidth, y: startY});\n      p.push({x: startX + segment + 2 * arrowWidth, y: startY});\n      p.push({x: startX + segment, y: lineY});\n      p.push({x: startX + segment * 2, y: lineY});\n      p.push({x: endX - segment * 2, y: lineY});\n      p.push({x: endX - segment, y: lineY});\n      p.push({x: endX - segment - 2 * arrowWidth, y: endY});\n      p.push({x: endX - arrowWidth, y: endY});\n\n      context.beginPath();\n      context.moveTo(p[0].x, p[0].y);\n      context.lineTo(p[1].x, p[1].y);\n      context.bezierCurveTo(p[2].x, p[2].y, p[3].x, p[3].y, p[4].x, p[4].y);\n      context.lineTo(p[5].x, p[5].y);\n      context.bezierCurveTo(p[6].x, p[6].y, p[7].x, p[7].y, p[8].x, p[8].y);\n      context.stroke();\n\n      context.beginPath();\n      context.arc(startX, startY, 2, -Math.PI / 2, Math.PI / 2, false);\n      context.fill();\n\n      context.beginPath();\n      context.moveTo(endX, endY);\n      context.lineTo(endX - arrowWidth, endY - 3);\n      context.lineTo(endX - arrowWidth, endY + 3);\n      context.fill();\n    }\n    context.restore();\n  }\n\n  private drawMarkers(): void {\n    const timelineData = this.timelineData();\n    if (!timelineData) {\n      return;\n    }\n    const markers = timelineData.markers;\n    const left = this.markerIndexBeforeTime(this.minimumBoundary());\n    const rightBoundary = this.maximumBoundary();\n    const timeToPixel = this.chartViewport.timeToPixel();\n\n    const context = (this.canvas.getContext('2d') as CanvasRenderingContext2D);\n    context.save();\n    const ratio = window.devicePixelRatio;\n    context.scale(ratio, ratio);\n    context.translate(0, 3);\n    const height = HeaderHeight - 1;\n    for (let i = left; i < markers.length; i++) {\n      const timestamp = markers[i].startTime();\n      if (timestamp > rightBoundary) {\n        break;\n      }\n      markers[i].draw(context, this.chartViewport.timeToPosition(timestamp), height, timeToPixel);\n    }\n    context.restore();\n  }\n\n  private updateMarkerHighlight(): void {\n    const element = this.markerHighlighElement;\n    if (element.parentElement) {\n      element.remove();\n    }\n    const markerIndex = this.highlightedMarkerIndex;\n    if (markerIndex === -1) {\n      return;\n    }\n    const timelineData = this.timelineData();\n    if (!timelineData) {\n      return;\n    }\n    const marker = timelineData.markers[markerIndex];\n    const barX = this.timeToPositionClipped(marker.startTime());\n    UI.Tooltip.Tooltip.install(element, marker.title() || '');\n    const style = element.style;\n    style.left = barX + 'px';\n    style.backgroundColor = marker.color();\n    this.viewportElement.appendChild(element);\n  }\n\n  private processTimelineData(timelineData: TimelineData|null): void {\n    if (!timelineData) {\n      this.timelineLevels = null;\n      this.visibleLevelOffsets = null;\n      this.visibleLevels = null;\n      this.groupOffsets = null;\n      this.rawTimelineData = null;\n      this.forceDecorationCache = null;\n      this.entryColorsCache = null;\n      this.rawTimelineDataLength = 0;\n      this.selectedGroup = -1;\n      this.keyboardFocusedGroup = -1;\n      this.flameChartDelegate.updateSelectedGroup(this, null);\n      return;\n    }\n\n    this.rawTimelineData = timelineData;\n    this.rawTimelineDataLength = timelineData.entryStartTimes.length;\n    this.forceDecorationCache = new Int8Array(this.rawTimelineDataLength);\n    this.entryColorsCache = new Array(this.rawTimelineDataLength);\n    for (let i = 0; i < this.rawTimelineDataLength; ++i) {\n      this.forceDecorationCache[i] = this.dataProvider.forceDecoration(i) ? 1 : 0;\n      this.entryColorsCache[i] = this.dataProvider.entryColor(i);\n    }\n\n    const entryCounters = new Uint32Array(this.dataProvider.maxStackDepth() + 1);\n    for (let i = 0; i < timelineData.entryLevels.length; ++i) {\n      ++entryCounters[timelineData.entryLevels[i]];\n    }\n    const levelIndexes = new Array(entryCounters.length);\n    for (let i = 0; i < levelIndexes.length; ++i) {\n      levelIndexes[i] = new Uint32Array(entryCounters[i]);\n      entryCounters[i] = 0;\n    }\n\n    for (let i = 0; i < timelineData.entryLevels.length; ++i) {\n      const level = timelineData.entryLevels[i];\n      levelIndexes[level][entryCounters[level]++] = i;\n    }\n    this.timelineLevels = levelIndexes;\n    const groups = this.rawTimelineData.groups || [];\n    for (let i = 0; i < groups.length; ++i) {\n      const expanded = this.groupExpansionState[groups[i].name];\n      if (expanded !== undefined) {\n        groups[i].expanded = expanded;\n      }\n    }\n    this.updateLevelPositions();\n    this.updateHeight();\n\n    this.selectedGroup = timelineData.selectedGroup ? groups.indexOf(timelineData.selectedGroup) : -1;\n    this.keyboardFocusedGroup = this.selectedGroup;\n    this.flameChartDelegate.updateSelectedGroup(this, timelineData.selectedGroup);\n  }\n\n  private updateLevelPositions(): void {\n    const levelCount = this.dataProvider.maxStackDepth();\n    const groups = this.rawTimelineData ? (this.rawTimelineData.groups || []) : [];\n    this.visibleLevelOffsets = new Uint32Array(levelCount + 1);\n    this.visibleLevelHeights = new Uint32Array(levelCount);\n    this.visibleLevels = new Uint16Array(levelCount);\n    this.groupOffsets = new Uint32Array(groups.length + 1);\n\n    let groupIndex = -1;\n    let currentOffset = this.rulerEnabled ? HeaderHeight + 2 : 2;\n    let visible = true;\n    const groupStack: {\n      nestingLevel: number,\n      visible: boolean,\n    }[] = [{nestingLevel: -1, visible: true}];\n    const lastGroupLevel =\n        Math.max(levelCount, groups.length ? (groups[groups.length - 1] as Group).startLevel + 1 : 0);\n    let level;\n    for (level = 0; level < lastGroupLevel; ++level) {\n      let parentGroupIsVisible = true;\n      let style;\n      while (groupIndex < groups.length - 1 && level === groups[groupIndex + 1].startLevel) {\n        ++groupIndex;\n        style = groups[groupIndex].style;\n        let nextLevel = true;\n        let last: {\n          nestingLevel: number,\n          visible: boolean,\n        } = groupStack[groupStack.length - 1];\n        while (last && last.nestingLevel >= style.nestingLevel) {\n          groupStack.pop();\n          nextLevel = false;\n          last = groupStack[groupStack.length - 1];\n        }\n        const thisGroupIsVisible =\n            groupIndex >= 0 && this.isGroupCollapsible(groupIndex) ? groups[groupIndex].expanded : true;\n\n        last = groupStack[groupStack.length - 1];\n        parentGroupIsVisible = last ? last.visible : false;\n        visible = Boolean(thisGroupIsVisible) && parentGroupIsVisible;\n        groupStack.push({nestingLevel: style.nestingLevel, visible: visible});\n        if (parentGroupIsVisible) {\n          currentOffset += nextLevel ? 0 : style.padding;\n        }\n        this.groupOffsets[groupIndex] = currentOffset;\n        if (parentGroupIsVisible && !style.shareHeaderLine) {\n          currentOffset += style.height;\n        }\n      }\n      if (level >= levelCount) {\n        continue;\n      }\n      const isFirstOnLevel = groupIndex >= 0 && level === groups[groupIndex].startLevel;\n      const thisLevelIsVisible =\n          parentGroupIsVisible && (visible || isFirstOnLevel && groups[groupIndex].style.useFirstLineForOverview);\n      let height;\n      if (groupIndex >= 0) {\n        const group = groups[groupIndex];\n        const styleB = group.style;\n        height = isFirstOnLevel && !styleB.shareHeaderLine || (styleB.collapsible && !group.expanded) ?\n            styleB.height :\n            (styleB.itemsHeight || this.barHeight);\n      } else {\n        height = this.barHeight;\n      }\n      this.visibleLevels[level] = thisLevelIsVisible ? 1 : 0;\n      this.visibleLevelOffsets[level] = currentOffset;\n      this.visibleLevelHeights[level] = height;\n      if (thisLevelIsVisible || (parentGroupIsVisible && style && style.shareHeaderLine && isFirstOnLevel)) {\n        currentOffset += this.visibleLevelHeights[level];\n      }\n    }\n    if (groupIndex >= 0) {\n      this.groupOffsets[groupIndex + 1] = currentOffset;\n    }\n    this.visibleLevelOffsets[level] = currentOffset;\n    if (this.useWebGL) {\n      this.setupGLGeometry();\n    }\n  }\n\n  private isGroupCollapsible(index: number): boolean|undefined {\n    if (!this.rawTimelineData) {\n      return;\n    }\n\n    const groups = this.rawTimelineData.groups || [];\n    const style = groups[index].style;\n    if (!style.shareHeaderLine || !style.collapsible) {\n      return Boolean(style.collapsible);\n    }\n    const isLastGroup = index + 1 >= groups.length;\n    if (!isLastGroup && groups[index + 1].style.nestingLevel > style.nestingLevel) {\n      return true;\n    }\n    const nextGroupLevel = isLastGroup ? this.dataProvider.maxStackDepth() : groups[index + 1].startLevel;\n    if (nextGroupLevel !== groups[index].startLevel + 1) {\n      return true;\n    }\n    // For groups that only have one line and share header line, pretend these are not collapsible\n    // unless the itemsHeight does not match the headerHeight\n    return style.height !== style.itemsHeight;\n  }\n\n  setSelectedEntry(entryIndex: number): void {\n    if (this.selectedEntryIndex === entryIndex) {\n      return;\n    }\n    if (entryIndex !== -1) {\n      this.chartViewport.hideRangeSelection();\n    }\n    this.selectedEntryIndex = entryIndex;\n    this.revealEntry(entryIndex);\n    this.updateElementPosition(this.selectedElement, this.selectedEntryIndex);\n  }\n\n  private updateElementPosition(element: Element, entryIndex: number): void {\n    const elementMinWidthPx = 2;\n    element.classList.add('hidden');\n    if (entryIndex === -1) {\n      return;\n    }\n    const timelineData = this.timelineData();\n    if (!timelineData) {\n      return;\n    }\n\n    const startTime = timelineData.entryStartTimes[entryIndex];\n    const duration = timelineData.entryTotalTimes[entryIndex];\n    let barX = 0;\n    let barWidth = 0;\n    let visible = true;\n    if (Number.isNaN(duration)) {\n      const position = this.markerPositions.get(entryIndex);\n      if (position) {\n        barX = position.x;\n        barWidth = position.width;\n      } else {\n        visible = false;\n      }\n    } else {\n      barX = this.chartViewport.timeToPosition(startTime);\n      barWidth = duration * this.chartViewport.timeToPixel();\n    }\n    if (barX + barWidth <= 0 || barX >= this.offsetWidth) {\n      return;\n    }\n    const barCenter = barX + barWidth / 2;\n    barWidth = Math.max(barWidth, elementMinWidthPx);\n    barX = barCenter - barWidth / 2;\n    const entryLevel = timelineData.entryLevels[entryIndex];\n    const barY = this.levelToOffset(entryLevel) - this.chartViewport.scrollOffset();\n    const barHeight = this.levelHeight(entryLevel);\n    const style = (element as HTMLElement).style;\n    style.left = barX + 'px';\n    style.top = barY + 'px';\n    style.width = barWidth + 'px';\n    style.height = barHeight - 1 + 'px';\n    element.classList.toggle('hidden', !visible);\n    this.viewportElement.appendChild(element);\n  }\n\n  private timeToPositionClipped(time: number): number {\n    return Platform.NumberUtilities.clamp(this.chartViewport.timeToPosition(time), 0, this.offsetWidth);\n  }\n\n  private levelToOffset(level: number): number {\n    if (!this.visibleLevelOffsets) {\n      throw new Error('No visible level offsets');\n    }\n    return this.visibleLevelOffsets[level];\n  }\n\n  private levelHeight(level: number): number {\n    if (!this.visibleLevelHeights) {\n      throw new Error('No visible level heights');\n    }\n    return this.visibleLevelHeights[level];\n  }\n\n  private updateBoundaries(): void {\n    this.totalTime = this.dataProvider.totalTime();\n    this.minimumBoundaryInternal = this.dataProvider.minimumBoundary();\n    this.chartViewport.setBoundaries(this.minimumBoundaryInternal, this.totalTime);\n  }\n\n  private updateHeight(): void {\n    const height = this.levelToOffset(this.dataProvider.maxStackDepth()) + 2;\n    this.chartViewport.setContentHeight(height);\n  }\n\n  onResize(): void {\n    this.scheduleUpdate();\n  }\n\n  update(): void {\n    if (!this.timelineData()) {\n      return;\n    }\n    this.resetCanvas();\n    this.updateHeight();\n    this.updateBoundaries();\n    this.draw();\n    if (!this.chartViewport.isDragging()) {\n      this.updateHighlight();\n    }\n  }\n\n  reset(): void {\n    this.chartViewport.reset();\n    this.rawTimelineData = null;\n    this.rawTimelineDataLength = 0;\n    this.highlightedMarkerIndex = -1;\n    this.highlightedEntryIndex = -1;\n    this.selectedEntryIndex = -1;\n    this.textWidth = new Map();\n    this.chartViewport.scheduleUpdate();\n  }\n\n  scheduleUpdate(): void {\n    this.chartViewport.scheduleUpdate();\n  }\n\n  private enabled(): boolean {\n    return this.rawTimelineDataLength !== 0;\n  }\n\n  computePosition(time: number): number {\n    return this.chartViewport.timeToPosition(time);\n  }\n\n  formatValue(value: number, precision?: number): string {\n    return this.dataProvider.formatValue(value - this.zeroTime(), precision);\n  }\n\n  maximumBoundary(): number {\n    return this.chartViewport.windowRightTime();\n  }\n\n  minimumBoundary(): number {\n    return this.chartViewport.windowLeftTime();\n  }\n\n  zeroTime(): number {\n    return this.dataProvider.minimumBoundary();\n  }\n\n  boundarySpan(): number {\n    return this.maximumBoundary() - this.minimumBoundary();\n  }\n}\n\nexport const HeaderHeight = 15;\nexport const MinimalTimeWindowMs = 0.5;\n\nexport class TimelineData {\n  entryLevels: number[]|Uint16Array;\n  entryTotalTimes: number[]|Float32Array;\n  entryStartTimes: number[]|Float64Array;\n  groups: Group[];\n  markers: FlameChartMarker[];\n  flowStartTimes: number[];\n  flowStartLevels: number[];\n  flowEndTimes: number[];\n  flowEndLevels: number[];\n  selectedGroup: Group|null;\n  constructor(\n      entryLevels: number[]|Uint16Array, entryTotalTimes: number[]|Float32Array, entryStartTimes: number[]|Float64Array,\n      groups: Group[]|null) {\n    this.entryLevels = entryLevels;\n    this.entryTotalTimes = entryTotalTimes;\n    this.entryStartTimes = entryStartTimes;\n    this.groups = groups || [];\n    this.markers = [];\n    this.flowStartTimes = [];\n    this.flowStartLevels = [];\n    this.flowEndTimes = [];\n    this.flowEndLevels = [];\n    this.selectedGroup = null;\n  }\n}\n\nexport interface FlameChartDataProvider {\n  minimumBoundary(): number;\n\n  totalTime(): number;\n\n  formatValue(value: number, precision?: number): string;\n\n  maxStackDepth(): number;\n\n  timelineData(): TimelineData|null;\n\n  prepareHighlightedEntryInfo(entryIndex: number): Element|null;\n\n  canJumpToEntry(entryIndex: number): boolean;\n\n  entryTitle(entryIndex: number): string|null;\n\n  entryFont(entryIndex: number): string|null;\n\n  entryColor(entryIndex: number): string;\n\n  decorateEntry(\n      entryIndex: number, context: CanvasRenderingContext2D, text: string|null, barX: number, barY: number,\n      barWidth: number, barHeight: number, unclippedBarX: number, timeToPixelRatio: number): boolean;\n\n  forceDecoration(entryIndex: number): boolean;\n\n  textColor(entryIndex: number): string;\n\n  navStartTimes(): Map<string, SDK.TracingModel.Event>;\n}\n\nexport interface FlameChartMarker {\n  startTime(): number;\n  color(): string;\n  title(): string|null;\n  draw(context: CanvasRenderingContext2D, x: number, height: number, pixelsPerMillisecond: number): void;\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  CanvasFocused = 'CanvasFocused',\n  EntryInvoked = 'EntryInvoked',\n  EntrySelected = 'EntrySelected',\n  EntryHighlighted = 'EntryHighlighted',\n}\n\nexport type EventTypes = {\n  [Events.CanvasFocused]: number|void,\n  [Events.EntryInvoked]: number,\n  [Events.EntrySelected]: number,\n  [Events.EntryHighlighted]: number,\n};\n\nexport interface Group {\n  name: Common.UIString.LocalizedString;\n  startLevel: number;\n  expanded?: boolean;\n  selectable?: boolean;\n  style: {\n    height: number,\n    padding: number,\n    collapsible: boolean,\n    font: string,\n    color: string,\n    backgroundColor: string,\n    nestingLevel: number,\n    itemsHeight?: number,\n    shareHeaderLine?: boolean,\n    useFirstLineForOverview?: boolean,\n    useDecoratorsForOverview?: boolean,\n  };\n  track?: TimelineModel.TimelineModel.Track|null;\n}\nexport interface GroupStyle {\n  height: number;\n  padding: number;\n  collapsible: boolean;\n  font: string;\n  color: string;\n  backgroundColor: string;\n  nestingLevel: number;\n  itemsHeight?: number;\n  shareHeaderLine?: boolean;\n  useFirstLineForOverview?: boolean;\n  useDecoratorsForOverview?: boolean;\n}\n"]}