{"version":3,"file":"UIUtils.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/UIUtils.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2011 Google Inc.  All rights reserved.\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as DOMExtension from '../../core/dom_extension/dom_extension.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {Dialog} from './Dialog.js';\nimport {Size} from './Geometry.js';\nimport {GlassPane, PointerEventsBehavior, SizeBehavior} from './GlassPane.js';\nimport {Icon} from './Icon.js';\nimport {KeyboardShortcut} from './KeyboardShortcut.js';\nimport * as Utils from './utils/utils.js';\n\nimport type {ToolbarButton} from './Toolbar.js';\nimport {Toolbar} from './Toolbar.js';\nimport {Tooltip} from './Tooltip.js';\nimport type {TreeOutline} from './Treeoutline.js';\nimport checkboxTextLabelStyles from './checkboxTextLabel.css.legacy.js';\nimport closeButtonStyles from './closeButton.css.legacy.js';\nimport confirmDialogStyles from './confirmDialog.css.legacy.js';\nimport inlineButtonStyles from './inlineButton.css.legacy.js';\nimport radioButtonStyles from './radioButton.css.legacy.js';\nimport sliderStyles from './slider.css.legacy.js';\nimport smallBubbleStyles from './smallBubble.css.legacy.js';\n\nconst UIStrings = {\n  /**\n  *@description label to open link externally\n  */\n  openInNewTab: 'Open in new tab',\n  /**\n  *@description label to copy link address\n  */\n  copyLinkAddress: 'Copy link address',\n  /**\n  *@description label to copy file name\n  */\n  copyFileName: 'Copy file name',\n  /**\n  *@description label for the profiler control button\n  */\n  anotherProfilerIsAlreadyActive: 'Another profiler is already active',\n  /**\n  *@description Text in UIUtils\n  */\n  promiseResolvedAsync: 'Promise resolved (async)',\n  /**\n  *@description Text in UIUtils\n  */\n  promiseRejectedAsync: 'Promise rejected (async)',\n  /**\n  *@description Text in UIUtils\n  *@example {Promise} PH1\n  */\n  sAsync: '{PH1} (async)',\n  /**\n  *@description Text for the title of asynchronous function calls group in Call Stack\n  */\n  asyncCall: 'Async Call',\n  /**\n  *@description Text for the name of anonymous functions\n  */\n  anonymous: '(anonymous)',\n  /**\n  *@description Text to close something\n  */\n  close: 'Close',\n  /**\n  *@description Text on a button for message dialog\n  */\n  ok: 'OK',\n  /**\n  *@description Text to cancel something\n  */\n  cancel: 'Cancel',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/UIUtils.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport const highlightedSearchResultClassName = 'highlighted-search-result';\nexport const highlightedCurrentSearchResultClassName = 'current-search-result';\n\nexport function installDragHandle(\n    element: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null, elementDrag: (arg0: MouseEvent) => void,\n    elementDragEnd: ((arg0: MouseEvent) => void)|null, cursor: string|null, hoverCursor?: string|null,\n    startDelay?: number): void {\n  function onMouseDown(event: Event): void {\n    const dragHandler = new DragHandler();\n    const dragStart = (): void =>\n        dragHandler.elementDragStart(element, elementDragStart, elementDrag, elementDragEnd, cursor, event);\n    if (startDelay) {\n      startTimer = window.setTimeout(dragStart, startDelay);\n    } else {\n      dragStart();\n    }\n  }\n\n  function onMouseUp(): void {\n    if (startTimer) {\n      window.clearTimeout(startTimer);\n    }\n    startTimer = null;\n  }\n\n  let startTimer: number|null;\n  element.addEventListener('pointerdown', onMouseDown, false);\n  if (startDelay) {\n    element.addEventListener('pointerup', onMouseUp, false);\n  }\n  if (hoverCursor !== null) {\n    (element as HTMLElement).style.cursor = hoverCursor || cursor || '';\n  }\n}\n\nexport function elementDragStart(\n    targetElement: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null,\n    elementDrag: (arg0: MouseEvent) => void, elementDragEnd: ((arg0: MouseEvent) => void)|null, cursor: string|null,\n    event: Event): void {\n  const dragHandler = new DragHandler();\n  dragHandler.elementDragStart(targetElement, elementDragStart, elementDrag, elementDragEnd, cursor, event);\n}\n\nclass DragHandler {\n  private glassPaneInUse?: boolean;\n  private elementDraggingEventListener?: ((arg0: MouseEvent) => void|boolean);\n  private elementEndDraggingEventListener?: ((arg0: MouseEvent) => void)|null;\n  private dragEventsTargetDocument?: Document;\n  private dragEventsTargetDocumentTop?: Document;\n  private restoreCursorAfterDrag?: (() => void);\n\n  constructor() {\n    this.elementDragMove = this.elementDragMove.bind(this);\n    this.elementDragEnd = this.elementDragEnd.bind(this);\n    this.mouseOutWhileDragging = this.mouseOutWhileDragging.bind(this);\n  }\n\n  private createGlassPane(): void {\n    this.glassPaneInUse = true;\n    if (!DragHandler.glassPaneUsageCount++) {\n      DragHandler.glassPane = new GlassPane();\n      DragHandler.glassPane.setPointerEventsBehavior(PointerEventsBehavior.BlockedByGlassPane);\n      if (DragHandler.documentForMouseOut) {\n        DragHandler.glassPane.show(DragHandler.documentForMouseOut);\n      }\n    }\n  }\n\n  private disposeGlassPane(): void {\n    if (!this.glassPaneInUse) {\n      return;\n    }\n    this.glassPaneInUse = false;\n    if (--DragHandler.glassPaneUsageCount) {\n      return;\n    }\n    if (DragHandler.glassPane) {\n      DragHandler.glassPane.hide();\n      DragHandler.glassPane = null;\n    }\n    DragHandler.documentForMouseOut = null;\n    DragHandler.rootForMouseOut = null;\n  }\n\n  elementDragStart(\n      targetElement: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null,\n      elementDrag: (arg0: MouseEvent) => void|boolean, elementDragEnd: ((arg0: MouseEvent) => void)|null,\n      cursor: string|null, ev: Event): void {\n    const event = (ev as MouseEvent);\n    // Only drag upon left button. Right will likely cause a context menu. So will ctrl-click on mac.\n    if (event.button || (Host.Platform.isMac() && event.ctrlKey)) {\n      return;\n    }\n\n    if (this.elementDraggingEventListener) {\n      return;\n    }\n\n    if (elementDragStart && !elementDragStart((event as MouseEvent))) {\n      return;\n    }\n\n    const targetDocument = (event.target instanceof Node && event.target.ownerDocument) as Document;\n    this.elementDraggingEventListener = elementDrag;\n    this.elementEndDraggingEventListener = elementDragEnd;\n    console.assert(\n        (DragHandler.documentForMouseOut || targetDocument) === targetDocument, 'Dragging on multiple documents.');\n    DragHandler.documentForMouseOut = targetDocument;\n    DragHandler.rootForMouseOut = event.target instanceof Node && event.target.getRootNode() || null;\n    this.dragEventsTargetDocument = targetDocument;\n    try {\n      if (targetDocument.defaultView && targetDocument.defaultView.top) {\n        this.dragEventsTargetDocumentTop = targetDocument.defaultView.top.document;\n      }\n    } catch (e) {\n      this.dragEventsTargetDocumentTop = this.dragEventsTargetDocument;\n    }\n\n    targetDocument.addEventListener('pointermove', this.elementDragMove, true);\n    targetDocument.addEventListener('pointerup', this.elementDragEnd, true);\n    DragHandler.rootForMouseOut &&\n        DragHandler.rootForMouseOut.addEventListener('pointerout', this.mouseOutWhileDragging, {capture: true});\n    if (this.dragEventsTargetDocumentTop && targetDocument !== this.dragEventsTargetDocumentTop) {\n      this.dragEventsTargetDocumentTop.addEventListener('pointerup', this.elementDragEnd, true);\n    }\n\n    const targetHtmlElement = (targetElement as HTMLElement);\n    if (typeof cursor === 'string') {\n      this.restoreCursorAfterDrag = restoreCursor.bind(this, targetHtmlElement.style.cursor);\n      targetHtmlElement.style.cursor = cursor;\n      targetDocument.body.style.cursor = cursor;\n    }\n    function restoreCursor(this: DragHandler, oldCursor: string): void {\n      targetDocument.body.style.removeProperty('cursor');\n      targetHtmlElement.style.cursor = oldCursor;\n      this.restoreCursorAfterDrag = undefined;\n    }\n    event.preventDefault();\n  }\n\n  private mouseOutWhileDragging(): void {\n    this.unregisterMouseOutWhileDragging();\n    this.createGlassPane();\n  }\n\n  private unregisterMouseOutWhileDragging(): void {\n    if (!DragHandler.rootForMouseOut) {\n      return;\n    }\n    DragHandler.rootForMouseOut.removeEventListener('pointerout', this.mouseOutWhileDragging, {capture: true});\n  }\n\n  private unregisterDragEvents(): void {\n    if (!this.dragEventsTargetDocument) {\n      return;\n    }\n    this.dragEventsTargetDocument.removeEventListener('pointermove', this.elementDragMove, true);\n    this.dragEventsTargetDocument.removeEventListener('pointerup', this.elementDragEnd, true);\n    if (this.dragEventsTargetDocumentTop && this.dragEventsTargetDocument !== this.dragEventsTargetDocumentTop) {\n      this.dragEventsTargetDocumentTop.removeEventListener('pointerup', this.elementDragEnd, true);\n    }\n    delete this.dragEventsTargetDocument;\n    delete this.dragEventsTargetDocumentTop;\n  }\n\n  private elementDragMove(event: MouseEvent): void {\n    if (event.buttons !== 1) {\n      this.elementDragEnd(event);\n      return;\n    }\n    if (this.elementDraggingEventListener && this.elementDraggingEventListener(event)) {\n      this.cancelDragEvents(event);\n    }\n  }\n\n  private cancelDragEvents(_event: Event): void {\n    this.unregisterDragEvents();\n    this.unregisterMouseOutWhileDragging();\n\n    if (this.restoreCursorAfterDrag) {\n      this.restoreCursorAfterDrag();\n    }\n\n    this.disposeGlassPane();\n\n    delete this.elementDraggingEventListener;\n    delete this.elementEndDraggingEventListener;\n  }\n\n  private elementDragEnd(event: Event): void {\n    const elementDragEnd = this.elementEndDraggingEventListener;\n    this.cancelDragEvents((event as MouseEvent));\n    event.preventDefault();\n    if (elementDragEnd) {\n      elementDragEnd((event as MouseEvent));\n    }\n  }\n\n  private static glassPaneUsageCount = 0;\n  private static glassPane: GlassPane|null = null;\n  private static documentForMouseOut: Document|null = null;\n  private static rootForMouseOut: Node|null = null;\n}\n\nexport function isBeingEdited(node?: Node|null): boolean {\n  if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n    return false;\n  }\n  const element = (node as Element);\n  if (element.classList.contains('text-prompt') || element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n    return true;\n  }\n\n  if (!elementsBeingEdited.size) {\n    return false;\n  }\n\n  let currentElement: (Element|null)|Element = element;\n  while (currentElement) {\n    if (elementsBeingEdited.has(element)) {\n      return true;\n    }\n    currentElement = currentElement.parentElementOrShadowHost();\n  }\n  return false;\n}\n\nexport function isEditing(): boolean {\n  if (elementsBeingEdited.size) {\n    return true;\n  }\n\n  const focused = Platform.DOMUtilities.deepActiveElement(document);\n  if (!focused) {\n    return false;\n  }\n  return focused.classList.contains('text-prompt') || focused.nodeName === 'INPUT' || focused.nodeName === 'TEXTAREA' ||\n      ((focused as HTMLElement).contentEditable === 'true' ||\n       (focused as HTMLElement).contentEditable === 'plaintext-only');\n}\n\nexport function markBeingEdited(element: Element, value: boolean): boolean {\n  if (value) {\n    if (elementsBeingEdited.has(element)) {\n      return false;\n    }\n    element.classList.add('being-edited');\n    elementsBeingEdited.add(element);\n  } else {\n    if (!elementsBeingEdited.has(element)) {\n      return false;\n    }\n    element.classList.remove('being-edited');\n    elementsBeingEdited.delete(element);\n  }\n  return true;\n}\n\nconst elementsBeingEdited = new Set<Element>();\n\n// Avoids Infinity, NaN, and scientific notation (e.g. 1e20), see crbug.com/81165.\nconst numberRegex = /^(-?(?:\\d+(?:\\.\\d+)?|\\.\\d+))$/;\n\nexport const StyleValueDelimiters = ' \\xA0\\t\\n\"\\':;,/()';\n\nexport function getValueModificationDirection(event: Event): string|null {\n  let direction: 'Up'|'Down'|null = null;\n  if (event.type === 'wheel') {\n    // When shift is pressed while spinning mousewheel, delta comes as wheelDeltaX.\n    const wheelEvent = (event as WheelEvent);\n    if (wheelEvent.deltaY < 0 || wheelEvent.deltaX < 0) {\n      direction = 'Up';\n    } else if (wheelEvent.deltaY > 0 || wheelEvent.deltaX > 0) {\n      direction = 'Down';\n    }\n  } else {\n    const keyEvent = (event as KeyboardEvent);\n    if (keyEvent.key === 'ArrowUp' || keyEvent.key === 'PageUp') {\n      direction = 'Up';\n    } else if (keyEvent.key === 'ArrowDown' || keyEvent.key === 'PageDown') {\n      direction = 'Down';\n    }\n  }\n\n  return direction;\n}\n\nfunction modifiedHexValue(hexString: string, event: Event): string|null {\n  const direction = getValueModificationDirection(event);\n  if (!direction) {\n    return null;\n  }\n\n  const mouseEvent = (event as MouseEvent);\n  const number = parseInt(hexString, 16);\n  if (isNaN(number) || !isFinite(number)) {\n    return null;\n  }\n\n  const hexStrLen = hexString.length;\n  const channelLen = hexStrLen / 3;\n\n  // Colors are either rgb or rrggbb.\n  if (channelLen !== 1 && channelLen !== 2) {\n    return null;\n  }\n\n  // Precision modifier keys work with both mousewheel and up/down keys.\n  // When ctrl is pressed, increase R by 1.\n  // When shift is pressed, increase G by 1.\n  // When alt is pressed, increase B by 1.\n  // If no shortcut keys are pressed then increase hex value by 1.\n  // Keys can be pressed together to increase RGB channels. e.g trying different shades.\n  let delta = 0;\n  if (KeyboardShortcut.eventHasCtrlEquivalentKey(mouseEvent)) {\n    delta += Math.pow(16, channelLen * 2);\n  }\n  if (mouseEvent.shiftKey) {\n    delta += Math.pow(16, channelLen);\n  }\n  if (mouseEvent.altKey) {\n    delta += 1;\n  }\n  if (delta === 0) {\n    delta = 1;\n  }\n  if (direction === 'Down') {\n    delta *= -1;\n  }\n\n  // Increase hex value by 1 and clamp from 0 ... maxValue.\n  const maxValue = Math.pow(16, hexStrLen) - 1;\n  const result = Platform.NumberUtilities.clamp(number + delta, 0, maxValue);\n\n  // Ensure the result length is the same as the original hex value.\n  let resultString = result.toString(16).toUpperCase();\n  for (let i = 0, lengthDelta = hexStrLen - resultString.length; i < lengthDelta; ++i) {\n    resultString = '0' + resultString;\n  }\n  return resultString;\n}\n\nexport function modifiedFloatNumber(number: number, event: Event, modifierMultiplier?: number): number|null {\n  const direction = getValueModificationDirection(event);\n  if (!direction) {\n    return null;\n  }\n\n  const mouseEvent = (event as MouseEvent);\n\n  // Precision modifier keys work with both mousewheel and up/down keys.\n  // When ctrl is pressed, increase by 100.\n  // When shift is pressed, increase by 10.\n  // When alt is pressed, increase by 0.1.\n  // Otherwise increase by 1.\n  let delta = 1;\n  if (KeyboardShortcut.eventHasCtrlEquivalentKey(mouseEvent)) {\n    delta = 100;\n  } else if (mouseEvent.shiftKey) {\n    delta = 10;\n  } else if (mouseEvent.altKey) {\n    delta = 0.1;\n  }\n\n  if (direction === 'Down') {\n    delta *= -1;\n  }\n  if (modifierMultiplier) {\n    delta *= modifierMultiplier;\n  }\n\n  // Make the new number and constrain it to a precision of 6, this matches numbers the engine returns.\n  // Use the Number constructor to forget the fixed precision, so 1.100000 will print as 1.1.\n  const result = Number((number + delta).toFixed(6));\n  if (!String(result).match(numberRegex)) {\n    return null;\n  }\n  return result;\n}\n\nexport function createReplacementString(\n    wordString: string, event: Event,\n    customNumberHandler?: ((arg0: string, arg1: number, arg2: string) => string)): string|null {\n  let prefix;\n  let suffix;\n  let number;\n  let replacementString: string|null = null;\n  let matches = /(.*#)([\\da-fA-F]+)(.*)/.exec(wordString);\n  if (matches && matches.length) {\n    prefix = matches[1];\n    suffix = matches[3];\n    number = modifiedHexValue(matches[2], event);\n    if (number !== null) {\n      replacementString = prefix + number + suffix;\n    }\n  } else {\n    matches = /(.*?)(-?(?:\\d+(?:\\.\\d+)?|\\.\\d+))(.*)/.exec(wordString);\n    if (matches && matches.length) {\n      prefix = matches[1];\n      suffix = matches[3];\n      number = modifiedFloatNumber(parseFloat(matches[2]), event);\n      if (number !== null) {\n        replacementString =\n            customNumberHandler ? customNumberHandler(prefix, number, suffix) : prefix + number + suffix;\n      }\n    }\n  }\n  return replacementString;\n}\n\nexport function handleElementValueModifications(\n    event: Event, element: Element, finishHandler?: ((arg0: string, arg1: string) => void),\n    suggestionHandler?: ((arg0: string) => boolean),\n    customNumberHandler?: ((arg0: string, arg1: number, arg2: string) => string)): boolean {\n  const arrowKeyOrWheelEvent =\n      ((event as KeyboardEvent).key === 'ArrowUp' || (event as KeyboardEvent).key === 'ArrowDown' ||\n       event.type === 'wheel');\n  const pageKeyPressed = ((event as KeyboardEvent).key === 'PageUp' || (event as KeyboardEvent).key === 'PageDown');\n  if (!arrowKeyOrWheelEvent && !pageKeyPressed) {\n    return false;\n  }\n\n  const selection = element.getComponentSelection();\n  if (!selection || !selection.rangeCount) {\n    return false;\n  }\n\n  const selectionRange = selection.getRangeAt(0);\n  if (!selectionRange.commonAncestorContainer.isSelfOrDescendant(element)) {\n    return false;\n  }\n\n  const originalValue = element.textContent;\n  const wordRange = DOMExtension.DOMExtension.rangeOfWord(\n      selectionRange.startContainer, selectionRange.startOffset, StyleValueDelimiters, element);\n  const wordString = wordRange.toString();\n\n  if (suggestionHandler && suggestionHandler(wordString)) {\n    return false;\n  }\n\n  const replacementString = createReplacementString(wordString, event, customNumberHandler);\n\n  if (replacementString) {\n    const replacementTextNode = document.createTextNode(replacementString);\n\n    wordRange.deleteContents();\n    wordRange.insertNode(replacementTextNode);\n\n    const finalSelectionRange = document.createRange();\n    finalSelectionRange.setStart(replacementTextNode, 0);\n    finalSelectionRange.setEnd(replacementTextNode, replacementString.length);\n\n    selection.removeAllRanges();\n    selection.addRange(finalSelectionRange);\n\n    event.handled = true;\n    event.preventDefault();\n\n    if (finishHandler) {\n      finishHandler(originalValue || '', replacementString);\n    }\n\n    return true;\n  }\n  return false;\n}\n\nexport function openLinkExternallyLabel(): string {\n  return i18nString(UIStrings.openInNewTab);\n}\n\nexport function copyLinkAddressLabel(): string {\n  return i18nString(UIStrings.copyLinkAddress);\n}\n\nexport function copyFileNameLabel(): string {\n  return i18nString(UIStrings.copyFileName);\n}\n\nexport function anotherProfilerActiveLabel(): string {\n  return i18nString(UIStrings.anotherProfilerIsAlreadyActive);\n}\n\nexport function asyncStackTraceLabel(\n    description: string|undefined, previousCallFrames: {functionName: string}[]): string {\n  if (description) {\n    if (description === 'Promise.resolve') {\n      return i18nString(UIStrings.promiseResolvedAsync);\n    }\n    if (description === 'Promise.reject') {\n      return i18nString(UIStrings.promiseRejectedAsync);\n    }\n    // TODO(crbug.com/1254259): Remove the check for 'async function'\n    // once the relevant V8 inspector CL rolls into Node LTS.\n    if ((description === 'await' || description === 'async function') && previousCallFrames.length !== 0) {\n      const lastPreviousFrame = previousCallFrames[previousCallFrames.length - 1];\n      const lastPreviousFrameName = beautifyFunctionName(lastPreviousFrame.functionName);\n      description = `await in ${lastPreviousFrameName}`;\n    }\n    return i18nString(UIStrings.sAsync, {PH1: description});\n  }\n  return i18nString(UIStrings.asyncCall);\n}\n\nexport function installComponentRootStyles(element: Element): void {\n  Utils.injectCoreStyles(element);\n  element.classList.add('platform-' + Host.Platform.platform());\n\n  // Detect overlay scrollbar enable by checking for nonzero scrollbar width.\n  if (!Host.Platform.isMac() && Utils.measuredScrollbarWidth(element.ownerDocument) === 0) {\n    element.classList.add('overlay-scrollbar-enabled');\n  }\n}\n\nfunction windowFocused(document: Document, event: Event): void {\n  if (event.target instanceof Window && event.target.document.nodeType === Node.DOCUMENT_NODE) {\n    document.body.classList.remove('inactive');\n  }\n}\n\nfunction windowBlurred(document: Document, event: Event): void {\n  if (event.target instanceof Window && event.target.document.nodeType === Node.DOCUMENT_NODE) {\n    document.body.classList.add('inactive');\n  }\n}\n\nexport class ElementFocusRestorer {\n  private element: HTMLElement|null;\n  private previous: HTMLElement|null;\n  constructor(element: Element) {\n    this.element = (element as HTMLElement | null);\n    this.previous = (Platform.DOMUtilities.deepActiveElement(element.ownerDocument) as HTMLElement | null);\n    (element as HTMLElement).focus();\n  }\n\n  restore(): void {\n    if (!this.element) {\n      return;\n    }\n    if (this.element.hasFocus() && this.previous) {\n      this.previous.focus();\n    }\n    this.previous = null;\n    this.element = null;\n  }\n}\n\nexport function highlightSearchResult(\n    element: Element, offset: number, length: number, domChanges?: HighlightChange[]): Element|null {\n  const result = highlightSearchResults(element, [new TextUtils.TextRange.SourceRange(offset, length)], domChanges);\n  return result.length ? result[0] : null;\n}\n\nexport function highlightSearchResults(\n    element: Element, resultRanges: TextUtils.TextRange.SourceRange[], changes?: HighlightChange[]): Element[] {\n  return highlightRangesWithStyleClass(element, resultRanges, highlightedSearchResultClassName, changes);\n}\n\nexport function runCSSAnimationOnce(element: Element, className: string): void {\n  function animationEndCallback(): void {\n    element.classList.remove(className);\n    element.removeEventListener('webkitAnimationEnd', animationEndCallback, false);\n  }\n\n  if (element.classList.contains(className)) {\n    element.classList.remove(className);\n  }\n\n  element.addEventListener('webkitAnimationEnd', animationEndCallback, false);\n  element.classList.add(className);\n}\n\nexport function highlightRangesWithStyleClass(\n    element: Element, resultRanges: TextUtils.TextRange.SourceRange[], styleClass: string,\n    changes?: HighlightChange[]): Element[] {\n  changes = changes || [];\n  const highlightNodes: Element[] = [];\n  const textNodes = element.childTextNodes();\n  const lineText = textNodes\n                       .map(function(node) {\n                         return node.textContent;\n                       })\n                       .join('');\n  const ownerDocument = element.ownerDocument;\n\n  if (textNodes.length === 0) {\n    return highlightNodes;\n  }\n\n  const nodeRanges: TextUtils.TextRange.SourceRange[] = [];\n  let rangeEndOffset = 0;\n  for (const textNode of textNodes) {\n    const range =\n        new TextUtils.TextRange.SourceRange(rangeEndOffset, textNode.textContent ? textNode.textContent.length : 0);\n    rangeEndOffset = range.offset + range.length;\n    nodeRanges.push(range);\n  }\n\n  let startIndex = 0;\n  for (let i = 0; i < resultRanges.length; ++i) {\n    const startOffset = resultRanges[i].offset;\n    const endOffset = startOffset + resultRanges[i].length;\n\n    while (startIndex < textNodes.length &&\n           nodeRanges[startIndex].offset + nodeRanges[startIndex].length <= startOffset) {\n      startIndex++;\n    }\n    let endIndex = startIndex;\n    while (endIndex < textNodes.length && nodeRanges[endIndex].offset + nodeRanges[endIndex].length < endOffset) {\n      endIndex++;\n    }\n    if (endIndex === textNodes.length) {\n      break;\n    }\n\n    const highlightNode = ownerDocument.createElement('span');\n    highlightNode.className = styleClass;\n    highlightNode.textContent = lineText.substring(startOffset, endOffset);\n\n    const lastTextNode = textNodes[endIndex];\n    const lastText = lastTextNode.textContent || '';\n    lastTextNode.textContent = lastText.substring(endOffset - nodeRanges[endIndex].offset);\n    changes.push({\n      node: (lastTextNode as Element),\n      type: 'changed',\n      oldText: lastText,\n      newText: lastTextNode.textContent,\n      nextSibling: undefined,\n      parent: undefined,\n    });\n\n    if (startIndex === endIndex && lastTextNode.parentElement) {\n      lastTextNode.parentElement.insertBefore(highlightNode, lastTextNode);\n      changes.push({\n        node: highlightNode,\n        type: 'added',\n        nextSibling: lastTextNode,\n        parent: lastTextNode.parentElement,\n        oldText: undefined,\n        newText: undefined,\n      });\n      highlightNodes.push(highlightNode);\n\n      const prefixNode =\n          ownerDocument.createTextNode(lastText.substring(0, startOffset - nodeRanges[startIndex].offset));\n      lastTextNode.parentElement.insertBefore(prefixNode, highlightNode);\n      changes.push({\n        node: prefixNode,\n        type: 'added',\n        nextSibling: highlightNode,\n        parent: lastTextNode.parentElement,\n        oldText: undefined,\n        newText: undefined,\n      });\n    } else {\n      const firstTextNode = textNodes[startIndex];\n      const firstText = firstTextNode.textContent || '';\n      const anchorElement = firstTextNode.nextSibling;\n\n      if (firstTextNode.parentElement) {\n        firstTextNode.parentElement.insertBefore(highlightNode, anchorElement);\n        changes.push({\n          node: highlightNode,\n          type: 'added',\n          nextSibling: anchorElement || undefined,\n          parent: firstTextNode.parentElement,\n          oldText: undefined,\n          newText: undefined,\n        });\n        highlightNodes.push(highlightNode);\n      }\n\n      firstTextNode.textContent = firstText.substring(0, startOffset - nodeRanges[startIndex].offset);\n      changes.push({\n        node: (firstTextNode as Element),\n        type: 'changed',\n        oldText: firstText,\n        newText: firstTextNode.textContent,\n        nextSibling: undefined,\n        parent: undefined,\n      });\n\n      for (let j = startIndex + 1; j < endIndex; j++) {\n        const textNode = textNodes[j];\n        const text = textNode.textContent;\n        textNode.textContent = '';\n        changes.push({\n          node: (textNode as Element),\n          type: 'changed',\n          oldText: text || undefined,\n          newText: textNode.textContent,\n          nextSibling: undefined,\n          parent: undefined,\n        });\n      }\n    }\n    startIndex = endIndex;\n    nodeRanges[startIndex].offset = endOffset;\n    nodeRanges[startIndex].length = lastTextNode.textContent.length;\n  }\n  return highlightNodes;\n}\n\nexport function applyDomChanges(domChanges: HighlightChange[]): void {\n  for (let i = 0, size = domChanges.length; i < size; ++i) {\n    const entry = domChanges[i];\n    switch (entry.type) {\n      case 'added':\n        entry.parent?.insertBefore(entry.node, entry.nextSibling ?? null);\n        break;\n      case 'changed':\n        entry.node.textContent = entry.newText ?? null;\n        break;\n    }\n  }\n}\n\nexport function revertDomChanges(domChanges: HighlightChange[]): void {\n  for (let i = domChanges.length - 1; i >= 0; --i) {\n    const entry = domChanges[i];\n    switch (entry.type) {\n      case 'added':\n        entry.node.remove();\n        break;\n      case 'changed':\n        entry.node.textContent = entry.oldText ?? null;\n        break;\n    }\n  }\n}\n\nexport function measurePreferredSize(element: Element, containerElement?: Element|null): Size {\n  const oldParent = element.parentElement;\n  const oldNextSibling = element.nextSibling;\n  containerElement = containerElement || element.ownerDocument.body;\n  containerElement.appendChild(element);\n  element.positionAt(0, 0);\n  const result = element.getBoundingClientRect();\n\n  element.positionAt(undefined, undefined);\n  if (oldParent) {\n    oldParent.insertBefore(element, oldNextSibling);\n  } else {\n    element.remove();\n  }\n  return new Size(result.width, result.height);\n}\n\nclass InvokeOnceHandlers {\n  private handlers: Map<Object, Set<Function>>|null;\n  private readonly autoInvoke: boolean;\n  constructor(autoInvoke: boolean) {\n    this.handlers = null;\n    this.autoInvoke = autoInvoke;\n  }\n\n  add(object: Object, method: () => void): void {\n    if (!this.handlers) {\n      this.handlers = new Map();\n      if (this.autoInvoke) {\n        this.scheduleInvoke();\n      }\n    }\n    let methods = this.handlers.get(object);\n    if (!methods) {\n      methods = new Set();\n      this.handlers.set(object, methods);\n    }\n    methods.add(method);\n  }\n  scheduleInvoke(): void {\n    if (this.handlers) {\n      requestAnimationFrame(this.invoke.bind(this));\n    }\n  }\n\n  private invoke(): void {\n    const handlers = this.handlers;\n    this.handlers = null;\n    if (handlers) {\n      for (const [object, methods] of handlers) {\n        for (const method of methods) {\n          method.call(object);\n        }\n      }\n    }\n  }\n}\n\nlet coalescingLevel = 0;\nlet postUpdateHandlers: InvokeOnceHandlers|null = null;\n\nexport function startBatchUpdate(): void {\n  if (!coalescingLevel++) {\n    postUpdateHandlers = new InvokeOnceHandlers(false);\n  }\n}\n\nexport function endBatchUpdate(): void {\n  if (--coalescingLevel) {\n    return;\n  }\n\n  if (postUpdateHandlers) {\n    postUpdateHandlers.scheduleInvoke();\n    postUpdateHandlers = null;\n  }\n}\n\nexport function invokeOnceAfterBatchUpdate(object: Object, method: () => void): void {\n  if (!postUpdateHandlers) {\n    postUpdateHandlers = new InvokeOnceHandlers(true);\n  }\n  postUpdateHandlers.add(object, method);\n}\n\nexport function animateFunction(\n    window: Window, func: Function, params: {\n      from: number,\n      to: number,\n    }[],\n    duration: number, animationComplete?: (() => void)): () => void {\n  const start = window.performance.now();\n  let raf = window.requestAnimationFrame(animationStep);\n\n  function animationStep(timestamp: number): void {\n    const progress = Platform.NumberUtilities.clamp((timestamp - start) / duration, 0, 1);\n    func(...params.map(p => p.from + (p.to - p.from) * progress));\n    if (progress < 1) {\n      raf = window.requestAnimationFrame(animationStep);\n    } else if (animationComplete) {\n      animationComplete();\n    }\n  }\n\n  return (): void => window.cancelAnimationFrame(raf);\n}\n\nexport class LongClickController {\n  private readonly element: Element;\n  private readonly callback: (arg0: Event) => void;\n  private readonly editKey: (arg0: Event) => boolean;\n  private longClickData!: {\n    mouseUp: (arg0: Event) => void,\n    mouseDown: (arg0: Event) => void,\n    reset: () => void,\n  }|undefined;\n  private longClickInterval!: number|undefined;\n\n  constructor(\n      element: Element, callback: (arg0: Event) => void,\n      isEditKeyFunc: (arg0: Event) => boolean = (event): boolean => isEnterOrSpaceKey(event)) {\n    this.element = element;\n    this.callback = callback;\n    this.editKey = isEditKeyFunc;\n    this.enable();\n  }\n\n  reset(): void {\n    if (this.longClickInterval) {\n      clearInterval(this.longClickInterval);\n      delete this.longClickInterval;\n    }\n  }\n\n  private enable(): void {\n    if (this.longClickData) {\n      return;\n    }\n    const boundKeyDown = keyDown.bind(this);\n    const boundKeyUp = keyUp.bind(this);\n    const boundMouseDown = mouseDown.bind(this);\n    const boundMouseUp = mouseUp.bind(this);\n    const boundReset = this.reset.bind(this);\n\n    this.element.addEventListener('keydown', boundKeyDown, false);\n    this.element.addEventListener('keyup', boundKeyUp, false);\n    this.element.addEventListener('pointerdown', boundMouseDown, false);\n    this.element.addEventListener('pointerout', boundReset, false);\n    this.element.addEventListener('pointerup', boundMouseUp, false);\n    this.element.addEventListener('click', boundReset, true);\n\n    this.longClickData = {mouseUp: boundMouseUp, mouseDown: boundMouseDown, reset: boundReset};\n\n    function keyDown(this: LongClickController, e: Event): void {\n      if (this.editKey(e)) {\n        const callback = this.callback;\n        this.longClickInterval = window.setTimeout(callback.bind(null, e), LongClickController.TIME_MS);\n      }\n    }\n\n    function keyUp(this: LongClickController, e: Event): void {\n      if (this.editKey(e)) {\n        this.reset();\n      }\n    }\n\n    function mouseDown(this: LongClickController, e: Event): void {\n      if ((e as MouseEvent).which !== 1) {\n        return;\n      }\n      const callback = this.callback;\n      this.longClickInterval = window.setTimeout(callback.bind(null, e), LongClickController.TIME_MS);\n    }\n\n    function mouseUp(this: LongClickController, e: Event): void {\n      if ((e as MouseEvent).which !== 1) {\n        return;\n      }\n      this.reset();\n    }\n  }\n\n  dispose(): void {\n    if (!this.longClickData) {\n      return;\n    }\n    this.element.removeEventListener('pointerdown', this.longClickData.mouseDown, false);\n    this.element.removeEventListener('pointerout', this.longClickData.reset, false);\n    this.element.removeEventListener('pointerup', this.longClickData.mouseUp, false);\n    this.element.addEventListener('click', this.longClickData.reset, true);\n    delete this.longClickData;\n  }\n\n  static readonly TIME_MS = 200;\n}\n\nexport function initializeUIUtils(document: Document): void {\n  document.body.classList.toggle('inactive', !document.hasFocus());\n  if (document.defaultView) {\n    document.defaultView.addEventListener('focus', windowFocused.bind(undefined, document), false);\n    document.defaultView.addEventListener('blur', windowBlurred.bind(undefined, document), false);\n  }\n  document.addEventListener('focus', Utils.focusChanged.bind(undefined), true);\n\n  const body = (document.body as Element);\n  GlassPane.setContainer(body);\n}\n\nexport function beautifyFunctionName(name: string): string {\n  return name || i18nString(UIStrings.anonymous);\n}\n\nexport const createTextChild = (element: Element|DocumentFragment, text: string): Text => {\n  const textNode = element.ownerDocument.createTextNode(text);\n  element.appendChild(textNode);\n  return textNode;\n};\n\nexport const createTextChildren = (element: Element|DocumentFragment, ...childrenText: string[]): void => {\n  for (const child of childrenText) {\n    createTextChild(element, child);\n  }\n};\n\nexport function createTextButton(\n    text: string, eventHandler?: ((arg0: Event) => void), className?: string, primary?: boolean,\n    alternativeEvent?: string): HTMLButtonElement {\n  const element = document.createElement('button');\n  if (className) {\n    element.className = className;\n  }\n  element.textContent = text;\n  element.classList.add('text-button');\n  if (primary) {\n    element.classList.add('primary-button');\n  }\n  if (eventHandler) {\n    element.addEventListener(alternativeEvent || 'click', eventHandler);\n  }\n  element.type = 'button';\n  return element;\n}\n\nexport function createInput(className?: string, type?: string): HTMLInputElement {\n  const element = document.createElement('input');\n  if (className) {\n    element.className = className;\n  }\n  element.spellcheck = false;\n  element.classList.add('harmony-input');\n  if (type) {\n    element.type = type;\n  }\n  return element;\n}\n\nexport function createSelect(name: string, options: string[]|Map<string, string[]>[]|Set<string>): HTMLSelectElement {\n  const select = document.createElement('select');\n  select.classList.add('chrome-select');\n  ARIAUtils.setAccessibleName(select, name);\n  for (const option of options) {\n    if (option instanceof Map) {\n      for (const [key, value] of option) {\n        const optGroup = (select.createChild('optgroup') as HTMLOptGroupElement);\n        optGroup.label = key;\n        for (const child of value) {\n          if (typeof child === 'string') {\n            optGroup.appendChild(new Option(child, child));\n          }\n        }\n      }\n    } else if (typeof option === 'string') {\n      select.add(new Option(option, option));\n    }\n  }\n  return select;\n}\n\nexport function createLabel(title: string, className?: string, associatedControl?: Element): Element {\n  const element = document.createElement('label');\n  if (className) {\n    element.className = className;\n  }\n  element.textContent = title;\n  if (associatedControl) {\n    ARIAUtils.bindLabelToControl(element, associatedControl);\n  }\n\n  return element;\n}\n\nexport function createRadioLabel(name: string, title: string, checked?: boolean): DevToolsRadioButton {\n  const element = (document.createElement('span', {is: 'dt-radio'}) as DevToolsRadioButton);\n  element.radioElement.name = name;\n  element.radioElement.checked = Boolean(checked);\n  createTextChild(element.labelElement, title);\n  return element;\n}\n\nexport function createIconLabel(title: string, iconClass: string): HTMLElement {\n  const element = (document.createElement('span', {is: 'dt-icon-label'}) as DevToolsIconLabel);\n  element.createChild('span').textContent = title;\n  element.type = iconClass;\n  return element;\n}\n\nexport function createSlider(min: number, max: number, tabIndex: number): Element {\n  const element = (document.createElement('span', {is: 'dt-slider'}) as DevToolsSlider);\n  element.sliderElement.min = String(min);\n  element.sliderElement.max = String(max);\n  element.sliderElement.step = String(1);\n  element.sliderElement.tabIndex = tabIndex;\n  return element;\n}\n\nexport function setTitle(element: HTMLElement, title: string): void {\n  ARIAUtils.setAccessibleName(element, title);\n  Tooltip.install(element, title);\n}\n\nexport class CheckboxLabel extends HTMLSpanElement {\n  private readonly shadowRootInternal!: DocumentFragment;\n  checkboxElement!: HTMLInputElement;\n  textElement!: HTMLElement;\n\n  constructor() {\n    super();\n    CheckboxLabel.lastId = CheckboxLabel.lastId + 1;\n    const id = 'ui-checkbox-label' + CheckboxLabel.lastId;\n    this.shadowRootInternal =\n        Utils.createShadowRootWithCoreStyles(this, {cssFile: checkboxTextLabelStyles, delegatesFocus: undefined});\n    this.checkboxElement = (this.shadowRootInternal.createChild('input') as HTMLInputElement);\n    this.checkboxElement.type = 'checkbox';\n    this.checkboxElement.setAttribute('id', id);\n    this.textElement = this.shadowRootInternal.createChild('label', 'dt-checkbox-text') as HTMLElement;\n    this.textElement.setAttribute('for', id);\n    this.shadowRootInternal.createChild('slot');\n  }\n\n  static create(title?: string, checked?: boolean, subtitle?: string): CheckboxLabel {\n    if (!CheckboxLabel.constructorInternal) {\n      CheckboxLabel.constructorInternal = Utils.registerCustomElement('span', 'dt-checkbox', CheckboxLabel);\n    }\n    const element = (CheckboxLabel.constructorInternal() as CheckboxLabel);\n    element.checkboxElement.checked = Boolean(checked);\n    if (title !== undefined) {\n      element.textElement.textContent = title;\n      ARIAUtils.setAccessibleName(element.checkboxElement, title);\n      if (subtitle !== undefined) {\n        element.textElement.createChild('div', 'dt-checkbox-subtitle').textContent = subtitle;\n      }\n    }\n    return element;\n  }\n\n  set backgroundColor(color: string) {\n    this.checkboxElement.classList.add('dt-checkbox-themed');\n    this.checkboxElement.style.backgroundColor = color;\n  }\n\n  set checkColor(color: string) {\n    this.checkboxElement.classList.add('dt-checkbox-themed');\n    const stylesheet = document.createElement('style');\n    stylesheet.textContent = 'input.dt-checkbox-themed:checked:after { background-color: ' + color + '}';\n    this.shadowRootInternal.appendChild(stylesheet);\n  }\n\n  set borderColor(color: string) {\n    this.checkboxElement.classList.add('dt-checkbox-themed');\n    this.checkboxElement.style.borderColor = color;\n  }\n\n  private static lastId = 0;\n  static constructorInternal: (() => Element)|null = null;\n}\n\nexport class DevToolsIconLabel extends HTMLSpanElement {\n  private readonly iconElement: Icon;\n\n  constructor() {\n    super();\n    const root = Utils.createShadowRootWithCoreStyles(this, {\n      cssFile: undefined,\n      delegatesFocus: undefined,\n    });\n    this.iconElement = Icon.create();\n    this.iconElement.style.setProperty('margin-right', '4px');\n    root.appendChild(this.iconElement);\n    root.createChild('slot');\n  }\n\n  set type(type: string) {\n    this.iconElement.setIconType(type);\n  }\n}\n\nlet labelId = 0;\n\nexport class DevToolsRadioButton extends HTMLSpanElement {\n  radioElement: HTMLInputElement;\n  labelElement: HTMLLabelElement;\n\n  constructor() {\n    super();\n    this.radioElement = (this.createChild('input', 'dt-radio-button') as HTMLInputElement);\n    this.labelElement = (this.createChild('label') as HTMLLabelElement);\n\n    const id = 'dt-radio-button-id' + (++labelId);\n    this.radioElement.id = id;\n    this.radioElement.type = 'radio';\n    this.labelElement.htmlFor = id;\n    const root = Utils.createShadowRootWithCoreStyles(this, {cssFile: radioButtonStyles, delegatesFocus: undefined});\n    root.createChild('slot');\n    this.addEventListener('click', this.radioClickHandler.bind(this), false);\n  }\n\n  radioClickHandler(): void {\n    if (this.radioElement.checked || this.radioElement.disabled) {\n      return;\n    }\n    this.radioElement.checked = true;\n    this.radioElement.dispatchEvent(new Event('change'));\n  }\n}\n\nUtils.registerCustomElement('span', 'dt-radio', DevToolsRadioButton);\nUtils.registerCustomElement('span', 'dt-icon-label', DevToolsIconLabel);\n\nexport class DevToolsSlider extends HTMLSpanElement {\n  sliderElement: HTMLInputElement;\n\n  constructor() {\n    super();\n    const root = Utils.createShadowRootWithCoreStyles(this, {cssFile: sliderStyles, delegatesFocus: undefined});\n    this.sliderElement = document.createElement('input');\n    this.sliderElement.classList.add('dt-range-input');\n    this.sliderElement.type = 'range';\n    root.appendChild(this.sliderElement);\n  }\n\n  set value(amount: number) {\n    this.sliderElement.value = String(amount);\n  }\n\n  get value(): number {\n    return Number(this.sliderElement.value);\n  }\n}\n\nUtils.registerCustomElement('span', 'dt-slider', DevToolsSlider);\n\nexport class DevToolsSmallBubble extends HTMLSpanElement {\n  private textElement: Element;\n\n  constructor() {\n    super();\n    const root = Utils.createShadowRootWithCoreStyles(this, {cssFile: smallBubbleStyles, delegatesFocus: undefined});\n    this.textElement = root.createChild('div');\n    this.textElement.className = 'info';\n    this.textElement.createChild('slot');\n  }\n\n  set type(type: string) {\n    this.textElement.className = type;\n  }\n}\n\nUtils.registerCustomElement('span', 'dt-small-bubble', DevToolsSmallBubble);\n\nexport class DevToolsCloseButton extends HTMLDivElement {\n  private buttonElement: HTMLElement;\n  private readonly hoverIcon: Icon;\n  private readonly activeIcon: Icon;\n\n  constructor() {\n    super();\n    const root = Utils.createShadowRootWithCoreStyles(this, {cssFile: closeButtonStyles, delegatesFocus: undefined});\n    this.buttonElement = (root.createChild('div', 'close-button') as HTMLElement);\n    Tooltip.install(this.buttonElement, i18nString(UIStrings.close));\n    ARIAUtils.setAccessibleName(this.buttonElement, i18nString(UIStrings.close));\n    ARIAUtils.markAsButton(this.buttonElement);\n    const regularIcon = Icon.create('smallicon-cross', 'default-icon');\n    this.hoverIcon = Icon.create('mediumicon-red-cross-hover', 'hover-icon');\n    this.activeIcon = Icon.create('mediumicon-red-cross-active', 'active-icon');\n    this.buttonElement.appendChild(regularIcon);\n    this.buttonElement.appendChild(this.hoverIcon);\n    this.buttonElement.appendChild(this.activeIcon);\n  }\n\n  set gray(gray: boolean) {\n    if (gray) {\n      this.hoverIcon.setIconType('mediumicon-gray-cross-hover');\n      this.activeIcon.setIconType('mediumicon-gray-cross-active');\n    } else {\n      this.hoverIcon.setIconType('mediumicon-red-cross-hover');\n      this.activeIcon.setIconType('mediumicon-red-cross-active');\n    }\n  }\n\n  setAccessibleName(name: string): void {\n    ARIAUtils.setAccessibleName(this.buttonElement, name);\n  }\n\n  setTabbable(tabbable: boolean): void {\n    if (tabbable) {\n      this.buttonElement.tabIndex = 0;\n    } else {\n      this.buttonElement.tabIndex = -1;\n    }\n  }\n}\n\nUtils.registerCustomElement('div', 'dt-close-button', DevToolsCloseButton);\n\nexport function bindInput(\n    input: HTMLInputElement, apply: (arg0: string) => void, validate: (arg0: string) => {\n      valid: boolean,\n      errorMessage: (string | undefined),\n    },\n    numeric: boolean, modifierMultiplier?: number): (arg0: string) => void {\n  input.addEventListener('change', onChange, false);\n  input.addEventListener('input', onInput, false);\n  input.addEventListener('keydown', onKeyDown, false);\n  input.addEventListener('focus', input.select.bind(input), false);\n\n  function onInput(): void {\n    input.classList.toggle('error-input', !validate(input.value));\n  }\n\n  function onChange(): void {\n    const {valid} = validate(input.value);\n    input.classList.toggle('error-input', !valid);\n    if (valid) {\n      apply(input.value);\n    }\n  }\n\n  function onKeyDown(event: KeyboardEvent): void {\n    if (event.key === 'Enter') {\n      const {valid} = validate(input.value);\n      if (valid) {\n        apply(input.value);\n      }\n      event.preventDefault();\n      return;\n    }\n\n    if (!numeric) {\n      return;\n    }\n\n    const value = modifiedFloatNumber(parseFloat(input.value), event, modifierMultiplier);\n    const stringValue = value ? String(value) : '';\n    const {valid} = validate(stringValue);\n    if (!valid || !value) {\n      return;\n    }\n\n    input.value = stringValue;\n    apply(input.value);\n    event.preventDefault();\n  }\n\n  function setValue(value: string): void {\n    if (value === input.value) {\n      return;\n    }\n    const {valid} = validate(value);\n    input.classList.toggle('error-input', !valid);\n    input.value = value;\n  }\n\n  return setValue;\n}\n\nexport function trimText(\n    context: CanvasRenderingContext2D, text: string, maxWidth: number,\n    trimFunction: (arg0: string, arg1: number) => string): string {\n  const maxLength = 200;\n  if (maxWidth <= 10) {\n    return '';\n  }\n  if (text.length > maxLength) {\n    text = trimFunction(text, maxLength);\n  }\n  const textWidth = measureTextWidth(context, text);\n  if (textWidth <= maxWidth) {\n    return text;\n  }\n\n  let l = 0;\n  let r: number = text.length;\n  let lv = 0;\n  let rv: number = textWidth;\n  while (l < r && lv !== rv && lv !== maxWidth) {\n    const m = Math.ceil(l + (r - l) * (maxWidth - lv) / (rv - lv));\n    const mv = measureTextWidth(context, trimFunction(text, m));\n    if (mv <= maxWidth) {\n      l = m;\n      lv = mv;\n    } else {\n      r = m - 1;\n      rv = mv;\n    }\n  }\n  text = trimFunction(text, l);\n  return text !== '…' ? text : '';\n}\n\nexport function trimTextMiddle(context: CanvasRenderingContext2D, text: string, maxWidth: number): string {\n  return trimText(context, text, maxWidth, (text, width) => Platform.StringUtilities.trimMiddle(text, width));\n}\n\nexport function trimTextEnd(context: CanvasRenderingContext2D, text: string, maxWidth: number): string {\n  return trimText(context, text, maxWidth, (text, width) => Platform.StringUtilities.trimEndWithMaxLength(text, width));\n}\n\nexport function measureTextWidth(context: CanvasRenderingContext2D, text: string): number {\n  const maxCacheableLength = 200;\n  if (text.length > maxCacheableLength) {\n    return context.measureText(text).width;\n  }\n\n  if (!measureTextWidthCache) {\n    measureTextWidthCache = new Map();\n  }\n  const font = context.font;\n  let textWidths = measureTextWidthCache.get(font);\n  if (!textWidths) {\n    textWidths = new Map();\n    measureTextWidthCache.set(font, textWidths);\n  }\n  let width = textWidths.get(text);\n  if (!width) {\n    width = context.measureText(text).width;\n    textWidths.set(text, width);\n  }\n  return width;\n}\n\nlet measureTextWidthCache: Map<string, Map<string, number>>|null = null;\n\n/**\n * Adds a 'utm_source=devtools' as query parameter to the url.\n */\nexport function addReferrerToURL(url: Platform.DevToolsPath.UrlString): Platform.DevToolsPath.UrlString {\n  if (/(\\?|&)utm_source=devtools/.test(url)) {\n    return url;\n  }\n  if (url.indexOf('?') === -1) {\n    // If the URL does not contain a query, add the referrer query after path\n    // and before (potential) anchor.\n    return url.replace(/^([^#]*)(#.*)?$/g, '$1?utm_source=devtools$2') as Platform.DevToolsPath.UrlString;\n  }\n  // If the URL already contains a query, add the referrer query after the last query\n  // and before (potential) anchor.\n  return url.replace(/^([^#]*)(#.*)?$/g, '$1&utm_source=devtools$2') as Platform.DevToolsPath.UrlString;\n}\n\n/**\n * We want to add a referrer query param to every request to\n * 'web.dev' or 'developers.google.com'.\n */\nexport function addReferrerToURLIfNecessary(url: Platform.DevToolsPath.UrlString): Platform.DevToolsPath.UrlString {\n  if (/(\\/\\/developers.google.com\\/|\\/\\/web.dev\\/|\\/\\/developer.chrome.com\\/)/.test(url)) {\n    return addReferrerToURL(url);\n  }\n  return url;\n}\n\nexport function loadImage(url: string): Promise<HTMLImageElement|null> {\n  return new Promise(fulfill => {\n    const image = new Image();\n    image.addEventListener('load', () => fulfill(image));\n    image.addEventListener('error', () => fulfill(null));\n    image.src = url;\n  });\n}\n\nexport function loadImageFromData(data: string|null): Promise<HTMLImageElement|null> {\n  return data ? loadImage('data:image/jpg;base64,' + data) : Promise.resolve(null);\n}\n\nexport function createFileSelectorElement(callback: (arg0: File) => void): HTMLInputElement {\n  const fileSelectorElement = document.createElement('input');\n  fileSelectorElement.type = 'file';\n  fileSelectorElement.style.display = 'none';\n  fileSelectorElement.tabIndex = -1;\n  fileSelectorElement.onchange = (): void => {\n    if (fileSelectorElement.files) {\n      callback(fileSelectorElement.files[0]);\n    }\n  };\n\n  return fileSelectorElement;\n}\n\nexport const MaxLengthForDisplayedURLs = 150;\n\nexport class MessageDialog {\n  static async show(message: string, where?: Element | Document): Promise<void> {\n    const dialog = new Dialog();\n    dialog.setSizeBehavior(SizeBehavior.MeasureContent);\n    dialog.setDimmed(true);\n    const shadowRoot = Utils.createShadowRootWithCoreStyles(\n        dialog.contentElement, {cssFile: confirmDialogStyles, delegatesFocus: undefined});\n    const content = shadowRoot.createChild('div', 'widget');\n    await new Promise(resolve => {\n      const okButton = createTextButton(i18nString(UIStrings.ok), resolve, '', true);\n      content.createChild('div', 'message').createChild('span').textContent = message;\n      content.createChild('div', 'button').appendChild(okButton);\n      dialog.setOutsideClickCallback(event => {\n        event.consume();\n        resolve(undefined);\n      });\n      dialog.show(where);\n      okButton.focus();\n    });\n    dialog.hide();\n  }\n}\n\nexport class ConfirmDialog {\n  static async show(message: string, where?: Element | Document): Promise<boolean> {\n    const dialog = new Dialog();\n    dialog.setSizeBehavior(SizeBehavior.MeasureContent);\n    dialog.setDimmed(true);\n    ARIAUtils.setAccessibleName(dialog.contentElement, message);\n    const shadowRoot = Utils.createShadowRootWithCoreStyles(\n        dialog.contentElement, {cssFile: confirmDialogStyles, delegatesFocus: undefined});\n    const content = shadowRoot.createChild('div', 'widget');\n    content.createChild('div', 'message').createChild('span').textContent = message;\n    const buttonsBar = content.createChild('div', 'button');\n    const result = await new Promise<boolean>(resolve => {\n      const okButton = createTextButton(\n          /* text= */ i18nString(UIStrings.ok), /* clickHandler= */ () => resolve(true), /* className= */ '',\n          /* primary= */ true);\n      buttonsBar.appendChild(okButton);\n      buttonsBar.appendChild(createTextButton(i18nString(UIStrings.cancel), () => resolve(false)));\n      dialog.setOutsideClickCallback(event => {\n        event.consume();\n        resolve(false);\n      });\n      dialog.show(where);\n      okButton.focus();\n    });\n    dialog.hide();\n    return result;\n  }\n}\n\nexport function createInlineButton(toolbarButton: ToolbarButton): Element {\n  const element = document.createElement('span');\n  const shadowRoot =\n      Utils.createShadowRootWithCoreStyles(element, {cssFile: inlineButtonStyles, delegatesFocus: undefined});\n  element.classList.add('inline-button');\n  const toolbar = new Toolbar('');\n  toolbar.appendToolbarItem(toolbarButton);\n  shadowRoot.appendChild(toolbar.element);\n  return element;\n}\n\nexport abstract class Renderer {\n  abstract render(object: Object, options?: Options): Promise<{\n    node: Node,\n    tree: TreeOutline|null,\n  }|null>;\n\n  static async render(object: Object, options?: Options): Promise<{\n    node: Node,\n    tree: TreeOutline|null,\n  }|null> {\n    if (!object) {\n      throw new Error('Can\\'t render ' + object);\n    }\n    const extension = getApplicableRegisteredRenderers(object)[0];\n    if (!extension) {\n      return null;\n    }\n    const renderer = await extension.loadRenderer();\n    return renderer.render(object, options);\n  }\n}\n\nexport function formatTimestamp(timestamp: number, full: boolean): string {\n  const date = new Date(timestamp);\n  const yymmdd = date.getFullYear() + '-' + leadZero(date.getMonth() + 1, 2) + '-' + leadZero(date.getDate(), 2);\n  const hhmmssfff = leadZero(date.getHours(), 2) + ':' + leadZero(date.getMinutes(), 2) + ':' +\n      leadZero(date.getSeconds(), 2) + '.' + leadZero(date.getMilliseconds(), 3);\n  return full ? (yymmdd + ' ' + hhmmssfff) : hhmmssfff;\n\n  function leadZero(value: number, length: number): string {\n    const valueString = String(value);\n    return valueString.padStart(length, '0');\n  }\n}\n\nexport interface Options {\n  title?: string|Element;\n  editable?: boolean;\n}\n\nexport interface HighlightChange {\n  node: Element|Text;\n  type: string;\n  oldText?: string;\n  newText?: string;\n  nextSibling?: Node;\n  parent?: Node;\n}\n\nexport const isScrolledToBottom = (element: Element): boolean => {\n  // This code works only for 0-width border.\n  // The scrollTop, clientHeight and scrollHeight are computed in double values internally.\n  // However, they are exposed to javascript differently, each being either rounded (via\n  // round, ceil or floor functions) or left intouch.\n  // This adds up a total error up to 2.\n  return Math.abs(element.scrollTop + element.clientHeight - element.scrollHeight) <= 2;\n};\n\nexport function createSVGChild(element: Element, childType: string, className?: string): Element {\n  const child = element.ownerDocument.createElementNS('http://www.w3.org/2000/svg', childType);\n  if (className) {\n    child.setAttribute('class', className);\n  }\n  element.appendChild(child);\n  return child;\n}\n\nexport const enclosingNodeOrSelfWithNodeNameInArray = (initialNode: Node, nameArray: string[]): Node|null => {\n  let node: (Node|null)|Node = initialNode;\n  for (; node && node !== initialNode.ownerDocument; node = node.parentNodeOrShadowHost()) {\n    for (let i = 0; i < nameArray.length; ++i) {\n      if (node.nodeName.toLowerCase() === nameArray[i].toLowerCase()) {\n        return node;\n      }\n    }\n  }\n  return null;\n};\n\nexport const enclosingNodeOrSelfWithNodeName = function(node: Node, nodeName: string): Node|null {\n  return enclosingNodeOrSelfWithNodeNameInArray(node, [nodeName]);\n};\n\nexport const deepElementFromPoint = (document: Document|ShadowRoot|null|undefined, x: number, y: number): Node|null => {\n  let container: (ShadowRoot|null)|(Document | ShadowRoot | null | undefined) = document;\n  let node: Element|null = null;\n  while (container) {\n    const innerNode = container.elementFromPoint(x, y);\n    if (!innerNode || node === innerNode) {\n      break;\n    }\n    node = innerNode;\n    container = node.shadowRoot;\n  }\n  return node;\n};\n\nexport const deepElementFromEvent = (ev: Event): Node|null => {\n  const event = (ev as MouseEvent);\n  // Some synthetic events have zero coordinates which lead to a wrong element.\n  // Better return nothing in this case.\n  if (!event.which && !event.pageX && !event.pageY && !event.clientX && !event.clientY && !event.movementX &&\n      !event.movementY) {\n    return null;\n  }\n  const root = event.target && (event.target as Element).getComponentRoot();\n  return root ? deepElementFromPoint((root as Document | ShadowRoot), event.pageX, event.pageY) : null;\n};\n\nconst registeredRenderers: RendererRegistration[] = [];\n\nexport function registerRenderer(registration: RendererRegistration): void {\n  registeredRenderers.push(registration);\n}\nexport function getApplicableRegisteredRenderers(object: Object): RendererRegistration[] {\n  return registeredRenderers.filter(isRendererApplicableToContextTypes);\n\n  function isRendererApplicableToContextTypes(rendererRegistration: RendererRegistration): boolean {\n    if (!rendererRegistration.contextTypes) {\n      return true;\n    }\n    for (const contextType of rendererRegistration.contextTypes()) {\n      if (object instanceof contextType) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\nexport interface RendererRegistration {\n  loadRenderer: () => Promise<Renderer>;\n  contextTypes: () => Array<Function>;\n}\n"]}