{"version":3,"file":"ReportView.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/ReportView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport reportViewStyles from './reportView.css.legacy.js';\nimport {Toolbar} from './Toolbar.js';\nimport {Tooltip} from './Tooltip.js';\nimport {VBox} from './Widget.js';\n\n/**\n * @deprecated Please consider using the web component version of this widget\n *             (`ui/components/report_view/ReportView.ts`) for new code.\n */\nexport class ReportView extends VBox {\n  private readonly contentBox: HTMLElement;\n  private headerElement: HTMLElement;\n  private titleElement: HTMLElement;\n  private readonly sectionList: HTMLElement;\n  private subtitleElement?: HTMLElement;\n  private urlElement?: HTMLElement;\n  constructor(title?: string) {\n    super(true);\n    this.registerRequiredCSS(reportViewStyles);\n\n    this.contentBox = this.contentElement.createChild('div', 'report-content-box');\n    this.headerElement = this.contentBox.createChild('div', 'report-header vbox');\n    this.titleElement = this.headerElement.createChild('div', 'report-title');\n    if (title) {\n      this.titleElement.textContent = title;\n    } else {\n      this.headerElement.classList.add('hidden');\n    }\n    ARIAUtils.markAsHeading(this.titleElement, 1);\n\n    this.sectionList = this.contentBox.createChild('div', 'vbox');\n  }\n\n  setTitle(title: string): void {\n    if (this.titleElement.textContent === title) {\n      return;\n    }\n    this.titleElement.textContent = title;\n    this.headerElement.classList.toggle('hidden', Boolean(title));\n  }\n\n  setSubtitle(subtitle: string): void {\n    if (this.subtitleElement && this.subtitleElement.textContent === subtitle) {\n      return;\n    }\n    if (!this.subtitleElement) {\n      this.subtitleElement = this.headerElement.createChild('div', 'report-subtitle');\n    }\n    this.subtitleElement.textContent = subtitle;\n  }\n\n  setURL(link: Element|null): void {\n    if (!this.urlElement) {\n      this.urlElement = this.headerElement.createChild('div', 'report-url link');\n    }\n    this.urlElement.removeChildren();\n    if (link) {\n      this.urlElement.appendChild(link);\n    }\n  }\n\n  createToolbar(): Toolbar {\n    const toolbar = new Toolbar('');\n    this.headerElement.appendChild(toolbar.element);\n    return toolbar;\n  }\n\n  appendSection(title: string, className?: string): Section {\n    const section = new Section(title, className);\n    section.show(this.sectionList);\n    return section;\n  }\n\n  sortSections(comparator: (arg0: Section, arg1: Section) => number): void {\n    const sections = (this.children().slice() as Section[]);\n    const sorted = sections.every((e, i, a) => !i || comparator(a[i - 1], a[i]) <= 0);\n    if (sorted) {\n      return;\n    }\n\n    this.detachChildWidgets();\n    sections.sort(comparator);\n    for (const section of sections) {\n      section.show(this.sectionList);\n    }\n  }\n\n  setHeaderVisible(visible: boolean): void {\n    this.headerElement.classList.toggle('hidden', !visible);\n  }\n\n  setBodyScrollable(scrollable: boolean): void {\n    this.contentBox.classList.toggle('no-scroll', !scrollable);\n  }\n}\n\nexport class Section extends VBox {\n  private readonly headerElement: HTMLElement;\n  private titleElement: HTMLElement;\n  private fieldList: HTMLElement;\n  private readonly fieldMap: Map<string, Element>;\n  constructor(title: string, className?: string) {\n    super();\n    this.element.classList.add('report-section');\n    if (className) {\n      this.element.classList.add(className);\n    }\n    this.headerElement = this.element.createChild('div', 'report-section-header');\n    this.titleElement = this.headerElement.createChild('div', 'report-section-title');\n    this.setTitle(title);\n    ARIAUtils.markAsHeading(this.titleElement, 2);\n    this.fieldList = this.element.createChild('div', 'vbox');\n    this.fieldMap = new Map();\n  }\n\n  title(): string {\n    return this.titleElement.textContent || '';\n  }\n\n  setTitle(title: string, tooltip?: string): void {\n    if (this.titleElement.textContent !== title) {\n      this.titleElement.textContent = title;\n    }\n    Tooltip.install(this.titleElement, tooltip || '');\n    this.titleElement.classList.toggle('hidden', !this.titleElement.textContent);\n  }\n\n  /**\n   * Declares the overall container to be a group and assigns a title.\n   */\n  setUiGroupTitle(groupTitle: string): void {\n    ARIAUtils.markAsGroup(this.element);\n    ARIAUtils.setAccessibleName(this.element, groupTitle);\n  }\n\n  createToolbar(): Toolbar {\n    const toolbar = new Toolbar('');\n    this.headerElement.appendChild(toolbar.element);\n    return toolbar;\n  }\n\n  appendField(title: string, textValue?: string): HTMLElement {\n    let row = this.fieldMap.get(title);\n    if (!row) {\n      row = this.fieldList.createChild('div', 'report-field');\n      row.createChild('div', 'report-field-name').textContent = title;\n      this.fieldMap.set(title, row);\n      row.createChild('div', 'report-field-value');\n    }\n    if (textValue && row.lastElementChild) {\n      row.lastElementChild.textContent = textValue;\n    }\n    return row.lastElementChild as HTMLElement;\n  }\n\n  appendFlexedField(title: string, textValue?: string): Element {\n    const field = this.appendField(title, textValue);\n    field.classList.add('report-field-value-is-flexed');\n    return field;\n  }\n\n  removeField(title: string): void {\n    const row = this.fieldMap.get(title);\n    if (row) {\n      row.remove();\n    }\n    this.fieldMap.delete(title);\n  }\n\n  setFieldVisible(title: string, visible: boolean): void {\n    const row = this.fieldMap.get(title);\n    if (row) {\n      row.classList.toggle('hidden', !visible);\n    }\n  }\n\n  fieldValue(title: string): Element|null {\n    const row = this.fieldMap.get(title);\n    return row ? row.lastElementChild : null;\n  }\n\n  appendRow(): HTMLElement {\n    return this.fieldList.createChild('div', 'report-row') as HTMLElement;\n  }\n\n  appendSelectableRow(): HTMLElement {\n    return this.fieldList.createChild('div', 'report-row report-row-selectable') as HTMLElement;\n  }\n\n  clearContent(): void {\n    this.fieldList.removeChildren();\n    this.fieldMap.clear();\n  }\n\n  markFieldListAsGroup(): void {\n    ARIAUtils.markAsGroup(this.fieldList);\n    ARIAUtils.setAccessibleName(this.fieldList, this.title());\n  }\n\n  setIconMasked(masked: boolean): void {\n    this.element.classList.toggle('show-mask', masked);\n  }\n}\n"]}