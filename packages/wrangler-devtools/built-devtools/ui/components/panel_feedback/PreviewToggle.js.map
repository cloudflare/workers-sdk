{"version":3,"file":"PreviewToggle.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/panel_feedback/PreviewToggle.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Root from '../../../core/root/root.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as ComponentHelpers from '../helpers/helpers.js';\nimport * as IconButton from '../icon_button/icon_button.js';\n\nimport * as Input from '../input/input.js';\nimport previewToggleStyles from './previewToggle.css.js';\n\nconst {render, html, nothing} = LitHtml;\n\nexport interface PreviewToggleData {\n  name: string;\n  helperText: string|null;\n  feedbackURL: string|null;\n  experiment: Root.Runtime.ExperimentName;\n  learnMoreURL?: string;\n  onChangeCallback?: (checked: boolean) => void;\n}\n\nconst UIStrings = {\n  /**\n  *@description Link text the user can click to provide feedback to the team.\n  */\n  previewTextFeedbackLink: 'Send us your feedback.',\n  /**\n  *@description Link text the user can click to provide feedback to the team.\n  */\n  shortFeedbackLink: 'Send feedback',\n  /**\n  *@description Link text the user can click to see documentation.\n  */\n  learnMoreLink: 'Learn More',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('ui/components/panel_feedback/PreviewToggle.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class PreviewToggle extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-preview-toggle`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  #name = '';\n  #helperText: string|null = null;\n  #feedbackURL: string|null = null;\n  #learnMoreURL: string|undefined;\n  #experiment: string = '';\n  #onChangeCallback?: (checked: boolean) => void;\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [Input.checkboxStyles, previewToggleStyles];\n  }\n\n  set data(data: PreviewToggleData) {\n    this.#name = data.name;\n    this.#helperText = data.helperText;\n    this.#feedbackURL = data.feedbackURL;\n    this.#learnMoreURL = data.learnMoreURL;\n    this.#experiment = data.experiment;\n    this.#onChangeCallback = data.onChangeCallback;\n    this.#render();\n  }\n\n  #render(): void {\n    const checked = Root.Runtime.experiments.isEnabled(this.#experiment);\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    render(\n      html`\n      <div class=\"container\">\n        <div class=\"checkbox-line\">\n          <label class=\"experiment-preview\">\n            <input type=\"checkbox\" ?checked=${checked} @change=${this.#checkboxChanged} aria-label=${this.#name}/>\n            <${IconButton.Icon.Icon.litTagName} .data=${{\n              iconName: 'ic_preview_feature',\n              width: '16px',\n              height: '16px',\n              color: 'var(--color-text-secondary)',\n            } as IconButton.Icon.IconData}>\n            </${IconButton.Icon.Icon.litTagName}>${this.#name}\n          </label>\n          ${this.#feedbackURL && !this.#helperText\n            ? html`<div class=\"feedback\"><x-link class=\"x-link\" href=${this.#feedbackURL}>${i18nString(UIStrings.shortFeedbackLink)}</x-link></div>`\n            : nothing}\n        </div>\n        ${this.#learnMoreURL\n          ? html`<x-link class=\"x-link\" href=${this.#learnMoreURL}>${i18nString(UIStrings.learnMoreLink)}</x-link>`\n          : nothing}\n        <div class=\"helper\">\n          ${this.#helperText && this.#feedbackURL\n            ? html`<p>${this.#helperText} <x-link class=\"x-link\" href=${this.#feedbackURL}>${i18nString(UIStrings.previewTextFeedbackLink)}</x-link></p>`\n            : nothing}\n        </div>\n      </div>`,\n      this.#shadow,\n      {\n        host: this,\n      });\n    // clang-format on\n  }\n\n  #checkboxChanged(event: Event): void {\n    const checked = (event.target as HTMLInputElement).checked;\n    Root.Runtime.experiments.setEnabled(this.#experiment, checked);\n    this.#onChangeCallback?.(checked);\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent('devtools-preview-toggle', PreviewToggle);\n\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  interface HTMLElementTagNameMap {\n    'devtools-preview-toggle': PreviewToggle;\n  }\n}\n"]}