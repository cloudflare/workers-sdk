{"version":3,"file":"NetworkManager.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/NetworkManager.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAiC7B,OAAO,KAAK,MAAM,MAAM,qBAAqB,CAAC;AAC9C,OAAO,KAAK,IAAI,MAAM,iBAAiB,CAAC;AACxC,OAAO,KAAK,IAAI,MAAM,iBAAiB,CAAC;AACxC,OAAO,KAAK,QAAQ,MAAM,yBAAyB,CAAC;AAIpD,OAAO,EAAC,MAAM,EAAC,MAAM,aAAa,CAAC;AAInC,OAAO,EAAC,MAAM,IAAI,oBAAoB,EAAE,cAAc,EAAC,MAAM,qBAAqB,CAAC;AAEnF,OAAO,EAAC,UAAU,EAAC,MAAM,aAAa,CAAC;AACvC,OAAO,EAAC,QAAQ,EAAC,MAAM,eAAe,CAAC;AAEvC,OAAO,EAAC,aAAa,EAAC,MAAM,oBAAoB,CAAC;AAGjD,MAAM,SAAS,GAAG;IAChB;;MAEE;IACF,qBAAqB,EAAE,mDAAmD;IAC1E;;MAEE;IACF,oBAAoB,EAAE,0DAA0D;IAChF;;MAEE;IACF,qBAAqB,EAAE,4CAA4C;IACnE;;MAEE;IACF,YAAY,EAAE,eAAe;IAC7B;;MAEE;IACF,OAAO,EAAE,SAAS;IAClB;;MAEE;IACF,KAAK,EAAE,SAAS;IAChB;;MAEE;IACF,KAAK,EAAE,SAAS;IAChB;;;MAGE;IACF,4BAA4B,EAAE,0CAA0C;IACxE;;;;MAIE;IACF,2BAA2B,EACvB,yKAAyK;IAC7K;;;;;MAKE;IACF,gBAAgB,EAAE,sCAAsC;IACxD;;;;;MAKE;IACF,kBAAkB,EAAE,wCAAwC;CAC7D,CAAC;AACF,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,4BAA4B,EAAE,SAAS,CAAC,CAAC;AAClF,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACtE,MAAM,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,gCAAgC,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAExF,MAAM,mBAAmB,GAAG,IAAI,OAAO,EAAkC,CAAC;AAE1E,MAAM,gBAAgB,GAAG,IAAI,GAAG,CAAC;IAC/B,CAAC,IAAI,gCAA6C;IAClD,CAAC,IAAI,gCAA6C;IAClD,CAAC,IAAI,gCAA6C;IAClD,CAAC,WAAW,8BAA4C;IACxD,CAAC,MAAM,oBAAuC;IAC9C,CAAC,OAAO,sBAAwC;CACjD,CAAC,CAAC;AAEH,MAAM,OAAO,cAAe,SAAQ,QAAoB;IAC7C,UAAU,CAAoB;IAC9B,eAAe,CAAkB;IACjC,aAAa,CAA8B;IAC3C,2BAA2B,CAAmC;IAEvE,YAAY,MAAc;QACxB,KAAK,CAAC,MAAM,CAAC,CAAC;QACd,IAAI,CAAC,UAAU,GAAG,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAC9C,IAAI,CAAC,eAAe,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC;QAChE,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;QAC3C,MAAM,CAAC,yBAAyB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAClD,MAAM,CAAC,uBAAuB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACrD,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,GAAG,EAAE,EAAE;YAC5E,KAAK,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC,EAAC,aAAa,EAAE,IAAI,EAAC,CAAC,CAAC;SACxE;QAED,KAAK,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,EAAC,eAAe,EAAE,kCAAkC,EAAC,CAAC,CAAC;QAC7F,KAAK,IAAI,CAAC,aAAa,CAAC,0BAA0B,CAAC,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;QAEpE,IAAI,CAAC,2BAA2B,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,qBAAqB,EAAE,KAAK,CAAC,CAAC;QACnH,IAAI,IAAI,CAAC,2BAA2B,CAAC,GAAG,EAAE,EAAE;YAC1C,IAAI,CAAC,0BAA0B,EAAE,CAAC;SACnC;QACD,IAAI,CAAC,2BAA2B,CAAC,iBAAiB,CAAC,IAAI,CAAC,0BAA0B,EAAE,IAAI,CAAC,CAAC;QAE1F,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE;aAC9B,aAAa,CAAC,eAAe,CAAC;aAC9B,iBAAiB,CAAC,IAAI,CAAC,2BAA2B,EAAE,IAAI,CAAC,CAAC;IACjE,CAAC;IAED,MAAM,CAAC,UAAU,CAAC,OAAuB;QACvC,OAAO,mBAAmB,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC;IAClD,CAAC;IAED,MAAM,CAAC,gBAAgB,CAAC,OAAuB;QAC7C,OAAO,OAAO,CAAC,mBAAmB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;YAC5G,OAAO,CAAC,YAAY,EAAE,KAAK,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,GAAG,CAAC;IACvE,CAAC;IAED,MAAM,CAAC,aAAa,CAAC,OAAuB;QAC1C,MAAM,OAAO,GAAG,mBAAmB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACjD,MAAM,SAAS,GAAG,OAAO,CAAC,gBAAgB,EAAE,CAAC;QAC7C,IAAI,CAAC,OAAO,IAAI,CAAC,SAAS,IAAI,OAAO,CAAC,UAAU,EAAE,EAAE;YAClD,OAAO;SACR;QACD,KAAK,OAAO,CAAC,aAAa,CAAC,gBAAgB,CAAC,EAAC,SAAS,EAAC,CAAC,CAAC;IAC3D,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,eAAe,CAAC,OAAuB,EAAE,KAAa,EAAE,aAAsB,EAAE,OAAgB;QAE3G,MAAM,OAAO,GAAG,cAAc,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QACnD,MAAM,SAAS,GAAG,OAAO,CAAC,gBAAgB,EAAE,CAAC;QAC7C,IAAI,CAAC,OAAO,IAAI,CAAC,SAAS,IAAI,OAAO,CAAC,UAAU,EAAE,EAAE;YAClD,OAAO,EAAE,CAAC;SACX;QACD,MAAM,QAAQ,GAAG,MAAM,OAAO,CAAC,aAAa,CAAC,2BAA2B,CACpE,EAAC,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,aAAa,EAAE,aAAa,EAAE,OAAO,EAAE,OAAO,EAAC,CAAC,CAAC;QAC/E,OAAO,QAAQ,CAAC,MAAM,IAAI,EAAE,CAAC;IAC/B,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC,OAAuB;QACrD,IAAI,OAAO,CAAC,YAAY,EAAE,KAAK,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,SAAS,EAAE;YAC1E,OAAO,EAAC,KAAK,EAAE,UAAU,CAAC,SAAS,CAAC,qBAAqB,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAC,CAAC;SAC5F;QACD,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;YACrB,MAAM,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,eAAe,CAAC,CAAC;SAC1D;QACD,IAAI,OAAO,CAAC,UAAU,EAAE,EAAE;YACxB,OAAO,EAAC,KAAK,EAAE,UAAU,CAAC,SAAS,CAAC,oBAAoB,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAC,CAAC;SAC3F;QACD,IAAI,OAAO,CAAC,kBAAkB,EAAE,EAAE;YAChC,OAAO,EAAC,KAAK,EAAE,UAAU,CAAC,SAAS,CAAC,qBAAqB,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAC,CAAC;SAC5F;QACD,MAAM,OAAO,GAAG,cAAc,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QACnD,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,EAAC,KAAK,EAAE,gCAAgC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAC,CAAC;SACjF;QACD,MAAM,SAAS,GAAG,OAAO,CAAC,gBAAgB,EAAE,CAAC;QAC7C,IAAI,CAAC,SAAS,EAAE;YACd,OAAO,EAAC,KAAK,EAAE,mCAAmC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAC,CAAC;SACpF;QACD,MAAM,QAAQ,GAAG,MAAM,OAAO,CAAC,aAAa,CAAC,sBAAsB,CAAC,EAAC,SAAS,EAAC,CAAC,CAAC;QACjF,MAAM,KAAK,GAAG,QAAQ,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC;QAC1C,OAAO,EAAC,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,EAAE,QAAQ,CAAC,aAAa,EAAC,CAAC;IAChG,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,eAAe,CAAC,OAAuB;QAClD,MAAM,OAAO,GAAG,cAAc,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QACnD,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,CAAC,KAAK,CAAC,gCAAgC,CAAC,CAAC;YAChD,OAAO,IAAI,CAAC;SACb;QACD,MAAM,SAAS,GAAG,OAAO,CAAC,gBAAgB,EAAE,CAAC;QAC7C,IAAI,CAAC,SAAS,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,mCAAmC,CAAC,CAAC;YACnD,OAAO,IAAI,CAAC;SACb;QACD,IAAI;YACF,MAAM,EAAC,QAAQ,EAAC,GAAG,MAAM,OAAO,CAAC,aAAa,CAAC,yBAAyB,CAAC,EAAC,SAAS,EAAC,CAAC,CAAC;YACtF,OAAO,QAAQ,CAAC;SACjB;QAAC,OAAO,CAAC,EAAE;YACV,OAAO,CAAC,CAAC,OAAO,CAAC;SAClB;IACH,CAAC;IAED,MAAM,CAAC,cAAc,CAAC,UAAsB;QAC1C,IAAI,CAAC,UAAU,CAAC,QAAQ,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;YAC9C,yBAA4C;SAC7C;QACD,MAAM,KAAK,GACP,OAAO,UAAU,CAAC,KAAK,KAAK,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QAC/G,KAAK,MAAM,CAAC,IAAI,EAAE,YAAY,CAAC,IAAI,gBAAgB,EAAE;YACnD,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;gBACxB,OAAO,YAAY,CAAC;aACrB;SACF;QACD,2BAA6C;IAC/C,CAAC;IAED,MAAM,CAAC,gBAAgB,CAAC,OAAiC;QACvD,MAAM,UAAU,GAA6B,EAAE,CAAC;QAChD,KAAK,MAAM,UAAU,IAAI,OAAO,EAAE;YAChC,UAAU,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;SAC5D;QACD,OAAO,UAAU,CAAC;IACpB,CAAC;IAED,aAAa,CAAC,GAAoC;QAChD,OAAO,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;IAC5C,CAAC;IAED,YAAY,CAAC,EAAU;QACrB,OAAO,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;IAC1C,CAAC;IAEO,2BAA2B,CAAC,EAAC,IAAI,EAAE,OAAO,EAA+C;QAC/F,KAAK,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC,EAAC,aAAa,EAAE,OAAO,EAAC,CAAC,CAAC;IAC5E,CAAC;IAED,OAAO;QACL,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE;aAC9B,aAAa,CAAC,eAAe,CAAC;aAC9B,oBAAoB,CAAC,IAAI,CAAC,2BAA2B,EAAE,IAAI,CAAC,CAAC;IACpE,CAAC;IAEO,0BAA0B;QAChC,KAAK,IAAI,CAAC,aAAa,CAAC,6BAA6B,CAAC,EAAC,MAAM,EAAE,IAAI,CAAC,2BAA2B,CAAC,GAAG,EAAE,EAAC,CAAC,CAAC;IAC1G,CAAC;IAED,KAAK,CAAC,0BAA0B,CAAC,OACI;QACnC,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,iCAAiC,CAAC,EAAC,OAAO,EAAE,OAAO,IAAI,SAAS,EAAC,CAAC,CAAC;QAC3G,IAAI,MAAM,CAAC,QAAQ,EAAE,EAAE;YACrB,OAAO,IAAI,CAAC;SACb;QACD,OAAO,MAAM,CAAC,MAAM,CAAC;IACvB,CAAC;IAED,KAAK,CAAC,kBAAkB,CAAC,SAAkB,IAAI;QAC7C,OAAO,IAAI,CAAC,aAAa,CAAC,yBAAyB,CAAC,EAAC,MAAM,EAAC,CAAC,CAAC;IAChE,CAAC;IAED,KAAK,CAAC,mBAAmB,CACrB,OAAmC,EAAE,GAAoC,EACzE,OAAoD;QACtD,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,0BAA0B,CAAC,EAAC,OAAO,EAAE,OAAO,IAAI,SAAS,EAAE,GAAG,EAAE,OAAO,EAAC,CAAC,CAAC;QAClH,IAAI,MAAM,CAAC,QAAQ,EAAE,EAAE;YACrB,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;SACpC;QACD,OAAO,MAAM,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED,aAAa;QACX,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,CAAC;IAClC,CAAC;CACF;AAED,wDAAwD;AACxD,+CAA+C;AAC/C,MAAM,CAAN,IAAY,MAYX;AAZD,WAAY,MAAM;IAChB,2CAAiC,CAAA;IACjC,2CAAiC,CAAA;IACjC,6CAAmC,CAAA;IACnC,uDAA6C,CAAA;IAC7C,+CAAqC,CAAA;IACrC,+CAAqC,CAAA;IACrC,iDAAuC,CAAA;IACvC,6CAAmC,CAAA;IACnC,6DAAmD,CAAA;IACnD,iEAAuD,CAAA;IACvD,yFAA+E,CAAA;AACjF,CAAC,EAZW,MAAM,KAAN,MAAM,QAYjB;AAgCD,MAAM,CAAC,MAAM,sBAAsB,GAAe;IAChD,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,YAAY,CAAC;IAC7C,YAAY,EAAE,SAAS,CAAC,YAAY;IACpC,QAAQ,EAAE,CAAC,CAAC;IACZ,MAAM,EAAE,CAAC,CAAC;IACV,OAAO,EAAE,CAAC;CACX,CAAC;AAEF,MAAM,CAAC,MAAM,iBAAiB,GAAe;IAC3C,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,OAAO,CAAC;IACxC,YAAY,EAAE,SAAS,CAAC,OAAO;IAC/B,QAAQ,EAAE,CAAC;IACX,MAAM,EAAE,CAAC;IACT,OAAO,EAAE,CAAC;CACX,CAAC;AAEF,MAAM,CAAC,MAAM,gBAAgB,GAAe;IAC1C,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC;IACtC,YAAY,EAAE,SAAS,CAAC,KAAK;IAC7B,QAAQ,EAAE,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE;IAC7B,MAAM,EAAE,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE;IAC3B,OAAO,EAAE,GAAG,GAAG,CAAC;CACjB,CAAC;AAEF,MAAM,CAAC,MAAM,gBAAgB,GAAe;IAC1C,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC;IACtC,YAAY,EAAE,SAAS,CAAC,KAAK;IAC7B,QAAQ,EAAE,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE;IACpC,MAAM,EAAE,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE;IAC3B,OAAO,EAAE,GAAG,GAAG,IAAI;CACpB,CAAC;AAEF,MAAM,kCAAkC,GAAG,EAAE,GAAG,IAAI,CAAC,CAAE,QAAQ;AAE/D,MAAM,OAAO,eAAe;IACjB,WAAW,CAA4B;IAEhD,YAAY,KAAgC;QAC1C,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;IAC3B,CAAC;IAED,aAAa,CAAC,EAAC,SAAS,EAAE,OAAO,EAAE,YAAY,EAAE,kBAAkB,EAAE,eAAe,EACjC;QACjD,KAAK,yBAAyB,CAAC,QAAQ,EAAE,CAAC,kBAAkB,CAAC,IAAI,kBAAkB,CAC/E,IAAI,CAAC,WAAW,EAAE,OAAO,EAAE,YAAY,EAAE,SAAS,EAAE,kBAAkB,EAAE,eAAe,CAAC,CAAC,CAAC;IAChG,CAAC;IAED,YAAY,CAAC,EAAoC;IACjD,CAAC;CACF;AAED,MAAM,OAAO,iBAAiB;IACnB,QAAQ,CAAiB;IAClC,aAAa,CAA8B;IAC3C,cAAc,CAAuD;IACrE,4BAA4B,CAAgC;IACnD,2BAA2B,CAA6D;IACjG,YAAY,OAAuB;QACjC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,aAAa,GAAG,IAAI,GAAG,EAAE,CAAC;QAC/B,IAAI,CAAC,cAAc,GAAG,IAAI,GAAG,EAAE,CAAC;QAChC,IAAI,CAAC,4BAA4B,GAAG,IAAI,GAAG,EAAE,CAAC;QAC9C;;;;;;;WAOG;QACH,IAAI,CAAC,2BAA2B,GAAG,IAAI,GAAG,EAAE,CAAC;QAE7C,yBAAyB,CAAC,QAAQ,EAAE,CAAC,gBAAgB,CACjD,yBAAyB,CAAC,MAAM,CAAC,kBAAkB,EAAE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC/F,CAAC;IAED,kBAAkB,CAAC,KAA2E;QAC5F,MAAM,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,OAAO,EAAE;YACX,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;SACjC;IACH,CAAC;IAEO,wBAAwB,CAAC,UAAoC;QACnE,MAAM,MAAM,GAAG,EAAE,CAAC;QAClB,KAAK,MAAM,IAAI,IAAI,UAAU,EAAE;YAC7B,MAAM,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAC5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBACtC,MAAM,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC;aAC7C;SACF;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAEO,+BAA+B,CAAC,cAA8B,EAAE,OAAiC;QACvG,cAAc,CAAC,aAAa,GAAG,OAAO,CAAC,MAAM,CAAC;QAC9C,cAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;QACjF,cAAc,CAAC,kBAAkB,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,CAAC;QAC1F,cAAc,CAAC,kBAAkB,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;QAC3D,cAAc,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,qBAA2C,CAAC;QACtG,cAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QACzD,cAAc,CAAC,aAAa,CAAC,OAAO,CAAC,UAAU,IAAI,KAAK,CAAC,CAAC;IAC5D,CAAC;IAEO,gCAAgC,CAAC,cAA8B,EAAE,QAAmC;QAC1G,IAAI,QAAQ,CAAC,GAAG,IAAI,cAAc,CAAC,GAAG,EAAE,KAAK,QAAQ,CAAC,GAAG,EAAE;YACzD,cAAc,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAsC,CAAC,CAAC;SACxE;QACD,cAAc,CAAC,QAAQ,GAAI,QAAQ,CAAC,QAAsB,CAAC;QAC3D,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE;YAC9B,cAAc,CAAC,UAAU,GAAG,QAAQ,CAAC,MAAM,CAAC;SAC7C;QACD,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE;YAC9B,cAAc,CAAC,UAAU,GAAG,QAAQ,CAAC,UAAU,CAAC;SACjD;QACD,IAAI,CAAC,cAAc,CAAC,oBAAoB,EAAE,IAAI,cAAc,CAAC,cAAc,EAAE,EAAE;YAC7E,cAAc,CAAC,eAAe,GAAG,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;SAClF;QAED,IAAI,QAAQ,CAAC,iBAAiB,IAAI,CAAC,EAAE;YACnC,cAAc,CAAC,eAAe,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;SAC5D;QAED,IAAI,QAAQ,CAAC,cAAc,IAAI,CAAC,cAAc,CAAC,mBAAmB,EAAE,EAAE;YACpE,yEAAyE;YACzE,oDAAoD;YACpD,gEAAgE;YAChE,cAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC;YACzF,cAAc,CAAC,qBAAqB,CAAC,QAAQ,CAAC,kBAAkB,IAAI,EAAE,CAAC,CAAC;SACzE;QAED,cAAc,CAAC,gBAAgB,GAAG,QAAQ,CAAC,gBAAgB,CAAC;QAC5D,cAAc,CAAC,YAAY,GAAG,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,QAAQ,CAAC,eAAe,EAAE;YAC5B,cAAc,CAAC,gBAAgB,CAAC,QAAQ,CAAC,eAAe,EAAE,QAAQ,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC;SACtF;QAED,IAAI,QAAQ,CAAC,iBAAiB,EAAE;YAC9B,cAAc,CAAC,uBAAuB,GAAG,IAAI,CAAC;SAC/C;QAED,IAAI,QAAQ,CAAC,aAAa,EAAE;YAC1B,cAAc,CAAC,gBAAgB,EAAE,CAAC;SACnC;QAED,IAAI,QAAQ,CAAC,iBAAiB,EAAE;YAC9B,cAAc,CAAC,oBAAoB,EAAE,CAAC;SACvC;QAED,IAAI,QAAQ,CAAC,qBAAqB,EAAE;YAClC,cAAc,CAAC,gCAAgC,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC;SACjF;QAED,IAAI,QAAQ,CAAC,YAAY,EAAE;YACzB,cAAc,CAAC,wBAAwB,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;SAC1E;QAED,cAAc,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;QAExC,cAAc,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,IAAI,EAAE,CAAC;QAElD,IAAI,QAAQ,CAAC,2BAA2B,EAAE;YACxC,cAAc,CAAC,8BAA8B,CAAC,QAAQ,CAAC,2BAA2B,CAAC,CAAC;SACrF;QAED,cAAc,CAAC,gBAAgB,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAExD,IAAI,QAAQ,CAAC,eAAe,EAAE;YAC5B,cAAc,CAAC,kBAAkB,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;SAC7D;QAED,MAAM,eAAe,GAAG,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,oBAAoB,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;QACvG,IAAI,eAAe,EAAE;YACnB,cAAc,CAAC,eAAe,CAAC,eAAe,CAAC,CAAC;SACjD;IACH,CAAC;IAED,YAAY,CAAC,EAAU;QACrB,OAAO,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC;IAC5C,CAAC;IAED,aAAa,CAAC,GAAoC;QAChD,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC;IAC9C,CAAC;IAED,uBAAuB,CAAC,EAAC,SAAS,EAAE,WAAW,EAAgD;QAC7F,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,cAAc,EAAE;YAClB,cAAc,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;SACzC;IACH,CAAC;IAED,sBAAsB,CAAC,EAAC,SAAS,EAAE,IAAI,EAA+C;QACpF,0EAA0E;QAC1E,wCAAwC;QACxC,2EAA2E;QAC3E,mBAAmB;QACnB,4EAA4E;QAC5E,sBAAsB;QACtB,sEAAsE;QACtE,0EAA0E;QAC1E,iCAAiC;QACjC,IAAI,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACvD,6EAA6E;QAC7E,4EAA4E;QAC5E,8CAA8C;QAC9C,yEAAyE;QACzE,qDAAqD;QACrD,IAAI,CAAC,cAAc,EAAE;YACnB,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,GAAsC,CAAC,CAAC;YACpG,IAAI,CAAC,cAAc,EAAE;gBACnB,OAAO;aACR;SACF;QACD,cAAc,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;QAC3C,cAAc,CAAC,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;QAEjF,IAAI,CAAC,gCAAgC,CAAC,cAAc,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAC1E,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;QAC1C,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAClC,MAAM,CAAC,gBAAgB,EAAE,EAAC,OAAO,EAAE,cAAc,EAAE,QAAQ,EAAE,IAAI,CAAC,aAAa,EAAC,CAAC,CAAC;IACxF,CAAC;IAED,iBAAiB,CACb,EAAC,SAAS,EAAE,QAAQ,EAAE,WAAW,EAAE,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,gBAAgB,EAAE,IAAI,EAAE,OAAO,EAChE;QAC7C,IAAI,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACvD,IAAI,cAAc,EAAE;YAClB,yCAAyC;YACzC,IAAI,CAAC,gBAAgB,EAAE;gBACrB,OAAO;aACR;YACD,yEAAyE;YACzE,2DAA2D;YAC3D,uEAAuE;YACvE,4BAA4B;YAC5B,IAAI,CAAC,cAAc,CAAC,kBAAkB,EAAE,EAAE;gBACxC,IAAI,CAAC,gBAAgB,CAAC;oBACpB,SAAS;oBACT,QAAQ;oBACR,SAAS;oBACT,IAAI,EAAE,IAAI,uBAAuC;oBACjD,QAAQ,EAAE,gBAAgB;oBAC1B,YAAY,EAAE,KAAK;oBACnB,OAAO;iBACR,CAAC,CAAC;aACJ;YACD,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,SAAS,EAAE,OAAO,CAAC,GAAsC,CAAC,CAAC;YAC3G,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,MAAM,CAAC,iBAAiB,EAAE,cAAc,CAAC,CAAC;SAClF;aAAM;YACL,cAAc,GAAG,cAAc,CAAC,MAAM,CAClC,SAAS,EAAE,OAAO,CAAC,GAAsC,EAAE,WAA8C,EACzG,OAAO,IAAI,IAAI,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;YAC1C,mBAAmB,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SACxD;QACD,cAAc,CAAC,cAAc,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,+BAA+B,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;QAC9D,cAAc,CAAC,YAAY,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;QACjD,cAAc,CAAC,eAAe,CAC1B,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC9F,IAAI,OAAO,CAAC,gBAAgB,EAAE;YAC5B,cAAc,CAAC,mBAAmB,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;SAC9D;QACD,MAAM,oBAAoB,GAAG,IAAI,CAAC,2BAA2B,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC7E,IAAI,oBAAoB,EAAE;YACxB,cAAc,CAAC,+BAA+B,CAAC,oBAAoB,CAAC,CAAC;YACrE,IAAI,CAAC,2BAA2B,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;SACpD;QAED,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;QAE/D,IAAI,CAAC,mBAAmB,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;IACpD,CAAC;IAED,sBAAsB,CAAC,EAAC,SAAS,EAA+C;QAC9E,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QAED,cAAc,CAAC,kBAAkB,EAAE,CAAC;IACtC,CAAC;IAED,gBAAgB,CAAC,EAAC,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAyC;QAEhH,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzD,MAAM,gBAAgB,GAAG,cAAc,CAAC,gBAAgB,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC3E,IAAI,CAAC,cAAc,EAAE;YACnB,MAAM,kBAAkB,GAAG,gBAAgB,CAAC,eAAe,CAAC,CAAC;YAC7D,mCAAmC;YACnC,MAAM,SAAS,GAAkC;gBAC/C,GAAG,EAAE,QAAQ,CAAC,GAAsC;gBACpD,OAAO,EAAE,OAAO,IAAI,IAAI;gBACxB,QAAQ,EAAE,QAAQ;gBAClB,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,QAAQ,CAAC,QAAQ;gBAC3B,YAAY,EAAE,kBAAkB,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI;aACvE,CAAC;YACF,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;YAC/E,OAAO;SACR;QAED,cAAc,CAAC,oBAAoB,GAAG,SAAS,CAAC;QAChD,cAAc,CAAC,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC;QAExE,IAAI,CAAC,gCAAgC,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;QAEhE,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;QAC1C,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,MAAM,CAAC,gBAAgB,EAAE,EAAC,OAAO,EAAE,cAAc,EAAE,QAAQ,EAAC,CAAC,CAAC;IACvG,CAAC;IAED,YAAY,CAAC,EAAC,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,iBAAiB,EAAqC;QACpG,IAAI,cAAc,GAAkC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACtF,IAAI,CAAC,cAAc,EAAE;YACnB,cAAc,GAAG,IAAI,CAAC,6BAA6B,CAAC,SAAS,CAAC,CAAC;SAChE;QACD,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QAED,cAAc,CAAC,YAAY,IAAI,UAAU,CAAC;QAC1C,IAAI,iBAAiB,KAAK,CAAC,CAAC,EAAE;YAC5B,cAAc,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,CAAC;SACxD;QACD,cAAc,CAAC,OAAO,GAAG,SAAS,CAAC;QAEnC,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;IAC5C,CAAC;IAED,eAAe,CAAC,EAAC,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,iBAAiB,EAAE,wBAAwB,EACrC;QACvD,IAAI,cAAc,GAAkC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACtF,IAAI,CAAC,cAAc,EAAE;YACnB,cAAc,GAAG,IAAI,CAAC,6BAA6B,CAAC,SAAS,CAAC,CAAC;SAChE;QACD,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QACD,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,CAAC;QAC/C,IAAI,CAAC,oBAAoB,CAAC,cAAc,EAAE,UAAU,EAAE,iBAAiB,EAAE,wBAAwB,CAAC,CAAC;QACnG,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,MAAM,CAAC,eAAe,EAAE,cAAc,CAAC,CAAC;IACjF,CAAC;IAED,aAAa,CAAC,EACZ,SAAS,EACT,SAAS,EAAE,IAAI,EACf,IAAI,EAAE,YAAY,EAClB,SAAS,EAAE,oBAAoB,EAC/B,QAAQ,EACR,aAAa,EACb,eAAe,GACqB;QACpC,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QAED,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC;QAC7B,cAAc,CAAC,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,CAAC;QAChF,cAAc,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC5C,IAAI,aAAa,EAAE;YACjB,cAAc,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;YAC/C,IAAI,aAAa,gCAA6C,EAAE;gBAC9D,MAAM,OAAO,GAAG,UAAU,CAAC,SAAS,CAAC,4BAA4B,EAAE,EAAC,GAAG,EAAE,cAAc,CAAC,GAAG,EAAE,EAAC,CAAC,CAAC;gBAChG,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAClC,MAAM,CAAC,gBAAgB,EAAE,EAAC,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;aACvF;SACF;QACD,IAAI,eAAe,EAAE;YACnB,cAAc,CAAC,kBAAkB,CAAC,eAAe,CAAC,CAAC;SACpD;QACD,cAAc,CAAC,wBAAwB,GAAG,oBAAoB,CAAC;QAC/D,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,CAAC;QAC/C,IAAI,CAAC,oBAAoB,CAAC,cAAc,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;IACtD,CAAC;IAED,gBAAgB,CAAC,EAAC,SAAS,EAAE,GAAG,EAAE,UAAU,EAAE,SAAS,EAAyC;QAC9F,MAAM,cAAc,GAChB,cAAc,CAAC,kBAAkB,CAAC,SAAS,EAAE,UAA6C,EAAE,SAAS,CAAC,CAAC;QAC3G,mBAAmB,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACvD,cAAc,CAAC,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;QAC5E,IAAI,CAAC,mBAAmB,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;IACjD,CAAC;IAED,iCAAiC,CAAC,EAAC,SAAS,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EACa;QAC3F,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QAED,cAAc,CAAC,aAAa,GAAG,KAAK,CAAC;QACrC,cAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;QACjF,cAAc,CAAC,YAAY,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;QAE5C,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;IAC5C,CAAC;IAED,kCAAkC,CAAC,EAAC,SAAS,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EACuB;QAC7F,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QAED,cAAc,CAAC,UAAU,GAAG,QAAQ,CAAC,MAAM,CAAC;QAC5C,cAAc,CAAC,UAAU,GAAG,QAAQ,CAAC,UAAU,CAAC;QAChD,cAAc,CAAC,eAAe,GAAG,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACjF,cAAc,CAAC,mBAAmB,GAAG,QAAQ,CAAC,WAAW,IAAI,EAAE,CAAC;QAChE,IAAI,QAAQ,CAAC,cAAc,EAAE;YAC3B,cAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC;SAC1F;QACD,IAAI,QAAQ,CAAC,kBAAkB,EAAE;YAC/B,cAAc,CAAC,qBAAqB,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;SACnE;QACD,cAAc,CAAC,oBAAoB,GAAG,IAAI,CAAC;QAC3C,cAAc,CAAC,QAAQ,GAAG,WAAW,CAAC;QAEtC,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;IAC5C,CAAC;IAED,sBAAsB,CAAC,EAAC,SAAS,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAA+C;QACzG,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QAED,cAAc,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QACvD,cAAc,CAAC,oBAAoB,GAAG,IAAI,CAAC;QAE3C,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;IAC5C,CAAC;IAED,kBAAkB,CAAC,EAAC,SAAS,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAA2C;QACjG,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QAED,cAAc,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACtD,cAAc,CAAC,oBAAoB,GAAG,IAAI,CAAC;QAE3C,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;IAC5C,CAAC;IAED,mBAAmB,CAAC,EAAC,SAAS,EAAE,SAAS,EAAE,IAAI,EAAE,YAAY,EAA4C;QACvG,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QAED,cAAc,CAAC,qBAAqB,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QACzD,cAAc,CAAC,oBAAoB,GAAG,IAAI,CAAC;QAE3C,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;IAC5C,CAAC;IAED,eAAe,CAAC,EAAC,SAAS,EAAE,SAAS,EAAE,IAAI,EAAwC;QACjF,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QACD,IAAI,CAAC,oBAAoB,CAAC,cAAc,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;IACtD,CAAC;IAED,0BAA0B,CAAC,EAAC,SAAS,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EACD;QAC7E,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QACD,cAAc,CAAC,qBAAqB,CAAC,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;IACvE,CAAC;IAED,kBAAkB,CAAC,EAA4C;IAC/D,CAAC;IAED,0BAA0B,CAAC,EAAC,SAAS,EAAE,iBAAiB,EAAE,OAAO,EAAE,mBAAmB,EAAE,aAAa,EACtB;QAC7E,MAAM,qBAAqB,GAA8B,EAAE,CAAC;QAC5D,MAAM,sBAAsB,GAAG,EAAE,CAAC;QAClC,KAAK,MAAM,EAAC,cAAc,EAAE,MAAM,EAAC,IAAI,iBAAiB,EAAE;YACxD,IAAI,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE;gBAC/B,sBAAsB,CAAC,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC;aAChE;iBAAM;gBACL,qBAAqB,CAAC,IAAI,CAAC,EAAC,cAAc,EAAE,MAAM,EAAE,MAAM,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAAC,CAAC,CAAC;aACzF;SACF;QACD,MAAM,gBAAgB,GAAG;YACvB,qBAAqB;YACrB,sBAAsB;YACtB,cAAc,EAAE,IAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC;YACtD,mBAAmB,EAAE,mBAAmB;YACxC,aAAa;SACd,CAAC;QACF,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,CAAC;IAC5E,CAAC;IAED,yBAAyB,CAAC,EAAC,SAAS,EAAE,cAAc,EAAE,OAAO,EAAE,WAAW,EAAE,sBAAsB,EAAE,UAAU,EACjC;QAC3E,MAAM,iBAAiB,GAAsB;YAC3C,sBAAsB,EAAE,cAAc,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE;gBACzD,OAAO;oBACL,cAAc,EAAE,aAAa,CAAC,cAAc;oBAC5C,UAAU,EAAE,aAAa,CAAC,UAAU;oBACpC,MAAM,EAAE,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,kBAAkB,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI;iBACtF,CAAC;YACJ,CAAC,CAAC;YACF,eAAe,EAAE,IAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC;YACvD,mBAAmB,EAAE,WAAW;YAChC,sBAAsB;YACtB,UAAU;SACX,CAAC;QACF,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,CAAC;IAC9E,CAAC;IAEO,mBAAmB,CAAC,SAAiB;QAC3C,IAAI,OAAyB,CAAC;QAC9B,IAAI,CAAC,IAAI,CAAC,4BAA4B,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE;YACrD,OAAO,GAAG,IAAI,gBAAgB,EAAE,CAAC;YACjC,IAAI,CAAC,4BAA4B,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;SAC3D;aAAM;YACL,OAAO,GAAI,IAAI,CAAC,4BAA4B,CAAC,GAAG,CAAC,SAAS,CAAsB,CAAC;SAClF;QACD,OAAO,OAAO,CAAC;IACjB,CAAC;IAEO,cAAc,CAClB,SAAqC,EAAE,IAAY,EACnD,WAA4C;QAC9C,MAAM,sBAAsB,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACjE,IAAI,CAAC,sBAAsB,EAAE;YAC3B,MAAM,IAAI,KAAK,CAAC,+CAA+C,SAAS,EAAE,CAAC,CAAC;SAC7E;QACD,IAAI,aAAa,GAAG,CAAC,CAAC;QACtB,KAAK,IAAI,QAAQ,GAAG,sBAAsB,CAAC,cAAc,EAAE,EAAE,QAAQ,EAAE,QAAQ,GAAG,QAAQ,CAAC,cAAc,EAAE,EAAE;YAC3G,aAAa,EAAE,CAAC;SACjB;QAED,sBAAsB,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;QACrD,IAAI,CAAC,oBAAoB,CAAC,sBAAsB,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;QAC5D,MAAM,iBAAiB,GAAG,cAAc,CAAC,MAAM,CAC3C,SAAS,EAAE,WAAW,EAAE,sBAAsB,CAAC,WAAW,EAAE,sBAAsB,CAAC,OAAO,EAC1F,sBAAsB,CAAC,QAAQ,EAAE,sBAAsB,CAAC,SAAS,EAAE,CAAC,CAAC;QACzE,mBAAmB,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC1D,iBAAiB,CAAC,iBAAiB,CAAC,sBAAsB,CAAC,CAAC;QAC5D,sBAAsB,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,CAAC;QACjE,OAAO,iBAAiB,CAAC;IAC3B,CAAC;IAEO,6BAA6B,CAAC,SAAiB;QACrD,MAAM,OAAO,GAAG,yBAAyB,CAAC,QAAQ,EAAE,CAAC,4BAA4B,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACjG,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,IAAI,CAAC;SACb;QACD,MAAM,aAAa,GAAI,cAAc,CAAC,UAAU,CAAC,OAAO,CAAoB,CAAC,UAAU,CAAC;QACxF,aAAa,CAAC,aAAa,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAC9C,aAAa,CAAC,cAAc,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;QACnD,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC3C,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,OAAO,CAAC,CAAC;QAChD,mBAAmB,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAChD,OAAO,OAAO,CAAC;IACjB,CAAC;IAEO,mBAAmB,CAAC,cAA8B,EAAE,eAA8C;QACxG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,cAAc,CAAC,SAAS,EAAE,EAAE,cAAc,CAAC,CAAC;QACnE,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,EAAE,EAAE,cAAc,CAAC,CAAC;QAC9D,qEAAqE;QACrE,4DAA4D;QAC5D,IAAI,cAAc,CAAC,QAAQ,KAAK,cAAc,CAAC,SAAS,EAAE,EAAE;YAC1D,yBAAyB,CAAC,QAAQ,EAAE,CAAC,4BAA4B,CAAC,GAAG,CAAC,cAAc,CAAC,SAAS,EAAE,EAAE,cAAc,CAAC,CAAC;SACnH;QAED,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,MAAM,CAAC,cAAc,EAAE,EAAC,OAAO,EAAE,cAAc,EAAE,eAAe,EAAC,CAAC,CAAC;IAC5G,CAAC;IAEO,oBAAoB,CAAC,cAA8B;QACzD,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,MAAM,CAAC,cAAc,EAAE,cAAc,CAAC,CAAC;IAChF,CAAC;IAEO,oBAAoB,CACxB,cAA8B,EAAE,UAAkB,EAAE,iBAAyB,EAC7E,wBAAkC;QACpC,cAAc,CAAC,OAAO,GAAG,UAAU,CAAC;QACpC,cAAc,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC/B,IAAI,iBAAiB,IAAI,CAAC,EAAE;YAC1B,MAAM,cAAc,GAAG,cAAc,CAAC,cAAc,EAAE,CAAC;YACvD,IAAI,cAAc,IAAI,cAAc,CAAC,kBAAkB,EAAE,EAAE;gBACzD,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;gBAClC,cAAc,CAAC,eAAe,CAAC,iBAAiB,CAAC,CAAC;gBAClD,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;aAC3C;iBAAM;gBACL,cAAc,CAAC,eAAe,CAAC,iBAAiB,CAAC,CAAC;aACnD;SACF;QACD,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,MAAM,CAAC,eAAe,EAAE,cAAc,CAAC,CAAC;QAC/E,yBAAyB,CAAC,QAAQ,EAAE,CAAC,4BAA4B,CAAC,MAAM,CAAC,cAAc,CAAC,SAAS,EAAE,CAAC,CAAC;QAErG,IAAI,wBAAwB,EAAE;YAC5B,MAAM,OAAO,GACT,UAAU,CAAC,SAAS,CAAC,2BAA2B,EAAE,EAAC,GAAG,EAAE,cAAc,CAAC,GAAG,EAAE,EAAE,GAAG,EAAE,cAAc,CAAC,QAAQ,EAAC,CAAC,CAAC;YACjH,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAClC,MAAM,CAAC,gBAAgB,EAAE,EAAC,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,cAAc,CAAC,SAAS,EAAE,EAAE,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;SACxG;QAED,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,sBAAsB,CAAC,CAAC,GAAG,EAAE;YAC/E,cAAc,CAAC,YAAY,EAAE,CAAC,QAAQ,EAAE,KAAK,MAAM,CAAC,YAAY,CAAC,kBAAkB,CAAC,GAAG,EAAE;YAC3F,IAAI,OAAO,CAAC;YACZ,MAAM,YAAY,GAAG,cAAc,CAAC,MAAM,IAAI,cAAc,CAAC,kBAAkB,EAAE,CAAC;YAClF,IAAI,YAAY,EAAE;gBAChB,OAAO,GAAG,UAAU,CAChB,SAAS,CAAC,gBAAgB,EAC1B,EAAC,GAAG,EAAE,cAAc,CAAC,YAAY,EAAE,CAAC,KAAK,EAAE,EAAE,GAAG,EAAE,cAAc,CAAC,aAAa,EAAE,GAAG,EAAE,cAAc,CAAC,GAAG,EAAE,EAAC,CAAC,CAAC;aACjH;iBAAM;gBACL,OAAO,GAAG,UAAU,CAChB,SAAS,CAAC,kBAAkB,EAC5B,EAAC,GAAG,EAAE,cAAc,CAAC,YAAY,EAAE,CAAC,KAAK,EAAE,EAAE,GAAG,EAAE,cAAc,CAAC,aAAa,EAAE,GAAG,EAAE,cAAc,CAAC,GAAG,EAAE,EAAC,CAAC,CAAC;aACjH;YAED,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAClC,MAAM,CAAC,gBAAgB,EAAE,EAAC,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,cAAc,CAAC,SAAS,EAAE,EAAE,OAAO,EAAE,KAAK,EAAC,CAAC,CAAC;SACzG;IACH,CAAC;IAED,aAAa;QACX,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;QAC3B,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;QAC5B,IAAI,CAAC,4BAA4B,CAAC,KAAK,EAAE,CAAC;IAC5C,CAAC;IAED,mBAAmB,CAAC,EAAC,WAAW,EAAE,GAAG,EAAE,UAAU,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EACZ;QAC/D,MAAM,cAAc,GAChB,cAAc,CAAC,kBAAkB,CAAC,WAAW,EAAE,UAA6C,EAAE,SAAS,CAAC,CAAC;QAC7G,cAAc,CAAC,cAAc,GAAG,IAAI,CAAC;QACrC,mBAAmB,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACvD,cAAc,CAAC,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;QAC/E,cAAc,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACrC,gEAAgE;QAChE,IAAI,CAAC,mBAAmB,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;IACjD,CAAC;IAED,iCAAiC,CAAC,EAAC,WAAW,EAAE,SAAS,EAAE,IAAI,EAC8B;QAC3F,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAC3D,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QAED,6DAA6D;QAC7D,mEAAmE;QACnE,kEAAkE;QAClE,cAAc;QACd,cAAc,CAAC,oBAAoB,GAAG,IAAI,CAAC;QAC3C,cAAc,CAAC,OAAO,GAAG,IAAI,GAAG,KAAK,CAAC;QACtC,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;IAC5C,CAAC;IAED,kBAAkB,CAAC,EAAC,WAAW,EAAE,SAAS,EAAE,IAAI,EAA2C;QACzF,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAC3D,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QAED,cAAc,CAAC,OAAO,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,oBAAoB,CAAC,cAAc,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;IACrD,CAAC;IAED,uBAAuB,CAAC,KAAoD;QAC1E,MAAM,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACxD,IAAI,CAAC,OAAO,EAAE;YACZ,IAAI,CAAC,2BAA2B,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;YAC7D,OAAO;SACR;QACD,OAAO,CAAC,+BAA+B,CAAC,KAAK,CAAC,CAAC;IACjD,CAAC;IAED,oCAAoC,CAAC,EAAC,SAAS,EAAE,IAAI,EAA6D;QAEhH,MAAM,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;QAC7D,gBAAgB,CAAC,gBAAgB,CAAC,EAAC,YAAY,EAAE,IAAyC,EAAC,CAAC,CAAC;QAC7F,MAAM,YAAY,GAAG,gBAAgB,CAAC,YAAY,EAAE,CAAC;QACrD,IAAI,YAAY,EAAE;YAChB,IAAI,CAAC,oBAAoB,CAAC,YAAY,CAAC,CAAC;SACzC;IACH,CAAC;IAED,iCAAiC,CAAC,EAAC,SAAS,EAAE,YAAY,EAA0D;QAElH,MAAM,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;QAC7D,gBAAgB,CAAC,gBAAgB,CAAC,EAAC,YAAY,EAAC,CAAC,CAAC;QAClD,MAAM,YAAY,GAAG,gBAAgB,CAAC,YAAY,EAAE,CAAC;QACrD,IAAI,YAAY,EAAE;YAChB,IAAI,CAAC,oBAAoB,CAAC,YAAY,CAAC,CAAC;SACzC;IACH,CAAC;IAED,uCAAuC,CAAC,EAAC,cAAc,EAAE,eAAe,EACiC;QACvG,MAAM,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAAC,CAAC;QAClE,gBAAgB,CAAC,4BAA4B,CAAC,EAAC,eAAe,EAAC,CAAC,CAAC;QACjE,MAAM,YAAY,GAAG,gBAAgB,CAAC,YAAY,EAAE,CAAC;QACrD,IAAI,YAAY,EAAE;YAChB,IAAI,CAAC,oBAAoB,CAAC,YAAY,CAAC,CAAC;SACzC;IACH,CAAC;IAED,sCAAsC,CAAC,EAAC,cAAc,EAAE,YAAY,EACmC;QACrG,MAAM,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAAC,CAAC;QAClE,gBAAgB,CAAC,4BAA4B,CAAC,EAAC,YAAY,EAAC,CAAC,CAAC;QAC9D,MAAM,YAAY,GAAG,gBAAgB,CAAC,YAAY,EAAE,CAAC;QACrD,IAAI,YAAY,EAAE;YAChB,IAAI,CAAC,oBAAoB,CAAC,YAAY,CAAC,CAAC;SACzC;IACH,CAAC;IAED,uBAAuB,CAAC,IAAmD;QACzE,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,MAAM,CAAC,uBAAuB,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IACtF,CAAC;IAED,yBAAyB,CAAC,IAAqD;QAC7E,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,MAAM,CAAC,yBAAyB,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IACxF,CAAC;IAED,qCAAqC,CAAC,IAAiE;QACrG,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,MAAM,CAAC,qCAAqC,EAAE,IAAI,CAAC,CAAC;IAC7F,CAAC;IAED;;;OAGG;IACK,oBAAoB,CACxB,SAAqC,EAAE,OAA8B,EAAE,QAAmC,EAC1G,GAAW,EAAE,WAAmB,EAAE,SAA0C;QAC9E,MAAM,OAAO,GAAG,cAAc,CAAC,MAAM,CACjC,SAAS,EAAE,GAAsC,EAAE,WAA8C,EAAE,OAAO,EAC1G,QAAQ,EAAE,SAAS,CAAC,CAAC;QACzB,mBAAmB,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAChD,OAAO,OAAO,CAAC;IACjB,CAAC;CACF;AAED,IAAI,iCAAiE,CAAC;AAEtE,MAAM,OAAO,yBAA0B,SAAQ,MAAM,CAAC,aAAa,CAAC,aAAmD;IAErH,0BAA0B,CAAS;IACnC,0BAA0B,CAA4C;IACtE,wBAAwB,CAA0C;IACzD,cAAc,CAAmC;IACjD,YAAY,CAAiC;IAC7C,4BAA4B,CAA8B;IACnE,0BAA0B,CAAa;IACvC,oCAAoC,CAAqB;IAChD,uBAAuB,CAAmC;IAC1D,uBAAuB,CAA4C;IAC5E,qBAAqB,CAAW;IACvB,0BAA0B,CACkE;IACrG,aAAa,CAA4B;IACzC,gBAAgB,CAAU;IAE1B;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,0BAA0B,GAAG,EAAE,CAAC;QACrC,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;QACvC,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,cAAc,GAAG,IAAI,GAAG,EAAE,CAAC;QAChC,IAAI,CAAC,YAAY,GAAG,IAAI,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,4BAA4B,GAAG,IAAI,GAAG,EAAE,CAAC;QAC9C,IAAI,CAAC,0BAA0B,GAAG,sBAAsB,CAAC;QACzD,IAAI,CAAC,oCAAoC,GAAG,IAAI,CAAC;QAEjD,oEAAoE;QACpE,IAAI,CAAC,uBAAuB,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,wBAAwB,CAAC,CAAC;QAC3G,IAAI,CAAC,uBAAuB,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,wBAAwB,EAAE,EAAE,CAAC,CAAC;QAC/G,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;QAChC,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAE7B,IAAI,CAAC,0BAA0B,GAAG,IAAI,QAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;QAEvE,aAAa,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;IAC/D,CAAC;IAED,MAAM,CAAC,QAAQ,CAAC,OAEZ,EAAC,QAAQ,EAAE,IAAI,EAAC;QAClB,MAAM,EAAC,QAAQ,EAAC,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,iCAAiC,IAAI,QAAQ,EAAE;YAClD,iCAAiC,GAAG,IAAI,yBAAyB,EAAE,CAAC;SACrE;QAED,OAAO,iCAAiC,CAAC;IAC3C,CAAC;IAED,MAAM,CAAC,gBAAgB;QACrB,MAAM,WAAW,GAAG,0CAA0C,CAAC;QAC/D,MAAM,WAAW,GAAG,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QAC3D,IAAI,WAAW,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;YACzC,OAAO,WAAW,CAAC,CAAC,CAAC,CAAC;SACvB;QACD,OAAO,EAAE,CAAC;IACZ,CAAC;IAED,MAAM,CAAC,+BAA+B,CAAC,QAAgB;QACrD,mGAAmG;QACnG,6FAA6F;QAC7F,MAAM,aAAa,GAAG,yBAAyB,CAAC,gBAAgB,EAAE,CAAC;QACnE,IAAI,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE;YAC5B,gCAAgC;YAChC,MAAM,oBAAoB,GAAG,aAAa,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC;YACzE,OAAO,QAAQ,CAAC,eAAe,CAAC,OAAO,CAAC,QAAQ,EAAE,aAAa,EAAE,oBAAoB,CAAC,CAAC;SACxF;QACD,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED,MAAM,CAAC,uCAAuC,CAAC,iBAAuD;QACpG,4GAA4G;QAC5G,6FAA6F;QAC7F,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE;YAC7B,OAAO;SACR;QACD,MAAM,aAAa,GAAG,yBAAyB,CAAC,gBAAgB,EAAE,CAAC;QACnE,IAAI,aAAa,CAAC,MAAM,KAAK,CAAC,EAAE;YAC9B,OAAO;SACR;QAED,MAAM,YAAY,GAAG,aAAa,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpD,KAAK,MAAM,KAAK,IAAI,iBAAiB,CAAC,MAAM,EAAE;YAC5C,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;gBAChC,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;aAC/E;SACF;QAED,IAAI,iBAAiB,CAAC,WAAW,EAAE;YACjC,IAAI,iBAAiB,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;gBAChD,iBAAiB,CAAC,WAAW,GAAG,QAAQ,CAAC,eAAe,CAAC,OAAO,CAAC,iBAAiB,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;aAChH;SACF;IACH,CAAC;IAED,UAAU,CAAC,cAA8B;QACvC,MAAM,YAAY,GAAG,cAAc,CAAC,MAAM,EAAE,CAAC,YAAY,EAAE,CAAC;QAC5D,MAAM,UAAU,GAAG,cAAc,CAAC,MAAM,EAAE,CAAC,UAAU,EAAE,CAAC;QACxD,IAAI,IAAI,CAAC,aAAa,EAAE;YACtB,KAAK,YAAY,CAAC,0BAA0B,CAAC,EAAC,OAAO,EAAE,IAAI,CAAC,aAAa,EAAC,CAAC,CAAC;SAC7E;QACD,IAAI,IAAI,CAAC,gBAAgB,EAAE,EAAE;YAC3B,KAAK,YAAY,CAAC,2BAA2B,CACzC,EAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,EAAE,EAAE,iBAAiB,EAAE,IAAI,CAAC,0BAA0B,IAAI,SAAS,EAAC,CAAC,CAAC;SAC5G;QACD,IAAI,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE;YACrC,KAAK,YAAY,CAAC,qBAAqB,CAAC,EAAC,IAAI,EAAE,IAAI,CAAC,qBAAqB,EAAC,CAAC,CAAC;SAC7E;QACD,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;YACzB,KAAK,UAAU,CAAC,aAAa,CAAC,EAAC,QAAQ,EAAE,IAAI,CAAC,0BAA0B,CAAC,WAAW,EAAE,EAAC,CAAC,CAAC;SAC1F;QACD,IAAI,IAAI,CAAC,wBAAwB,KAAK,IAAI,EAAE;YAC1C,KAAK,YAAY,CAAC,qCAAqC,EAAE,CAAC;SAC3D;aAAM;YACL,KAAK,YAAY,CAAC,2BAA2B,CAAC,EAAC,SAAS,EAAE,IAAI,CAAC,wBAAwB,EAAC,CAAC,CAAC;SAC3F;QACD,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QACtC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAClC,IAAI,IAAI,CAAC,YAAY,EAAE,EAAE;YACvB,IAAI,CAAC,uBAAuB,CAAC,YAAY,CAAC,CAAC;SAC5C;IACH,CAAC;IAED,YAAY,CAAC,cAA8B;QACzC,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,4BAA4B,EAAE;YACrD,MAAM,OAAO,GAAG,cAAc,CAAC,UAAU,CAAE,KAAK,CAAC,CAAC,CAAoB,CAAC,CAAC;YACxE,IAAI,OAAO,KAAK,cAAc,EAAE;gBAC9B,SAAS;aACV;YACD,IAAI,CAAC,4BAA4B,CAAC,MAAM,CAAE,KAAK,CAAC,CAAC,CAAY,CAAC,CAAC;SAChE;QACD,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC;QACnE,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,UAAU,EAAE,CAAC,CAAC;IACjE,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAC,0BAA0B,CAAC,QAAQ,IAAI,CAAC,IAAI,IAAI,CAAC,0BAA0B,CAAC,MAAM,IAAI,CAAC;YAC/F,IAAI,CAAC,0BAA0B,CAAC,OAAO,GAAG,CAAC,CAAC;IAClD,CAAC;IAED,SAAS;QACP,OAAO,CAAC,IAAI,CAAC,0BAA0B,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,0BAA0B,CAAC,MAAM,CAAC;IAC9F,CAAC;IAED,oBAAoB,CAAC,UAAsB;QACzC,IAAI,CAAC,0BAA0B,GAAG,UAAU,CAAC;QAC7C,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,cAAc,EAAE;YACvC,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,CAAC;SACrC;QACD,IAAI,CAAC,wBAAwB,CAAC,yBAAyB,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;IACpF,CAAC;IAED,iBAAiB;QACf,OAAO,IAAI,CAAC,0BAA0B,CAAC;IACzC,CAAC;IAEO,uBAAuB,CAAC,YAAyC;QACvE,MAAM,UAAU,GAAG,IAAI,CAAC,0BAA0B,CAAC;QACnD,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE;YACxB,KAAK,YAAY,CAAC,+BAA+B,CAC7C,EAAC,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,EAAE,kBAAkB,EAAE,CAAC,EAAE,gBAAgB,EAAE,CAAC,EAAC,CAAC,CAAC;SAC/E;aAAM;YACL,KAAK,YAAY,CAAC,+BAA+B,CAAC;gBAChD,OAAO,EAAE,IAAI,CAAC,SAAS,EAAE;gBACzB,OAAO,EAAE,UAAU,CAAC,OAAO;gBAC3B,kBAAkB,EAAE,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,QAAQ;gBACrE,gBAAgB,EAAE,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM;gBAC/D,cAAc,EAAE,cAAc,CAAC,cAAc,CAAC,UAAU,CAAC;aAC1D,CAAC,CAAC;SACJ;IACH,CAAC;IAED,mBAAmB,CAAC,OAAiC;QACnD,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC;QAC7B,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,cAAc,EAAE;YACvC,KAAK,KAAK,CAAC,0BAA0B,CAAC,EAAC,OAAO,EAAE,IAAI,CAAC,aAAa,EAAC,CAAC,CAAC;SACtE;IACH,CAAC;IAED,gBAAgB;QACd,OAAO,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC;IACzF,CAAC;IAEO,uBAAuB;QAC7B,MAAM,SAAS,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC1C,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,cAAc,EAAE;YACvC,KAAK,KAAK,CAAC,2BAA2B,CAClC,EAAC,SAAS,EAAE,SAAS,EAAE,iBAAiB,EAAE,IAAI,CAAC,0BAA0B,IAAI,SAAS,EAAC,CAAC,CAAC;SAC9F;IACH,CAAC;IAED,oBAAoB,CAAC,SAAiB,EAAE,yBAAoE;QAC1G,MAAM,SAAS,GAAG,CAAC,IAAI,CAAC,0BAA0B,KAAK,SAAS,CAAC,CAAC;QAClE,IAAI,CAAC,0BAA0B,GAAG,SAAS,CAAC;QAC5C,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;YAC1B,IAAI,CAAC,0BAA0B,GAAG,yBAAyB,CAAC;YAC5D,IAAI,CAAC,uBAAuB,EAAE,CAAC;SAChC;aAAM;YACL,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;SACxC;QAED,IAAI,SAAS,EAAE;YACb,IAAI,CAAC,wBAAwB,CAAC,yBAAyB,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;SAClF;IACH,CAAC;IAED,iBAAiB;QACf,OAAO,IAAI,CAAC,0BAA0B,CAAC;IACzC,CAAC;IAED,0BAA0B,CACtB,SAAiB,EAAE,4BAAuE,IAAI;QAChG,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;QAClC,IAAI,CAAC,0BAA0B,GAAG,yBAAyB,CAAC;QAC5D,IAAI,CAAC,uBAAuB,EAAE,CAAC;IACjC,CAAC;IAED,kCAAkC,CAAC,iBAAqD;QACtF,IAAI,CAAC,wBAAwB,GAAG,iBAAiB,CAAC;QAClD,IAAI,CAAC,+BAA+B,EAAE,CAAC;QACvC,IAAI,CAAC,wBAAwB,CAAC,yBAAyB,CAAC,MAAM,CAAC,wBAAwB,CAAC,CAAC;IAC3F,CAAC;IAED,oCAAoC;QAClC,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,+BAA+B,EAAE,CAAC;QACvC,IAAI,CAAC,wBAAwB,CAAC,yBAAyB,CAAC,MAAM,CAAC,wBAAwB,CAAC,CAAC;IAC3F,CAAC;IAED,6BAA6B;QAC3B,OAAO,IAAI,CAAC,wBAAwB,KAAK,IAAI,CAAC;IAChD,CAAC;IAEO,+BAA+B;QACrC,MAAM,uBAAuB,GAAG,IAAI,CAAC,wBAAwB,CAAC;QAC9D,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,cAAc,EAAE;YACvC,IAAI,uBAAuB,KAAK,IAAI,EAAE;gBACpC,KAAK,KAAK,CAAC,qCAAqC,EAAE,CAAC;aACpD;iBAAM;gBACL,KAAK,KAAK,CAAC,2BAA2B,CAAC,EAAC,SAAS,EAAE,uBAAuB,EAAC,CAAC,CAAC;aAC9E;SACF;IACH,CAAC;IAED,yFAAyF;IACzF,eAAe;QACb,OAAO,IAAI,CAAC,uBAAuB,CAAC,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC;IACpD,CAAC;IAED,eAAe;QACb,OAAO,IAAI,CAAC,uBAAuB,CAAC,GAAG,EAAE,CAAC;IAC5C,CAAC;IAED,UAAU;QACR,OAAO,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;IACpD,CAAC;IAED,kBAAkB,CAAC,QAA0B;QAC3C,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,IAAI,CAAC,wBAAwB,CAAC,yBAAyB,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC;IACzF,CAAC;IAED,kBAAkB,CAAC,OAAgB;QACjC,IAAI,IAAI,CAAC,uBAAuB,CAAC,GAAG,EAAE,KAAK,OAAO,EAAE;YAClD,OAAO;SACR;QACD,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC1C,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,IAAI,CAAC,wBAAwB,CAAC,yBAAyB,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC;IACzF,CAAC;IAEO,qBAAqB;QAC3B,MAAM,IAAI,GAAG,EAAE,CAAC;QAChB,IAAI,IAAI,CAAC,uBAAuB,CAAC,GAAG,EAAE,EAAE;YACtC,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,uBAAuB,CAAC,GAAG,EAAE,EAAE;gBACxD,IAAI,OAAO,CAAC,OAAO,EAAE;oBACnB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;iBACxB;aACF;SACF;QAED,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE;YACtD,OAAO;SACR;QACD,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,cAAc,EAAE;YACvC,KAAK,KAAK,CAAC,qBAAqB,CAAC,EAAC,IAAI,EAAE,IAAI,CAAC,qBAAqB,EAAC,CAAC,CAAC;SACtE;IACH,CAAC;IAED,cAAc;QACZ,OAAO,OAAO,CAAC,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,CAAC;IACvD,CAAC;IAED,iCAAiC,CAC7B,QAA+B,EAAE,kBAA+D;QAClG,uGAAuG;QACvG,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC;QAC9D,KAAK,MAAM,UAAU,IAAI,QAAQ,EAAE;YACjC,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;SACrE;QACD,OAAO,IAAI,CAAC,oCAAoC,EAAE,CAAC;IACrD,CAAC;IAEO,oCAAoC;QAC1C,8GAA8G;QAC9G,IAAI,CAAC,IAAI,CAAC,oCAAoC,EAAE;YAC9C,IAAI,CAAC,oCAAoC,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAChH;QACD,OAAO,IAAI,CAAC,oCAAoC,CAAC;IACnD,CAAC;IAEO,KAAK,CAAC,0BAA0B;QACtC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,GAAG,EAAE,EAAE;YAC7E,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SAC9E;QACD,IAAI,CAAC,oCAAoC,GAAG,IAAI,CAAC;QACjD,MAAM,QAAQ,GAAI,EAAyB,CAAC;QAC5C,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,YAAY,EAAE;YACrC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,EAAC,QAAQ,EAAE,IAAI,CAAC,0BAA0B,CAAC,WAAW,EAAE,EAAC,CAAC,CAAC,CAAC;SAC/F;QACD,IAAI,CAAC,wBAAwB,CAAC,yBAAyB,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;QACpF,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAC9B,CAAC;IAED,KAAK,CAAC,kBAAkB,CAAC,kBAAsC;QAC7D,KAAK,MAAM,kBAAkB,IAAI,IAAI,CAAC,0BAA0B,CAAC,SAAS,EAAE,EAAE;YAC5E,MAAM,kBAAkB,CAAC,kBAAkB,CAAC,CAAC;YAC7C,IAAI,kBAAkB,CAAC,YAAY,EAAE,EAAE;gBACrC,IAAI,CAAC,wBAAwB,CACzB,yBAAyB,CAAC,MAAM,CAAC,kBAAkB,EACnD,kBAAkB,CAAC,OAAO,CAAC,GAAsC,CAAC,CAAC;gBACvE,OAAO;aACR;SACF;QACD,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,EAAE;YACtC,kBAAkB,CAAC,4BAA4B,EAAE,CAAC;SACnD;IACH,CAAC;IAED,iBAAiB;QACf,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,cAAc,EAAE;YACvC,KAAK,KAAK,CAAC,wBAAwB,EAAE,CAAC;SACvC;IACH,CAAC;IAED,mBAAmB;QACjB,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,cAAc,EAAE;YACvC,KAAK,KAAK,CAAC,0BAA0B,EAAE,CAAC;SACzC;IACH,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,MAAc;QACjC,MAAM,MAAM,GAAG,aAAa,CAAC,QAAQ,EAAE,CAAC,UAAU,EAAE,CAAC;QACrD,IAAI,CAAC,MAAM,EAAE;YACX,OAAO,EAAE,CAAC;SACX;QACD,MAAM,WAAW,GAAG,MAAM,MAAM,CAAC,YAAY,EAAE,CAAC,qBAAqB,CAAC,EAAC,MAAM,EAAC,CAAC,CAAC;QAChF,IAAI,CAAC,WAAW,EAAE;YAChB,OAAO,EAAE,CAAC;SACX;QACD,OAAO,WAAW,CAAC,UAAU,CAAC;IAChC,CAAC;IAED,KAAK,CAAC,YAAY,CAAC,GAAoC;QAKrD,MAAM,OAAO,GAET,EAAE,CAAC;QAEP,MAAM,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACjD,IAAI,gBAAgB,EAAE;YACpB,OAAO,CAAC,YAAY,CAAC,GAAG,gBAAgB,CAAC;SAC1C;QAED,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,GAAG,EAAE,EAAE;YAC5E,OAAO,CAAC,eAAe,CAAC,GAAG,UAAU,CAAC;SACvC;QAED,OAAO,IAAI,OAAO,CACd,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,EAAE,CAAC,OAAO,EAAE,gBAAgB,EAAE,OAAO,EAAE,gBAAgB,EAAE,EAAE;YACzG,OAAO,CAAC,EAAC,OAAO,EAAE,OAAO,EAAE,gBAAgB,EAAC,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC,CAAC;IACV,CAAC;CACF;AAED,WAAiB,yBAAyB;IACxC,wDAAwD;IACxD,+CAA+C;IAC/C,IAAY,MAOX;IAPD,WAAY,MAAM;QAChB,2DAAiD,CAAA;QACjD,iDAAuC,CAAA;QACvC,+CAAqC,CAAA;QACrC,qDAA2C,CAAA;QAC3C,+DAAqD,CAAA;QACrD,mDAAyC,CAAA;IAC3C,CAAC,EAPW,MAAM,GAAN,gCAAM,KAAN,gCAAM,QAOjB;AAUH,CAAC,EApBgB,yBAAyB,KAAzB,yBAAyB,QAoBzC;AAED,MAAM,OAAO,kBAAkB;IACpB,WAAW,CAA4B;IAChD,qBAAqB,CAAU;IAC/B,OAAO,CAA2B;IAClC,YAAY,CAAgC;IAC5C,kBAAkB,CAAmB;IACrC,eAAe,CAAyC;IACxD,SAAS,CAA2B;IAEpC,YACI,UAAqC,EACrC,OAAiC,EACjC,YAA2C,EAC3C,SAAmC,EACnC,kBAA2B,EAC3B,eAA8C;QAEhD,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;QACnC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;QACjC,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;QAC7C,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;QACvC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC7B,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAC,qBAAqB,CAAC;IACpC,CAAC;IAED,KAAK,CAAC,0BAA0B,CAAC,WAAiB,EAAE,OAAgB,EAAE,eAA6C;QAEjH,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,MAAM,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC,MAAM,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,MAAM,YAAY,CAAC,WAAW,CAAC,CAAC;QAClF,KAAK,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,EAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,YAAY,EAAE,GAAG,EAAE,IAAI,EAAE,eAAe,EAAC,CAAC,CAAC;QAEnH,KAAK,UAAU,YAAY,CAAC,IAAU;YACpC,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;YAChC,MAAM,yBAAyB,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;gBACtD,MAAM,CAAC,SAAS,GAAG,OAAO,CAAC;YAC7B,CAAC,CAAC,CAAC;YACH,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAC3B,MAAM,yBAAyB,CAAC;YAChC,IAAI,MAAM,CAAC,KAAK,EAAE;gBAChB,OAAO,CAAC,KAAK,CAAC,mCAAmC,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;gBACjE,OAAO,EAAE,CAAC;aACX;YACD,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;YAC7B,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,IAAI,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;gBACzE,OAAO,CAAC,KAAK,CAAC,mCAAmC,CAAC,CAAC;gBACnD,OAAO,EAAE,CAAC;aACX;YACD,OAAO,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QACnD,CAAC;IACH,CAAC;IAED,4BAA4B;QAC1B,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QAC5C,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,KAAK,IAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,EAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAC,CAAC,CAAC;IAC5E,CAAC;IAED,wBAAwB,CAAC,WAAyC;QAChE,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QAC5C,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,KAAK,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,EAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,WAAW,EAAC,CAAC,CAAC;IACrF,CAAC;IAED,KAAK,CAAC,YAAY;QAChB,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,EAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAC,CAAC,CAAC;QAC5F,MAAM,KAAK,GAAG,QAAQ,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC;QAC1C,OAAO,EAAC,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,EAAE,QAAQ,CAAC,aAAa,EAAC,CAAC;IAChG,CAAC;CACF;AAED;;;;GAIG;AACH,MAAM,gBAAgB;IACX,SAAS,CAAmB;IACrC,kBAAkB,CAA4B;IAC9C,mBAAmB,CAA6B;IAChD,iBAAiB,CAAU;IAC3B,cAAc,CAAqB;IACnC,0BAA0B,CAAiC;IAE3D;QACE,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAC7B,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;IACzC,CAAC;IAED,UAAU,CAAC,GAAmB;QAC5B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IACvC,CAAC;IAED,mBAAmB,CAAC,IAAsB;QACxC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAChD,CAAC;IAED,oBAAoB,CAAC,IAAuB;QAC1C,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IACjD,CAAC;IAED,gBAAgB,CAAC,IAAmB;QAClC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAED,4BAA4B,CAAC,IAA+B;QAC1D,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;QACvC,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAEO,IAAI,CAAC,KAAa;QACxB,MAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,CAAC,GAAG,EAAE;YACR,OAAO;SACR;QAED,MAAM,gBAAgB,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QACxD,IAAI,gBAAgB,EAAE;YACpB,GAAG,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,CAAC;YAC1C,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;SACvC;QAED,MAAM,iBAAiB,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;QAC1D,IAAI,iBAAiB,EAAE;YACrB,GAAG,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,CAAC;YAC5C,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;SACxC;IACH,CAAC;IAED,YAAY;QACV,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YAC3B,OAAO,IAAI,CAAC;SACb;QACD,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC;IAC3D,CAAC;IAEO,kBAAkB;QACxB,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YAC3B,OAAO;SACR;QACD,MAAM,YAAY,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACzC,YAAY,EAAE,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACpD,YAAY,EAAE,4BAA4B,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;IAC9E,CAAC;CACF;AAED,QAAQ,CAAC,QAAQ,CAAC,cAAc,EAAE,EAAC,YAAY,EAAE,UAAU,CAAC,OAAO,EAAE,SAAS,EAAE,IAAI,EAAC,CAAC,CAAC;AAEvF,MAAM,OAAO,oBAAoB;IAC/B,SAAS,CAAC,KAAc;QACtB,MAAM,UAAU,GAAG,KAAmB,CAAC;QACvC,OAAO,IAAI,CAAC,SAAS,CAAC;YACpB,GAAG,UAAU;YACb,KAAK,EAAE,OAAO,UAAU,CAAC,KAAK,KAAK,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK;SACtF,CAAC,CAAC;IACL,CAAC;IAED,KAAK,CAAC,UAAkB;QACtB,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QACtC,OAAO;YACL,GAAG,MAAM;YACT,6EAA6E;YAC7E,KAAK,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK;SAChF,CAAC;IACJ,CAAC;CACF;AAED,MAAM,UAAU,sBAAsB,CAAC,KAAiB,EAAE,MAAkB;IAC1E,uEAAuE;IACvE,kBAAkB;IAClB,MAAM,UAAU,GAAG,OAAO,KAAK,CAAC,KAAK,KAAK,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC;IACnF,MAAM,WAAW,GAAG,OAAO,MAAM,CAAC,KAAK,KAAK,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;IACvF,OAAO,MAAM,CAAC,QAAQ,KAAK,KAAK,CAAC,QAAQ,IAAI,MAAM,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,IAAI,MAAM,CAAC,OAAO,KAAK,KAAK,CAAC,OAAO;QAC3G,WAAW,KAAK,UAAU,CAAC;AACjC,CAAC","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the #name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport type * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as i18n from '../i18n/i18n.js';\nimport * as Platform from '../platform/platform.js';\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nimport {Cookie} from './Cookie.js';\nimport type {\n  BlockedCookieWithReason, ContentData, ExtraRequestInfo, ExtraResponseInfo, MIME_TYPE, NameValue, WebBundleInfo,\n  WebBundleInnerRequestInfo} from './NetworkRequest.js';\nimport {Events as NetworkRequestEvents, NetworkRequest} from './NetworkRequest.js';\nimport type {Target} from './Target.js';\nimport {Capability} from './Target.js';\nimport {SDKModel} from './SDKModel.js';\nimport type {SDKModelObserver} from './TargetManager.js';\nimport {TargetManager} from './TargetManager.js';\nimport type {Serializer} from '../common/Settings.js';\n\nconst UIStrings = {\n  /**\n  *@description Explanation why no content is shown for WebSocket connection.\n  */\n  noContentForWebSocket: 'Content for WebSockets is currently not supported',\n  /**\n  *@description Explanation why no content is shown for redirect response.\n  */\n  noContentForRedirect: 'No content available because this request was redirected',\n  /**\n  *@description Explanation why no content is shown for preflight request.\n  */\n  noContentForPreflight: 'No content available for preflight request',\n  /**\n  *@description Text to indicate that network throttling is disabled\n  */\n  noThrottling: 'No throttling',\n  /**\n  *@description Text to indicate the network connectivity is offline\n  */\n  offline: 'Offline',\n  /**\n  *@description Text in Network Manager\n  */\n  slowG: 'Slow 3G',\n  /**\n  *@description Text in Network Manager\n  */\n  fastG: 'Fast 3G',\n  /**\n  *@description Text in Network Manager\n  *@example {https://example.com} PH1\n  */\n  requestWasBlockedByDevtoolsS: 'Request was blocked by DevTools: \"{PH1}\"',\n  /**\n  *@description Text in Network Manager\n  *@example {https://example.com} PH1\n  *@example {application} PH2\n  */\n  crossoriginReadBlockingCorb:\n      'Cross-Origin Read Blocking (CORB) blocked cross-origin response {PH1} with MIME type {PH2}. See https://www.chromestatus.com/feature/5629709824032768 for more details.',\n  /**\n  *@description Message in Network Manager\n  *@example {XHR} PH1\n  *@example {GET} PH2\n  *@example {https://example.com} PH3\n  */\n  sFailedLoadingSS: '{PH1} failed loading: {PH2} \"{PH3}\".',\n  /**\n  *@description Message in Network Manager\n  *@example {XHR} PH1\n  *@example {GET} PH2\n  *@example {https://example.com} PH3\n  */\n  sFinishedLoadingSS: '{PH1} finished loading: {PH2} \"{PH3}\".',\n};\nconst str_ = i18n.i18n.registerUIStrings('core/sdk/NetworkManager.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nconst requestToManagerMap = new WeakMap<NetworkRequest, NetworkManager>();\n\nconst CONNECTION_TYPES = new Map([\n  ['2g', Protocol.Network.ConnectionType.Cellular2g],\n  ['3g', Protocol.Network.ConnectionType.Cellular3g],\n  ['4g', Protocol.Network.ConnectionType.Cellular4g],\n  ['bluetooth', Protocol.Network.ConnectionType.Bluetooth],\n  ['wifi', Protocol.Network.ConnectionType.Wifi],\n  ['wimax', Protocol.Network.ConnectionType.Wimax],\n]);\n\nexport class NetworkManager extends SDKModel<EventTypes> {\n  readonly dispatcher: NetworkDispatcher;\n  readonly fetchDispatcher: FetchDispatcher;\n  readonly #networkAgent: ProtocolProxyApi.NetworkApi;\n  readonly #bypassServiceWorkerSetting: Common.Settings.Setting<boolean>;\n\n  constructor(target: Target) {\n    super(target);\n    this.dispatcher = new NetworkDispatcher(this);\n    this.fetchDispatcher = new FetchDispatcher(target.fetchAgent());\n    this.#networkAgent = target.networkAgent();\n    target.registerNetworkDispatcher(this.dispatcher);\n    target.registerFetchDispatcher(this.fetchDispatcher);\n    if (Common.Settings.Settings.instance().moduleSetting('cacheDisabled').get()) {\n      void this.#networkAgent.invoke_setCacheDisabled({cacheDisabled: true});\n    }\n\n    void this.#networkAgent.invoke_enable({maxPostDataSize: MAX_EAGER_POST_REQUEST_BODY_LENGTH});\n    void this.#networkAgent.invoke_setAttachDebugStack({enabled: true});\n\n    this.#bypassServiceWorkerSetting = Common.Settings.Settings.instance().createSetting('bypassServiceWorker', false);\n    if (this.#bypassServiceWorkerSetting.get()) {\n      this.bypassServiceWorkerChanged();\n    }\n    this.#bypassServiceWorkerSetting.addChangeListener(this.bypassServiceWorkerChanged, this);\n\n    Common.Settings.Settings.instance()\n        .moduleSetting('cacheDisabled')\n        .addChangeListener(this.cacheDisabledSettingChanged, this);\n  }\n\n  static forRequest(request: NetworkRequest): NetworkManager|null {\n    return requestToManagerMap.get(request) || null;\n  }\n\n  static canReplayRequest(request: NetworkRequest): boolean {\n    return Boolean(requestToManagerMap.get(request)) && Boolean(request.backendRequestId()) && !request.isRedirect() &&\n        request.resourceType() === Common.ResourceType.resourceTypes.XHR;\n  }\n\n  static replayRequest(request: NetworkRequest): void {\n    const manager = requestToManagerMap.get(request);\n    const requestId = request.backendRequestId();\n    if (!manager || !requestId || request.isRedirect()) {\n      return;\n    }\n    void manager.#networkAgent.invoke_replayXHR({requestId});\n  }\n\n  static async searchInRequest(request: NetworkRequest, query: string, caseSensitive: boolean, isRegex: boolean):\n      Promise<TextUtils.ContentProvider.SearchMatch[]> {\n    const manager = NetworkManager.forRequest(request);\n    const requestId = request.backendRequestId();\n    if (!manager || !requestId || request.isRedirect()) {\n      return [];\n    }\n    const response = await manager.#networkAgent.invoke_searchInResponseBody(\n        {requestId, query: query, caseSensitive: caseSensitive, isRegex: isRegex});\n    return response.result || [];\n  }\n\n  static async requestContentData(request: NetworkRequest): Promise<ContentData> {\n    if (request.resourceType() === Common.ResourceType.resourceTypes.WebSocket) {\n      return {error: i18nString(UIStrings.noContentForWebSocket), content: null, encoded: false};\n    }\n    if (!request.finished) {\n      await request.once(NetworkRequestEvents.FinishedLoading);\n    }\n    if (request.isRedirect()) {\n      return {error: i18nString(UIStrings.noContentForRedirect), content: null, encoded: false};\n    }\n    if (request.isPreflightRequest()) {\n      return {error: i18nString(UIStrings.noContentForPreflight), content: null, encoded: false};\n    }\n    const manager = NetworkManager.forRequest(request);\n    if (!manager) {\n      return {error: 'No network manager for request', content: null, encoded: false};\n    }\n    const requestId = request.backendRequestId();\n    if (!requestId) {\n      return {error: 'No backend request id for request', content: null, encoded: false};\n    }\n    const response = await manager.#networkAgent.invoke_getResponseBody({requestId});\n    const error = response.getError() || null;\n    return {error: error, content: error ? null : response.body, encoded: response.base64Encoded};\n  }\n\n  static async requestPostData(request: NetworkRequest): Promise<string|null> {\n    const manager = NetworkManager.forRequest(request);\n    if (!manager) {\n      console.error('No network manager for request');\n      return null;\n    }\n    const requestId = request.backendRequestId();\n    if (!requestId) {\n      console.error('No backend request id for request');\n      return null;\n    }\n    try {\n      const {postData} = await manager.#networkAgent.invoke_getRequestPostData({requestId});\n      return postData;\n    } catch (e) {\n      return e.message;\n    }\n  }\n\n  static connectionType(conditions: Conditions): Protocol.Network.ConnectionType {\n    if (!conditions.download && !conditions.upload) {\n      return Protocol.Network.ConnectionType.None;\n    }\n    const title =\n        typeof conditions.title === 'function' ? conditions.title().toLowerCase() : conditions.title.toLowerCase();\n    for (const [name, protocolType] of CONNECTION_TYPES) {\n      if (title.includes(name)) {\n        return protocolType;\n      }\n    }\n    return Protocol.Network.ConnectionType.Other;\n  }\n\n  static lowercaseHeaders(headers: Protocol.Network.Headers): Protocol.Network.Headers {\n    const newHeaders: Protocol.Network.Headers = {};\n    for (const headerName in headers) {\n      newHeaders[headerName.toLowerCase()] = headers[headerName];\n    }\n    return newHeaders;\n  }\n\n  requestForURL(url: Platform.DevToolsPath.UrlString): NetworkRequest|null {\n    return this.dispatcher.requestForURL(url);\n  }\n\n  requestforId(id: string): NetworkRequest|null {\n    return this.dispatcher.requestForId(id);\n  }\n\n  private cacheDisabledSettingChanged({data: enabled}: Common.EventTarget.EventTargetEvent<boolean>): void {\n    void this.#networkAgent.invoke_setCacheDisabled({cacheDisabled: enabled});\n  }\n\n  dispose(): void {\n    Common.Settings.Settings.instance()\n        .moduleSetting('cacheDisabled')\n        .removeChangeListener(this.cacheDisabledSettingChanged, this);\n  }\n\n  private bypassServiceWorkerChanged(): void {\n    void this.#networkAgent.invoke_setBypassServiceWorker({bypass: this.#bypassServiceWorkerSetting.get()});\n  }\n\n  async getSecurityIsolationStatus(frameId: Protocol.Page.FrameId|\n                                   null): Promise<Protocol.Network.SecurityIsolationStatus|null> {\n    const result = await this.#networkAgent.invoke_getSecurityIsolationStatus({frameId: frameId ?? undefined});\n    if (result.getError()) {\n      return null;\n    }\n    return result.status;\n  }\n\n  async enableReportingApi(enable: boolean = true): Promise<Promise<Protocol.ProtocolResponseWithError>> {\n    return this.#networkAgent.invoke_enableReportingApi({enable});\n  }\n\n  async loadNetworkResource(\n      frameId: Protocol.Page.FrameId|null, url: Platform.DevToolsPath.UrlString,\n      options: Protocol.Network.LoadNetworkResourceOptions): Promise<Protocol.Network.LoadNetworkResourcePageResult> {\n    const result = await this.#networkAgent.invoke_loadNetworkResource({frameId: frameId ?? undefined, url, options});\n    if (result.getError()) {\n      throw new Error(result.getError());\n    }\n    return result.resource;\n  }\n\n  clearRequests(): void {\n    this.dispatcher.clearRequests();\n  }\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  RequestStarted = 'RequestStarted',\n  RequestUpdated = 'RequestUpdated',\n  RequestFinished = 'RequestFinished',\n  RequestUpdateDropped = 'RequestUpdateDropped',\n  ResponseReceived = 'ResponseReceived',\n  MessageGenerated = 'MessageGenerated',\n  RequestRedirected = 'RequestRedirected',\n  LoadingFinished = 'LoadingFinished',\n  ReportingApiReportAdded = 'ReportingApiReportAdded',\n  ReportingApiReportUpdated = 'ReportingApiReportUpdated',\n  ReportingApiEndpointsChangedForOrigin = 'ReportingApiEndpointsChangedForOrigin',\n}\n\nexport interface RequestStartedEvent {\n  request: NetworkRequest;\n  originalRequest: Protocol.Network.Request|null;\n}\n\nexport interface ResponseReceivedEvent {\n  request: NetworkRequest;\n  response: Protocol.Network.Response;\n}\n\nexport interface MessageGeneratedEvent {\n  message: Common.UIString.LocalizedString;\n  requestId: string;\n  warning: boolean;\n}\n\nexport type EventTypes = {\n  [Events.RequestStarted]: RequestStartedEvent,\n  [Events.RequestUpdated]: NetworkRequest,\n  [Events.RequestFinished]: NetworkRequest,\n  [Events.RequestUpdateDropped]: RequestUpdateDroppedEventData,\n  [Events.ResponseReceived]: ResponseReceivedEvent,\n  [Events.MessageGenerated]: MessageGeneratedEvent,\n  [Events.RequestRedirected]: NetworkRequest,\n  [Events.LoadingFinished]: NetworkRequest,\n  [Events.ReportingApiReportAdded]: Protocol.Network.ReportingApiReport,\n  [Events.ReportingApiReportUpdated]: Protocol.Network.ReportingApiReport,\n  [Events.ReportingApiEndpointsChangedForOrigin]: Protocol.Network.ReportingApiEndpointsChangedForOriginEvent,\n};\n\nexport const NoThrottlingConditions: Conditions = {\n  title: i18nLazyString(UIStrings.noThrottling),\n  i18nTitleKey: UIStrings.noThrottling,\n  download: -1,\n  upload: -1,\n  latency: 0,\n};\n\nexport const OfflineConditions: Conditions = {\n  title: i18nLazyString(UIStrings.offline),\n  i18nTitleKey: UIStrings.offline,\n  download: 0,\n  upload: 0,\n  latency: 0,\n};\n\nexport const Slow3GConditions: Conditions = {\n  title: i18nLazyString(UIStrings.slowG),\n  i18nTitleKey: UIStrings.slowG,\n  download: 500 * 1000 / 8 * .8,\n  upload: 500 * 1000 / 8 * .8,\n  latency: 400 * 5,\n};\n\nexport const Fast3GConditions: Conditions = {\n  title: i18nLazyString(UIStrings.fastG),\n  i18nTitleKey: UIStrings.fastG,\n  download: 1.6 * 1000 * 1000 / 8 * .9,\n  upload: 750 * 1000 / 8 * .9,\n  latency: 150 * 3.75,\n};\n\nconst MAX_EAGER_POST_REQUEST_BODY_LENGTH = 64 * 1024;  // bytes\n\nexport class FetchDispatcher implements ProtocolProxyApi.FetchDispatcher {\n  readonly #fetchAgent: ProtocolProxyApi.FetchApi;\n\n  constructor(agent: ProtocolProxyApi.FetchApi) {\n    this.#fetchAgent = agent;\n  }\n\n  requestPaused({requestId, request, resourceType, responseStatusCode, responseHeaders}:\n                    Protocol.Fetch.RequestPausedEvent): void {\n    void MultitargetNetworkManager.instance().requestIntercepted(new InterceptedRequest(\n        this.#fetchAgent, request, resourceType, requestId, responseStatusCode, responseHeaders));\n  }\n\n  authRequired({}: Protocol.Fetch.AuthRequiredEvent): void {\n  }\n}\n\nexport class NetworkDispatcher implements ProtocolProxyApi.NetworkDispatcher {\n  readonly #manager: NetworkManager;\n  #requestsById: Map<string, NetworkRequest>;\n  #requestsByURL: Map<Platform.DevToolsPath.UrlString, NetworkRequest>;\n  #requestIdToExtraInfoBuilder: Map<string, ExtraInfoBuilder>;\n  readonly #requestIdToTrustTokenEvent: Map<string, Protocol.Network.TrustTokenOperationDoneEvent>;\n  constructor(manager: NetworkManager) {\n    this.#manager = manager;\n    this.#requestsById = new Map();\n    this.#requestsByURL = new Map();\n    this.#requestIdToExtraInfoBuilder = new Map();\n    /**\n     * In case of an early abort or a cache hit, the Trust Token done event is\n     * reported before the request itself is created in `requestWillBeSent`.\n     * This causes the event to be lost as no `NetworkRequest` instance has been\n     * created yet.\n     * This map caches the events temporarliy and populates the NetworKRequest\n     * once it is created in `requestWillBeSent`.\n     */\n    this.#requestIdToTrustTokenEvent = new Map();\n\n    MultitargetNetworkManager.instance().addEventListener(\n        MultitargetNetworkManager.Events.RequestIntercepted, this.#markAsIntercepted.bind(this));\n  }\n\n  #markAsIntercepted(event: Common.EventTarget.EventTargetEvent<Platform.DevToolsPath.UrlString>): void {\n    const request = this.requestForURL(event.data);\n    if (request) {\n      request.setWasIntercepted(true);\n    }\n  }\n\n  private headersMapToHeadersArray(headersMap: Protocol.Network.Headers): NameValue[] {\n    const result = [];\n    for (const name in headersMap) {\n      const values = headersMap[name].split('\\n');\n      for (let i = 0; i < values.length; ++i) {\n        result.push({name: name, value: values[i]});\n      }\n    }\n    return result;\n  }\n\n  private updateNetworkRequestWithRequest(networkRequest: NetworkRequest, request: Protocol.Network.Request): void {\n    networkRequest.requestMethod = request.method;\n    networkRequest.setRequestHeaders(this.headersMapToHeadersArray(request.headers));\n    networkRequest.setRequestFormData(Boolean(request.hasPostData), request.postData || null);\n    networkRequest.setInitialPriority(request.initialPriority);\n    networkRequest.mixedContentType = request.mixedContentType || Protocol.Security.MixedContentType.None;\n    networkRequest.setReferrerPolicy(request.referrerPolicy);\n    networkRequest.setIsSameSite(request.isSameSite || false);\n  }\n\n  private updateNetworkRequestWithResponse(networkRequest: NetworkRequest, response: Protocol.Network.Response): void {\n    if (response.url && networkRequest.url() !== response.url) {\n      networkRequest.setUrl(response.url as Platform.DevToolsPath.UrlString);\n    }\n    networkRequest.mimeType = (response.mimeType as MIME_TYPE);\n    if (!networkRequest.statusCode) {\n      networkRequest.statusCode = response.status;\n    }\n    if (!networkRequest.statusText) {\n      networkRequest.statusText = response.statusText;\n    }\n    if (!networkRequest.hasExtraResponseInfo() || networkRequest.wasIntercepted()) {\n      networkRequest.responseHeaders = this.headersMapToHeadersArray(response.headers);\n    }\n\n    if (response.encodedDataLength >= 0) {\n      networkRequest.setTransferSize(response.encodedDataLength);\n    }\n\n    if (response.requestHeaders && !networkRequest.hasExtraRequestInfo()) {\n      // TODO(http://crbug.com/1004979): Stop using response.requestHeaders and\n      //   response.requestHeadersText once shared workers\n      //   emit Network.*ExtraInfo events for their network #requests.\n      networkRequest.setRequestHeaders(this.headersMapToHeadersArray(response.requestHeaders));\n      networkRequest.setRequestHeadersText(response.requestHeadersText || '');\n    }\n\n    networkRequest.connectionReused = response.connectionReused;\n    networkRequest.connectionId = String(response.connectionId);\n    if (response.remoteIPAddress) {\n      networkRequest.setRemoteAddress(response.remoteIPAddress, response.remotePort || -1);\n    }\n\n    if (response.fromServiceWorker) {\n      networkRequest.fetchedViaServiceWorker = true;\n    }\n\n    if (response.fromDiskCache) {\n      networkRequest.setFromDiskCache();\n    }\n\n    if (response.fromPrefetchCache) {\n      networkRequest.setFromPrefetchCache();\n    }\n\n    if (response.cacheStorageCacheName) {\n      networkRequest.setResponseCacheStorageCacheName(response.cacheStorageCacheName);\n    }\n\n    if (response.responseTime) {\n      networkRequest.setResponseRetrievalTime(new Date(response.responseTime));\n    }\n\n    networkRequest.timing = response.timing;\n\n    networkRequest.protocol = response.protocol || '';\n\n    if (response.serviceWorkerResponseSource) {\n      networkRequest.setServiceWorkerResponseSource(response.serviceWorkerResponseSource);\n    }\n\n    networkRequest.setSecurityState(response.securityState);\n\n    if (response.securityDetails) {\n      networkRequest.setSecurityDetails(response.securityDetails);\n    }\n\n    const newResourceType = Common.ResourceType.ResourceType.fromMimeTypeOverride(networkRequest.mimeType);\n    if (newResourceType) {\n      networkRequest.setResourceType(newResourceType);\n    }\n  }\n\n  requestForId(id: string): NetworkRequest|null {\n    return this.#requestsById.get(id) || null;\n  }\n\n  requestForURL(url: Platform.DevToolsPath.UrlString): NetworkRequest|null {\n    return this.#requestsByURL.get(url) || null;\n  }\n\n  resourceChangedPriority({requestId, newPriority}: Protocol.Network.ResourceChangedPriorityEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (networkRequest) {\n      networkRequest.setPriority(newPriority);\n    }\n  }\n\n  signedExchangeReceived({requestId, info}: Protocol.Network.SignedExchangeReceivedEvent): void {\n    // While loading a signed exchange, a signedExchangeReceived event is sent\n    // between two requestWillBeSent events.\n    // 1. The first requestWillBeSent is sent while starting the navigation (or\n    //    prefetching).\n    // 2. This signedExchangeReceived event is sent when the browser detects the\n    //    signed exchange.\n    // 3. The second requestWillBeSent is sent with the generated redirect\n    //    response and a new redirected request which URL is the inner request\n    //    URL of the signed exchange.\n    let networkRequest = this.#requestsById.get(requestId);\n    // |requestId| is available only for navigation #requests. If the request was\n    // sent from a renderer process for prefetching, it is not available. In the\n    // case, need to fallback to look for the URL.\n    // TODO(crbug/841076): Sends the request ID of prefetching to the browser\n    // process and DevTools to find the matching request.\n    if (!networkRequest) {\n      networkRequest = this.#requestsByURL.get(info.outerResponse.url as Platform.DevToolsPath.UrlString);\n      if (!networkRequest) {\n        return;\n      }\n    }\n    networkRequest.setSignedExchangeInfo(info);\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.SignedExchange);\n\n    this.updateNetworkRequestWithResponse(networkRequest, info.outerResponse);\n    this.updateNetworkRequest(networkRequest);\n    this.#manager.dispatchEventToListeners(\n        Events.ResponseReceived, {request: networkRequest, response: info.outerResponse});\n  }\n\n  requestWillBeSent(\n      {requestId, loaderId, documentURL, request, timestamp, wallTime, initiator, redirectResponse, type, frameId}:\n          Protocol.Network.RequestWillBeSentEvent): void {\n    let networkRequest = this.#requestsById.get(requestId);\n    if (networkRequest) {\n      // FIXME: move this check to the backend.\n      if (!redirectResponse) {\n        return;\n      }\n      // If signedExchangeReceived event has already been sent for the request,\n      // ignores the internally generated |redirectResponse|. The\n      // |outerResponse| of SignedExchangeInfo was set to |networkRequest| in\n      // signedExchangeReceived().\n      if (!networkRequest.signedExchangeInfo()) {\n        this.responseReceived({\n          requestId,\n          loaderId,\n          timestamp,\n          type: type || Protocol.Network.ResourceType.Other,\n          response: redirectResponse,\n          hasExtraInfo: false,\n          frameId,\n        });\n      }\n      networkRequest = this.appendRedirect(requestId, timestamp, request.url as Platform.DevToolsPath.UrlString);\n      this.#manager.dispatchEventToListeners(Events.RequestRedirected, networkRequest);\n    } else {\n      networkRequest = NetworkRequest.create(\n          requestId, request.url as Platform.DevToolsPath.UrlString, documentURL as Platform.DevToolsPath.UrlString,\n          frameId ?? null, loaderId, initiator);\n      requestToManagerMap.set(networkRequest, this.#manager);\n    }\n    networkRequest.hasNetworkData = true;\n    this.updateNetworkRequestWithRequest(networkRequest, request);\n    networkRequest.setIssueTime(timestamp, wallTime);\n    networkRequest.setResourceType(\n        type ? Common.ResourceType.resourceTypes[type] : Common.ResourceType.resourceTypes.Other);\n    if (request.trustTokenParams) {\n      networkRequest.setTrustTokenParams(request.trustTokenParams);\n    }\n    const maybeTrustTokenEvent = this.#requestIdToTrustTokenEvent.get(requestId);\n    if (maybeTrustTokenEvent) {\n      networkRequest.setTrustTokenOperationDoneEvent(maybeTrustTokenEvent);\n      this.#requestIdToTrustTokenEvent.delete(requestId);\n    }\n\n    this.getExtraInfoBuilder(requestId).addRequest(networkRequest);\n\n    this.startNetworkRequest(networkRequest, request);\n  }\n\n  requestServedFromCache({requestId}: Protocol.Network.RequestServedFromCacheEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.setFromMemoryCache();\n  }\n\n  responseReceived({requestId, loaderId, timestamp, type, response, frameId}: Protocol.Network.ResponseReceivedEvent):\n      void {\n    const networkRequest = this.#requestsById.get(requestId);\n    const lowercaseHeaders = NetworkManager.lowercaseHeaders(response.headers);\n    if (!networkRequest) {\n      const lastModifiedHeader = lowercaseHeaders['last-modified'];\n      // We missed the requestWillBeSent.\n      const eventData: RequestUpdateDroppedEventData = {\n        url: response.url as Platform.DevToolsPath.UrlString,\n        frameId: frameId ?? null,\n        loaderId: loaderId,\n        resourceType: type,\n        mimeType: response.mimeType,\n        lastModified: lastModifiedHeader ? new Date(lastModifiedHeader) : null,\n      };\n      this.#manager.dispatchEventToListeners(Events.RequestUpdateDropped, eventData);\n      return;\n    }\n\n    networkRequest.responseReceivedTime = timestamp;\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes[type]);\n\n    this.updateNetworkRequestWithResponse(networkRequest, response);\n\n    this.updateNetworkRequest(networkRequest);\n    this.#manager.dispatchEventToListeners(Events.ResponseReceived, {request: networkRequest, response});\n  }\n\n  dataReceived({requestId, timestamp, dataLength, encodedDataLength}: Protocol.Network.DataReceivedEvent): void {\n    let networkRequest: NetworkRequest|null|undefined = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      networkRequest = this.maybeAdoptMainResourceRequest(requestId);\n    }\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.resourceSize += dataLength;\n    if (encodedDataLength !== -1) {\n      networkRequest.increaseTransferSize(encodedDataLength);\n    }\n    networkRequest.endTime = timestamp;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  loadingFinished({requestId, timestamp: finishTime, encodedDataLength, shouldReportCorbBlocking}:\n                      Protocol.Network.LoadingFinishedEvent): void {\n    let networkRequest: NetworkRequest|null|undefined = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      networkRequest = this.maybeAdoptMainResourceRequest(requestId);\n    }\n    if (!networkRequest) {\n      return;\n    }\n    this.getExtraInfoBuilder(requestId).finished();\n    this.finishNetworkRequest(networkRequest, finishTime, encodedDataLength, shouldReportCorbBlocking);\n    this.#manager.dispatchEventToListeners(Events.LoadingFinished, networkRequest);\n  }\n\n  loadingFailed({\n    requestId,\n    timestamp: time,\n    type: resourceType,\n    errorText: localizedDescription,\n    canceled,\n    blockedReason,\n    corsErrorStatus,\n  }: Protocol.Network.LoadingFailedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.failed = true;\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes[resourceType]);\n    networkRequest.canceled = Boolean(canceled);\n    if (blockedReason) {\n      networkRequest.setBlockedReason(blockedReason);\n      if (blockedReason === Protocol.Network.BlockedReason.Inspector) {\n        const message = i18nString(UIStrings.requestWasBlockedByDevtoolsS, {PH1: networkRequest.url()});\n        this.#manager.dispatchEventToListeners(\n            Events.MessageGenerated, {message: message, requestId: requestId, warning: true});\n      }\n    }\n    if (corsErrorStatus) {\n      networkRequest.setCorsErrorStatus(corsErrorStatus);\n    }\n    networkRequest.localizedFailDescription = localizedDescription;\n    this.getExtraInfoBuilder(requestId).finished();\n    this.finishNetworkRequest(networkRequest, time, -1);\n  }\n\n  webSocketCreated({requestId, url: requestURL, initiator}: Protocol.Network.WebSocketCreatedEvent): void {\n    const networkRequest =\n        NetworkRequest.createForWebSocket(requestId, requestURL as Platform.DevToolsPath.UrlString, initiator);\n    requestToManagerMap.set(networkRequest, this.#manager);\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.WebSocket);\n    this.startNetworkRequest(networkRequest, null);\n  }\n\n  webSocketWillSendHandshakeRequest({requestId, timestamp: time, wallTime, request}:\n                                        Protocol.Network.WebSocketWillSendHandshakeRequestEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.requestMethod = 'GET';\n    networkRequest.setRequestHeaders(this.headersMapToHeadersArray(request.headers));\n    networkRequest.setIssueTime(time, wallTime);\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketHandshakeResponseReceived({requestId, timestamp: time, response}:\n                                         Protocol.Network.WebSocketHandshakeResponseReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.statusCode = response.status;\n    networkRequest.statusText = response.statusText;\n    networkRequest.responseHeaders = this.headersMapToHeadersArray(response.headers);\n    networkRequest.responseHeadersText = response.headersText || '';\n    if (response.requestHeaders) {\n      networkRequest.setRequestHeaders(this.headersMapToHeadersArray(response.requestHeaders));\n    }\n    if (response.requestHeadersText) {\n      networkRequest.setRequestHeadersText(response.requestHeadersText);\n    }\n    networkRequest.responseReceivedTime = time;\n    networkRequest.protocol = 'websocket';\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketFrameReceived({requestId, timestamp: time, response}: Protocol.Network.WebSocketFrameReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addProtocolFrame(response, time, false);\n    networkRequest.responseReceivedTime = time;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketFrameSent({requestId, timestamp: time, response}: Protocol.Network.WebSocketFrameSentEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addProtocolFrame(response, time, true);\n    networkRequest.responseReceivedTime = time;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketFrameError({requestId, timestamp: time, errorMessage}: Protocol.Network.WebSocketFrameErrorEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.addProtocolFrameError(errorMessage, time);\n    networkRequest.responseReceivedTime = time;\n\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webSocketClosed({requestId, timestamp: time}: Protocol.Network.WebSocketClosedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n    this.finishNetworkRequest(networkRequest, time, -1);\n  }\n\n  eventSourceMessageReceived({requestId, timestamp: time, eventName, eventId, data}:\n                                 Protocol.Network.EventSourceMessageReceivedEvent): void {\n    const networkRequest = this.#requestsById.get(requestId);\n    if (!networkRequest) {\n      return;\n    }\n    networkRequest.addEventSourceMessage(time, eventName, eventId, data);\n  }\n\n  requestIntercepted({}: Protocol.Network.RequestInterceptedEvent): void {\n  }\n\n  requestWillBeSentExtraInfo({requestId, associatedCookies, headers, clientSecurityState, connectTiming}:\n                                 Protocol.Network.RequestWillBeSentExtraInfoEvent): void {\n    const blockedRequestCookies: BlockedCookieWithReason[] = [];\n    const includedRequestCookies = [];\n    for (const {blockedReasons, cookie} of associatedCookies) {\n      if (blockedReasons.length === 0) {\n        includedRequestCookies.push(Cookie.fromProtocolCookie(cookie));\n      } else {\n        blockedRequestCookies.push({blockedReasons, cookie: Cookie.fromProtocolCookie(cookie)});\n      }\n    }\n    const extraRequestInfo = {\n      blockedRequestCookies,\n      includedRequestCookies,\n      requestHeaders: this.headersMapToHeadersArray(headers),\n      clientSecurityState: clientSecurityState,\n      connectTiming,\n    };\n    this.getExtraInfoBuilder(requestId).addRequestExtraInfo(extraRequestInfo);\n  }\n\n  responseReceivedExtraInfo({requestId, blockedCookies, headers, headersText, resourceIPAddressSpace, statusCode}:\n                                Protocol.Network.ResponseReceivedExtraInfoEvent): void {\n    const extraResponseInfo: ExtraResponseInfo = {\n      blockedResponseCookies: blockedCookies.map(blockedCookie => {\n        return {\n          blockedReasons: blockedCookie.blockedReasons,\n          cookieLine: blockedCookie.cookieLine,\n          cookie: blockedCookie.cookie ? Cookie.fromProtocolCookie(blockedCookie.cookie) : null,\n        };\n      }),\n      responseHeaders: this.headersMapToHeadersArray(headers),\n      responseHeadersText: headersText,\n      resourceIPAddressSpace,\n      statusCode,\n    };\n    this.getExtraInfoBuilder(requestId).addResponseExtraInfo(extraResponseInfo);\n  }\n\n  private getExtraInfoBuilder(requestId: string): ExtraInfoBuilder {\n    let builder: ExtraInfoBuilder;\n    if (!this.#requestIdToExtraInfoBuilder.has(requestId)) {\n      builder = new ExtraInfoBuilder();\n      this.#requestIdToExtraInfoBuilder.set(requestId, builder);\n    } else {\n      builder = (this.#requestIdToExtraInfoBuilder.get(requestId) as ExtraInfoBuilder);\n    }\n    return builder;\n  }\n\n  private appendRedirect(\n      requestId: Protocol.Network.RequestId, time: number,\n      redirectURL: Platform.DevToolsPath.UrlString): NetworkRequest {\n    const originalNetworkRequest = this.#requestsById.get(requestId);\n    if (!originalNetworkRequest) {\n      throw new Error(`Could not find original network request for ${requestId}`);\n    }\n    let redirectCount = 0;\n    for (let redirect = originalNetworkRequest.redirectSource(); redirect; redirect = redirect.redirectSource()) {\n      redirectCount++;\n    }\n\n    originalNetworkRequest.markAsRedirect(redirectCount);\n    this.finishNetworkRequest(originalNetworkRequest, time, -1);\n    const newNetworkRequest = NetworkRequest.create(\n        requestId, redirectURL, originalNetworkRequest.documentURL, originalNetworkRequest.frameId,\n        originalNetworkRequest.loaderId, originalNetworkRequest.initiator());\n    requestToManagerMap.set(newNetworkRequest, this.#manager);\n    newNetworkRequest.setRedirectSource(originalNetworkRequest);\n    originalNetworkRequest.setRedirectDestination(newNetworkRequest);\n    return newNetworkRequest;\n  }\n\n  private maybeAdoptMainResourceRequest(requestId: string): NetworkRequest|null {\n    const request = MultitargetNetworkManager.instance().inflightMainResourceRequests.get(requestId);\n    if (!request) {\n      return null;\n    }\n    const oldDispatcher = (NetworkManager.forRequest(request) as NetworkManager).dispatcher;\n    oldDispatcher.#requestsById.delete(requestId);\n    oldDispatcher.#requestsByURL.delete(request.url());\n    this.#requestsById.set(requestId, request);\n    this.#requestsByURL.set(request.url(), request);\n    requestToManagerMap.set(request, this.#manager);\n    return request;\n  }\n\n  private startNetworkRequest(networkRequest: NetworkRequest, originalRequest: Protocol.Network.Request|null): void {\n    this.#requestsById.set(networkRequest.requestId(), networkRequest);\n    this.#requestsByURL.set(networkRequest.url(), networkRequest);\n    // The following relies on the fact that loaderIds and requestIds are\n    // globally unique and that the main request has them equal.\n    if (networkRequest.loaderId === networkRequest.requestId()) {\n      MultitargetNetworkManager.instance().inflightMainResourceRequests.set(networkRequest.requestId(), networkRequest);\n    }\n\n    this.#manager.dispatchEventToListeners(Events.RequestStarted, {request: networkRequest, originalRequest});\n  }\n\n  private updateNetworkRequest(networkRequest: NetworkRequest): void {\n    this.#manager.dispatchEventToListeners(Events.RequestUpdated, networkRequest);\n  }\n\n  private finishNetworkRequest(\n      networkRequest: NetworkRequest, finishTime: number, encodedDataLength: number,\n      shouldReportCorbBlocking?: boolean): void {\n    networkRequest.endTime = finishTime;\n    networkRequest.finished = true;\n    if (encodedDataLength >= 0) {\n      const redirectSource = networkRequest.redirectSource();\n      if (redirectSource && redirectSource.signedExchangeInfo()) {\n        networkRequest.setTransferSize(0);\n        redirectSource.setTransferSize(encodedDataLength);\n        this.updateNetworkRequest(redirectSource);\n      } else {\n        networkRequest.setTransferSize(encodedDataLength);\n      }\n    }\n    this.#manager.dispatchEventToListeners(Events.RequestFinished, networkRequest);\n    MultitargetNetworkManager.instance().inflightMainResourceRequests.delete(networkRequest.requestId());\n\n    if (shouldReportCorbBlocking) {\n      const message =\n          i18nString(UIStrings.crossoriginReadBlockingCorb, {PH1: networkRequest.url(), PH2: networkRequest.mimeType});\n      this.#manager.dispatchEventToListeners(\n          Events.MessageGenerated, {message: message, requestId: networkRequest.requestId(), warning: true});\n    }\n\n    if (Common.Settings.Settings.instance().moduleSetting('monitoringXHREnabled').get() &&\n        networkRequest.resourceType().category() === Common.ResourceType.resourceCategories.XHR) {\n      let message;\n      const failedToLoad = networkRequest.failed || networkRequest.hasErrorStatusCode();\n      if (failedToLoad) {\n        message = i18nString(\n            UIStrings.sFailedLoadingSS,\n            {PH1: networkRequest.resourceType().title(), PH2: networkRequest.requestMethod, PH3: networkRequest.url()});\n      } else {\n        message = i18nString(\n            UIStrings.sFinishedLoadingSS,\n            {PH1: networkRequest.resourceType().title(), PH2: networkRequest.requestMethod, PH3: networkRequest.url()});\n      }\n\n      this.#manager.dispatchEventToListeners(\n          Events.MessageGenerated, {message: message, requestId: networkRequest.requestId(), warning: false});\n    }\n  }\n\n  clearRequests(): void {\n    this.#requestsById.clear();\n    this.#requestsByURL.clear();\n    this.#requestIdToExtraInfoBuilder.clear();\n  }\n\n  webTransportCreated({transportId, url: requestURL, timestamp: time, initiator}:\n                          Protocol.Network.WebTransportCreatedEvent): void {\n    const networkRequest =\n        NetworkRequest.createForWebSocket(transportId, requestURL as Platform.DevToolsPath.UrlString, initiator);\n    networkRequest.hasNetworkData = true;\n    requestToManagerMap.set(networkRequest, this.#manager);\n    networkRequest.setResourceType(Common.ResourceType.resourceTypes.WebTransport);\n    networkRequest.setIssueTime(time, 0);\n    // TODO(yoichio): Add appropreate events to address abort cases.\n    this.startNetworkRequest(networkRequest, null);\n  }\n\n  webTransportConnectionEstablished({transportId, timestamp: time}:\n                                        Protocol.Network.WebTransportConnectionEstablishedEvent): void {\n    const networkRequest = this.#requestsById.get(transportId);\n    if (!networkRequest) {\n      return;\n    }\n\n    // This dummy deltas are needed to show this request as being\n    // downloaded(blue) given typical WebTransport is kept for a while.\n    // TODO(yoichio): Add appropreate events to fix these dummy datas.\n    // DNS lookup?\n    networkRequest.responseReceivedTime = time;\n    networkRequest.endTime = time + 0.001;\n    this.updateNetworkRequest(networkRequest);\n  }\n\n  webTransportClosed({transportId, timestamp: time}: Protocol.Network.WebTransportClosedEvent): void {\n    const networkRequest = this.#requestsById.get(transportId);\n    if (!networkRequest) {\n      return;\n    }\n\n    networkRequest.endTime = time;\n    this.finishNetworkRequest(networkRequest, time, 0);\n  }\n\n  trustTokenOperationDone(event: Protocol.Network.TrustTokenOperationDoneEvent): void {\n    const request = this.#requestsById.get(event.requestId);\n    if (!request) {\n      this.#requestIdToTrustTokenEvent.set(event.requestId, event);\n      return;\n    }\n    request.setTrustTokenOperationDoneEvent(event);\n  }\n\n  subresourceWebBundleMetadataReceived({requestId, urls}: Protocol.Network.SubresourceWebBundleMetadataReceivedEvent):\n      void {\n    const extraInfoBuilder = this.getExtraInfoBuilder(requestId);\n    extraInfoBuilder.setWebBundleInfo({resourceUrls: urls as Platform.DevToolsPath.UrlString[]});\n    const finalRequest = extraInfoBuilder.finalRequest();\n    if (finalRequest) {\n      this.updateNetworkRequest(finalRequest);\n    }\n  }\n\n  subresourceWebBundleMetadataError({requestId, errorMessage}: Protocol.Network.SubresourceWebBundleMetadataErrorEvent):\n      void {\n    const extraInfoBuilder = this.getExtraInfoBuilder(requestId);\n    extraInfoBuilder.setWebBundleInfo({errorMessage});\n    const finalRequest = extraInfoBuilder.finalRequest();\n    if (finalRequest) {\n      this.updateNetworkRequest(finalRequest);\n    }\n  }\n\n  subresourceWebBundleInnerResponseParsed({innerRequestId, bundleRequestId}:\n                                              Protocol.Network.SubresourceWebBundleInnerResponseParsedEvent): void {\n    const extraInfoBuilder = this.getExtraInfoBuilder(innerRequestId);\n    extraInfoBuilder.setWebBundleInnerRequestInfo({bundleRequestId});\n    const finalRequest = extraInfoBuilder.finalRequest();\n    if (finalRequest) {\n      this.updateNetworkRequest(finalRequest);\n    }\n  }\n\n  subresourceWebBundleInnerResponseError({innerRequestId, errorMessage}:\n                                             Protocol.Network.SubresourceWebBundleInnerResponseErrorEvent): void {\n    const extraInfoBuilder = this.getExtraInfoBuilder(innerRequestId);\n    extraInfoBuilder.setWebBundleInnerRequestInfo({errorMessage});\n    const finalRequest = extraInfoBuilder.finalRequest();\n    if (finalRequest) {\n      this.updateNetworkRequest(finalRequest);\n    }\n  }\n\n  reportingApiReportAdded(data: Protocol.Network.ReportingApiReportAddedEvent): void {\n    this.#manager.dispatchEventToListeners(Events.ReportingApiReportAdded, data.report);\n  }\n\n  reportingApiReportUpdated(data: Protocol.Network.ReportingApiReportUpdatedEvent): void {\n    this.#manager.dispatchEventToListeners(Events.ReportingApiReportUpdated, data.report);\n  }\n\n  reportingApiEndpointsChangedForOrigin(data: Protocol.Network.ReportingApiEndpointsChangedForOriginEvent): void {\n    this.#manager.dispatchEventToListeners(Events.ReportingApiEndpointsChangedForOrigin, data);\n  }\n\n  /**\n   * @deprecated\n   * This method is only kept for usage in a web test.\n   */\n  private createNetworkRequest(\n      requestId: Protocol.Network.RequestId, frameId: Protocol.Page.FrameId, loaderId: Protocol.Network.LoaderId,\n      url: string, documentURL: string, initiator: Protocol.Network.Initiator|null): NetworkRequest {\n    const request = NetworkRequest.create(\n        requestId, url as Platform.DevToolsPath.UrlString, documentURL as Platform.DevToolsPath.UrlString, frameId,\n        loaderId, initiator);\n    requestToManagerMap.set(request, this.#manager);\n    return request;\n  }\n}\n\nlet multiTargetNetworkManagerInstance: MultitargetNetworkManager|null;\n\nexport class MultitargetNetworkManager extends Common.ObjectWrapper.ObjectWrapper<MultitargetNetworkManager.EventTypes>\n    implements SDKModelObserver<NetworkManager> {\n  #userAgentOverrideInternal: string;\n  #userAgentMetadataOverride: Protocol.Emulation.UserAgentMetadata|null;\n  #customAcceptedEncodings: Protocol.Network.ContentEncoding[]|null;\n  readonly #networkAgents: Set<ProtocolProxyApi.NetworkApi>;\n  readonly #fetchAgents: Set<ProtocolProxyApi.FetchApi>;\n  readonly inflightMainResourceRequests: Map<string, NetworkRequest>;\n  #networkConditionsInternal: Conditions;\n  #updatingInterceptionPatternsPromise: Promise<void>|null;\n  readonly #blockingEnabledSetting: Common.Settings.Setting<boolean>;\n  readonly #blockedPatternsSetting: Common.Settings.Setting<BlockedPattern[]>;\n  #effectiveBlockedURLs: string[];\n  readonly #urlsForRequestInterceptor:\n      Platform.MapUtilities.Multimap<(arg0: InterceptedRequest) => Promise<void>, InterceptionPattern>;\n  #extraHeaders?: Protocol.Network.Headers;\n  #customUserAgent?: string;\n\n  constructor() {\n    super();\n    this.#userAgentOverrideInternal = '';\n    this.#userAgentMetadataOverride = null;\n    this.#customAcceptedEncodings = null;\n    this.#networkAgents = new Set();\n    this.#fetchAgents = new Set();\n    this.inflightMainResourceRequests = new Map();\n    this.#networkConditionsInternal = NoThrottlingConditions;\n    this.#updatingInterceptionPatternsPromise = null;\n\n    // TODO(allada) Remove these and merge it with request interception.\n    this.#blockingEnabledSetting = Common.Settings.Settings.instance().moduleSetting('requestBlockingEnabled');\n    this.#blockedPatternsSetting = Common.Settings.Settings.instance().createSetting('networkBlockedPatterns', []);\n    this.#effectiveBlockedURLs = [];\n    this.updateBlockedPatterns();\n\n    this.#urlsForRequestInterceptor = new Platform.MapUtilities.Multimap();\n\n    TargetManager.instance().observeModels(NetworkManager, this);\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): MultitargetNetworkManager {\n    const {forceNew} = opts;\n    if (!multiTargetNetworkManagerInstance || forceNew) {\n      multiTargetNetworkManagerInstance = new MultitargetNetworkManager();\n    }\n\n    return multiTargetNetworkManagerInstance;\n  }\n\n  static getChromeVersion(): string {\n    const chromeRegex = /(?:^|\\W)(?:Chrome|HeadlessChrome)\\/(\\S+)/;\n    const chromeMatch = navigator.userAgent.match(chromeRegex);\n    if (chromeMatch && chromeMatch.length > 1) {\n      return chromeMatch[1];\n    }\n    return '';\n  }\n\n  static patchUserAgentWithChromeVersion(uaString: string): string {\n    // Patches Chrome/ChrOS version from user #agent (\"1.2.3.4\" when user #agent is: \"Chrome/1.2.3.4\").\n    // Otherwise, ignore it. This assumes additional appVersions appear after the Chrome version.\n    const chromeVersion = MultitargetNetworkManager.getChromeVersion();\n    if (chromeVersion.length > 0) {\n      // \"1.2.3.4\" becomes \"1.0.100.0\"\n      const additionalAppVersion = chromeVersion.split('.', 1)[0] + '.0.100.0';\n      return Platform.StringUtilities.sprintf(uaString, chromeVersion, additionalAppVersion);\n    }\n    return uaString;\n  }\n\n  static patchUserAgentMetadataWithChromeVersion(userAgentMetadata: Protocol.Emulation.UserAgentMetadata): void {\n    // Patches Chrome/ChrOS version from user #agent metadata (\"1.2.3.4\" when user #agent is: \"Chrome/1.2.3.4\").\n    // Otherwise, ignore it. This assumes additional appVersions appear after the Chrome version.\n    if (!userAgentMetadata.brands) {\n      return;\n    }\n    const chromeVersion = MultitargetNetworkManager.getChromeVersion();\n    if (chromeVersion.length === 0) {\n      return;\n    }\n\n    const majorVersion = chromeVersion.split('.', 1)[0];\n    for (const brand of userAgentMetadata.brands) {\n      if (brand.version.includes('%s')) {\n        brand.version = Platform.StringUtilities.sprintf(brand.version, majorVersion);\n      }\n    }\n\n    if (userAgentMetadata.fullVersion) {\n      if (userAgentMetadata.fullVersion.includes('%s')) {\n        userAgentMetadata.fullVersion = Platform.StringUtilities.sprintf(userAgentMetadata.fullVersion, chromeVersion);\n      }\n    }\n  }\n\n  modelAdded(networkManager: NetworkManager): void {\n    const networkAgent = networkManager.target().networkAgent();\n    const fetchAgent = networkManager.target().fetchAgent();\n    if (this.#extraHeaders) {\n      void networkAgent.invoke_setExtraHTTPHeaders({headers: this.#extraHeaders});\n    }\n    if (this.currentUserAgent()) {\n      void networkAgent.invoke_setUserAgentOverride(\n          {userAgent: this.currentUserAgent(), userAgentMetadata: this.#userAgentMetadataOverride || undefined});\n    }\n    if (this.#effectiveBlockedURLs.length) {\n      void networkAgent.invoke_setBlockedURLs({urls: this.#effectiveBlockedURLs});\n    }\n    if (this.isIntercepting()) {\n      void fetchAgent.invoke_enable({patterns: this.#urlsForRequestInterceptor.valuesArray()});\n    }\n    if (this.#customAcceptedEncodings === null) {\n      void networkAgent.invoke_clearAcceptedEncodingsOverride();\n    } else {\n      void networkAgent.invoke_setAcceptedEncodings({encodings: this.#customAcceptedEncodings});\n    }\n    this.#networkAgents.add(networkAgent);\n    this.#fetchAgents.add(fetchAgent);\n    if (this.isThrottling()) {\n      this.updateNetworkConditions(networkAgent);\n    }\n  }\n\n  modelRemoved(networkManager: NetworkManager): void {\n    for (const entry of this.inflightMainResourceRequests) {\n      const manager = NetworkManager.forRequest((entry[1] as NetworkRequest));\n      if (manager !== networkManager) {\n        continue;\n      }\n      this.inflightMainResourceRequests.delete((entry[0] as string));\n    }\n    this.#networkAgents.delete(networkManager.target().networkAgent());\n    this.#fetchAgents.delete(networkManager.target().fetchAgent());\n  }\n\n  isThrottling(): boolean {\n    return this.#networkConditionsInternal.download >= 0 || this.#networkConditionsInternal.upload >= 0 ||\n        this.#networkConditionsInternal.latency > 0;\n  }\n\n  isOffline(): boolean {\n    return !this.#networkConditionsInternal.download && !this.#networkConditionsInternal.upload;\n  }\n\n  setNetworkConditions(conditions: Conditions): void {\n    this.#networkConditionsInternal = conditions;\n    for (const agent of this.#networkAgents) {\n      this.updateNetworkConditions(agent);\n    }\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.ConditionsChanged);\n  }\n\n  networkConditions(): Conditions {\n    return this.#networkConditionsInternal;\n  }\n\n  private updateNetworkConditions(networkAgent: ProtocolProxyApi.NetworkApi): void {\n    const conditions = this.#networkConditionsInternal;\n    if (!this.isThrottling()) {\n      void networkAgent.invoke_emulateNetworkConditions(\n          {offline: false, latency: 0, downloadThroughput: 0, uploadThroughput: 0});\n    } else {\n      void networkAgent.invoke_emulateNetworkConditions({\n        offline: this.isOffline(),\n        latency: conditions.latency,\n        downloadThroughput: conditions.download < 0 ? 0 : conditions.download,\n        uploadThroughput: conditions.upload < 0 ? 0 : conditions.upload,\n        connectionType: NetworkManager.connectionType(conditions),\n      });\n    }\n  }\n\n  setExtraHTTPHeaders(headers: Protocol.Network.Headers): void {\n    this.#extraHeaders = headers;\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_setExtraHTTPHeaders({headers: this.#extraHeaders});\n    }\n  }\n\n  currentUserAgent(): string {\n    return this.#customUserAgent ? this.#customUserAgent : this.#userAgentOverrideInternal;\n  }\n\n  private updateUserAgentOverride(): void {\n    const userAgent = this.currentUserAgent();\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_setUserAgentOverride(\n          {userAgent: userAgent, userAgentMetadata: this.#userAgentMetadataOverride || undefined});\n    }\n  }\n\n  setUserAgentOverride(userAgent: string, userAgentMetadataOverride: Protocol.Emulation.UserAgentMetadata|null): void {\n    const uaChanged = (this.#userAgentOverrideInternal !== userAgent);\n    this.#userAgentOverrideInternal = userAgent;\n    if (!this.#customUserAgent) {\n      this.#userAgentMetadataOverride = userAgentMetadataOverride;\n      this.updateUserAgentOverride();\n    } else {\n      this.#userAgentMetadataOverride = null;\n    }\n\n    if (uaChanged) {\n      this.dispatchEventToListeners(MultitargetNetworkManager.Events.UserAgentChanged);\n    }\n  }\n\n  userAgentOverride(): string {\n    return this.#userAgentOverrideInternal;\n  }\n\n  setCustomUserAgentOverride(\n      userAgent: string, userAgentMetadataOverride: Protocol.Emulation.UserAgentMetadata|null = null): void {\n    this.#customUserAgent = userAgent;\n    this.#userAgentMetadataOverride = userAgentMetadataOverride;\n    this.updateUserAgentOverride();\n  }\n\n  setCustomAcceptedEncodingsOverride(acceptedEncodings: Protocol.Network.ContentEncoding[]): void {\n    this.#customAcceptedEncodings = acceptedEncodings;\n    this.updateAcceptedEncodingsOverride();\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.AcceptedEncodingsChanged);\n  }\n\n  clearCustomAcceptedEncodingsOverride(): void {\n    this.#customAcceptedEncodings = null;\n    this.updateAcceptedEncodingsOverride();\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.AcceptedEncodingsChanged);\n  }\n\n  isAcceptedEncodingOverrideSet(): boolean {\n    return this.#customAcceptedEncodings !== null;\n  }\n\n  private updateAcceptedEncodingsOverride(): void {\n    const customAcceptedEncodings = this.#customAcceptedEncodings;\n    for (const agent of this.#networkAgents) {\n      if (customAcceptedEncodings === null) {\n        void agent.invoke_clearAcceptedEncodingsOverride();\n      } else {\n        void agent.invoke_setAcceptedEncodings({encodings: customAcceptedEncodings});\n      }\n    }\n  }\n\n  // TODO(allada) Move all request blocking into interception and let view manage blocking.\n  blockedPatterns(): BlockedPattern[] {\n    return this.#blockedPatternsSetting.get().slice();\n  }\n\n  blockingEnabled(): boolean {\n    return this.#blockingEnabledSetting.get();\n  }\n\n  isBlocking(): boolean {\n    return Boolean(this.#effectiveBlockedURLs.length);\n  }\n\n  setBlockedPatterns(patterns: BlockedPattern[]): void {\n    this.#blockedPatternsSetting.set(patterns);\n    this.updateBlockedPatterns();\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.BlockedPatternsChanged);\n  }\n\n  setBlockingEnabled(enabled: boolean): void {\n    if (this.#blockingEnabledSetting.get() === enabled) {\n      return;\n    }\n    this.#blockingEnabledSetting.set(enabled);\n    this.updateBlockedPatterns();\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.BlockedPatternsChanged);\n  }\n\n  private updateBlockedPatterns(): void {\n    const urls = [];\n    if (this.#blockingEnabledSetting.get()) {\n      for (const pattern of this.#blockedPatternsSetting.get()) {\n        if (pattern.enabled) {\n          urls.push(pattern.url);\n        }\n      }\n    }\n\n    if (!urls.length && !this.#effectiveBlockedURLs.length) {\n      return;\n    }\n    this.#effectiveBlockedURLs = urls;\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_setBlockedURLs({urls: this.#effectiveBlockedURLs});\n    }\n  }\n\n  isIntercepting(): boolean {\n    return Boolean(this.#urlsForRequestInterceptor.size);\n  }\n\n  setInterceptionHandlerForPatterns(\n      patterns: InterceptionPattern[], requestInterceptor: (arg0: InterceptedRequest) => Promise<void>): Promise<void> {\n    // Note: requestInterceptors may recieve interception #requests for patterns they did not subscribe to.\n    this.#urlsForRequestInterceptor.deleteAll(requestInterceptor);\n    for (const newPattern of patterns) {\n      this.#urlsForRequestInterceptor.set(requestInterceptor, newPattern);\n    }\n    return this.updateInterceptionPatternsOnNextTick();\n  }\n\n  private updateInterceptionPatternsOnNextTick(): Promise<void> {\n    // This is used so we can register and unregister patterns in loops without sending lots of protocol messages.\n    if (!this.#updatingInterceptionPatternsPromise) {\n      this.#updatingInterceptionPatternsPromise = Promise.resolve().then(this.updateInterceptionPatterns.bind(this));\n    }\n    return this.#updatingInterceptionPatternsPromise;\n  }\n\n  private async updateInterceptionPatterns(): Promise<void> {\n    if (!Common.Settings.Settings.instance().moduleSetting('cacheDisabled').get()) {\n      Common.Settings.Settings.instance().moduleSetting('cacheDisabled').set(true);\n    }\n    this.#updatingInterceptionPatternsPromise = null;\n    const promises = ([] as Promise<unknown>[]);\n    for (const agent of this.#fetchAgents) {\n      promises.push(agent.invoke_enable({patterns: this.#urlsForRequestInterceptor.valuesArray()}));\n    }\n    this.dispatchEventToListeners(MultitargetNetworkManager.Events.InterceptorsChanged);\n    await Promise.all(promises);\n  }\n\n  async requestIntercepted(interceptedRequest: InterceptedRequest): Promise<void> {\n    for (const requestInterceptor of this.#urlsForRequestInterceptor.keysArray()) {\n      await requestInterceptor(interceptedRequest);\n      if (interceptedRequest.hasResponded()) {\n        this.dispatchEventToListeners(\n            MultitargetNetworkManager.Events.RequestIntercepted,\n            interceptedRequest.request.url as Platform.DevToolsPath.UrlString);\n        return;\n      }\n    }\n    if (!interceptedRequest.hasResponded()) {\n      interceptedRequest.continueRequestWithoutChange();\n    }\n  }\n\n  clearBrowserCache(): void {\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_clearBrowserCache();\n    }\n  }\n\n  clearBrowserCookies(): void {\n    for (const agent of this.#networkAgents) {\n      void agent.invoke_clearBrowserCookies();\n    }\n  }\n\n  async getCertificate(origin: string): Promise<string[]> {\n    const target = TargetManager.instance().mainTarget();\n    if (!target) {\n      return [];\n    }\n    const certificate = await target.networkAgent().invoke_getCertificate({origin});\n    if (!certificate) {\n      return [];\n    }\n    return certificate.tableNames;\n  }\n\n  async loadResource(url: Platform.DevToolsPath.UrlString): Promise<{\n    success: boolean,\n    content: string,\n    errorDescription: Host.ResourceLoader.LoadErrorDescription,\n  }> {\n    const headers: {\n      [x: string]: string,\n    } = {};\n\n    const currentUserAgent = this.currentUserAgent();\n    if (currentUserAgent) {\n      headers['User-Agent'] = currentUserAgent;\n    }\n\n    if (Common.Settings.Settings.instance().moduleSetting('cacheDisabled').get()) {\n      headers['Cache-Control'] = 'no-cache';\n    }\n\n    return new Promise(\n        resolve => Host.ResourceLoader.load(url, headers, (success, _responseHeaders, content, errorDescription) => {\n          resolve({success, content, errorDescription});\n        }));\n  }\n}\n\nexport namespace MultitargetNetworkManager {\n  // TODO(crbug.com/1167717): Make this a const enum again\n  // eslint-disable-next-line rulesdir/const_enum\n  export enum Events {\n    BlockedPatternsChanged = 'BlockedPatternsChanged',\n    ConditionsChanged = 'ConditionsChanged',\n    UserAgentChanged = 'UserAgentChanged',\n    InterceptorsChanged = 'InterceptorsChanged',\n    AcceptedEncodingsChanged = 'AcceptedEncodingsChanged',\n    RequestIntercepted = 'RequestIntercepted',\n  }\n\n  export type EventTypes = {\n    [Events.BlockedPatternsChanged]: void,\n    [Events.ConditionsChanged]: void,\n    [Events.UserAgentChanged]: void,\n    [Events.InterceptorsChanged]: void,\n    [Events.AcceptedEncodingsChanged]: void,\n    [Events.RequestIntercepted]: Platform.DevToolsPath.UrlString,\n  };\n}\n\nexport class InterceptedRequest {\n  readonly #fetchAgent: ProtocolProxyApi.FetchApi;\n  #hasRespondedInternal: boolean;\n  request: Protocol.Network.Request;\n  resourceType: Protocol.Network.ResourceType;\n  responseStatusCode: number|undefined;\n  responseHeaders: Protocol.Fetch.HeaderEntry[]|undefined;\n  requestId: Protocol.Fetch.RequestId;\n\n  constructor(\n      fetchAgent: ProtocolProxyApi.FetchApi,\n      request: Protocol.Network.Request,\n      resourceType: Protocol.Network.ResourceType,\n      requestId: Protocol.Fetch.RequestId,\n      responseStatusCode?: number,\n      responseHeaders?: Protocol.Fetch.HeaderEntry[],\n  ) {\n    this.#fetchAgent = fetchAgent;\n    this.#hasRespondedInternal = false;\n    this.request = request;\n    this.resourceType = resourceType;\n    this.responseStatusCode = responseStatusCode;\n    this.responseHeaders = responseHeaders;\n    this.requestId = requestId;\n  }\n\n  hasResponded(): boolean {\n    return this.#hasRespondedInternal;\n  }\n\n  async continueRequestWithContent(contentBlob: Blob, encoded: boolean, responseHeaders: Protocol.Fetch.HeaderEntry[]):\n      Promise<void> {\n    this.#hasRespondedInternal = true;\n    const body = encoded ? await contentBlob.text() : await blobToBase64(contentBlob);\n    void this.#fetchAgent.invoke_fulfillRequest({requestId: this.requestId, responseCode: 200, body, responseHeaders});\n\n    async function blobToBase64(blob: Blob): Promise<string> {\n      const reader = new FileReader();\n      const fileContentsLoadedPromise = new Promise(resolve => {\n        reader.onloadend = resolve;\n      });\n      reader.readAsDataURL(blob);\n      await fileContentsLoadedPromise;\n      if (reader.error) {\n        console.error('Could not convert blob to base64.', reader.error);\n        return '';\n      }\n      const result = reader.result;\n      if (result === undefined || result === null || typeof result !== 'string') {\n        console.error('Could not convert blob to base64.');\n        return '';\n      }\n      return result.substring(result.indexOf(',') + 1);\n    }\n  }\n\n  continueRequestWithoutChange(): void {\n    console.assert(!this.#hasRespondedInternal);\n    this.#hasRespondedInternal = true;\n    void this.#fetchAgent.invoke_continueRequest({requestId: this.requestId});\n  }\n\n  continueRequestWithError(errorReason: Protocol.Network.ErrorReason): void {\n    console.assert(!this.#hasRespondedInternal);\n    this.#hasRespondedInternal = true;\n    void this.#fetchAgent.invoke_failRequest({requestId: this.requestId, errorReason});\n  }\n\n  async responseBody(): Promise<ContentData> {\n    const response = await this.#fetchAgent.invoke_getResponseBody({requestId: this.requestId});\n    const error = response.getError() || null;\n    return {error: error, content: error ? null : response.body, encoded: response.base64Encoded};\n  }\n}\n\n/**\n * Helper class to match #requests created from requestWillBeSent with\n * requestWillBeSentExtraInfo and responseReceivedExtraInfo when they have the\n * same requestId due to redirects.\n */\nclass ExtraInfoBuilder {\n  readonly #requests: NetworkRequest[];\n  #requestExtraInfos: (ExtraRequestInfo|null)[];\n  #responseExtraInfos: (ExtraResponseInfo|null)[];\n  #finishedInternal: boolean;\n  #webBundleInfo: WebBundleInfo|null;\n  #webBundleInnerRequestInfo: WebBundleInnerRequestInfo|null;\n\n  constructor() {\n    this.#requests = [];\n    this.#requestExtraInfos = [];\n    this.#responseExtraInfos = [];\n    this.#finishedInternal = false;\n    this.#webBundleInfo = null;\n    this.#webBundleInnerRequestInfo = null;\n  }\n\n  addRequest(req: NetworkRequest): void {\n    this.#requests.push(req);\n    this.sync(this.#requests.length - 1);\n  }\n\n  addRequestExtraInfo(info: ExtraRequestInfo): void {\n    this.#requestExtraInfos.push(info);\n    this.sync(this.#requestExtraInfos.length - 1);\n  }\n\n  addResponseExtraInfo(info: ExtraResponseInfo): void {\n    this.#responseExtraInfos.push(info);\n    this.sync(this.#responseExtraInfos.length - 1);\n  }\n\n  setWebBundleInfo(info: WebBundleInfo): void {\n    this.#webBundleInfo = info;\n    this.updateFinalRequest();\n  }\n\n  setWebBundleInnerRequestInfo(info: WebBundleInnerRequestInfo): void {\n    this.#webBundleInnerRequestInfo = info;\n    this.updateFinalRequest();\n  }\n\n  finished(): void {\n    this.#finishedInternal = true;\n    this.updateFinalRequest();\n  }\n\n  private sync(index: number): void {\n    const req = this.#requests[index];\n    if (!req) {\n      return;\n    }\n\n    const requestExtraInfo = this.#requestExtraInfos[index];\n    if (requestExtraInfo) {\n      req.addExtraRequestInfo(requestExtraInfo);\n      this.#requestExtraInfos[index] = null;\n    }\n\n    const responseExtraInfo = this.#responseExtraInfos[index];\n    if (responseExtraInfo) {\n      req.addExtraResponseInfo(responseExtraInfo);\n      this.#responseExtraInfos[index] = null;\n    }\n  }\n\n  finalRequest(): NetworkRequest|null {\n    if (!this.#finishedInternal) {\n      return null;\n    }\n    return this.#requests[this.#requests.length - 1] || null;\n  }\n\n  private updateFinalRequest(): void {\n    if (!this.#finishedInternal) {\n      return;\n    }\n    const finalRequest = this.finalRequest();\n    finalRequest?.setWebBundleInfo(this.#webBundleInfo);\n    finalRequest?.setWebBundleInnerRequestInfo(this.#webBundleInnerRequestInfo);\n  }\n}\n\nSDKModel.register(NetworkManager, {capabilities: Capability.Network, autostart: true});\n\nexport class ConditionsSerializer implements Serializer<Conditions, Conditions> {\n  stringify(value: unknown): string {\n    const conditions = value as Conditions;\n    return JSON.stringify({\n      ...conditions,\n      title: typeof conditions.title === 'function' ? conditions.title() : conditions.title,\n    });\n  }\n\n  parse(serialized: string): Conditions {\n    const parsed = JSON.parse(serialized);\n    return {\n      ...parsed,\n      // eslint-disable-next-line rulesdir/l10n_i18nString_call_only_with_uistrings\n      title: parsed.i18nTitleKey ? i18nLazyString(parsed.i18nTitleKey) : parsed.title,\n    };\n  }\n}\n\nexport function networkConditionsEqual(first: Conditions, second: Conditions): boolean {\n  // Caution: titles might be different function instances, which produce\n  // the same value.\n  const firstTitle = typeof first.title === 'function' ? first.title() : first.title;\n  const secondTitle = typeof second.title === 'function' ? second.title() : second.title;\n  return second.download === first.download && second.upload === first.upload && second.latency === first.latency &&\n      secondTitle === firstTitle;\n}\n\nexport interface Conditions {\n  download: number;\n  upload: number;\n  latency: number;\n  // TODO(crbug.com/1219425): In the future, it might be worthwhile to\n  // consider avoiding mixing up presentation state (e.g.: displayed\n  // titles) with behavioral state (e.g.: the throttling amounts). In\n  // this particular case, the title (along with other properties)\n  // doubles as both part of group of fields which (loosely) uniquely\n  // identify instances, as well as the literal string displayed in the\n  // UI, which leads to complications around persistance.\n  title: string|(() => string);\n  // Instances may be serialized to local storage, so localized titles\n  // should not be irrecoverably baked, just in case the string changes\n  // (or the user switches locales).\n  i18nTitleKey?: string;\n}\n\nexport interface BlockedPattern {\n  url: string;\n  enabled: boolean;\n}\n\nexport interface Message {\n  message: string;\n  requestId: string;\n  warning: boolean;\n}\n\nexport interface InterceptionPattern {\n  urlPattern: string;\n  requestStage: Protocol.Fetch.RequestStage;\n}\n\nexport type RequestInterceptor = (request: InterceptedRequest) => Promise<void>;\n\nexport interface RequestUpdateDroppedEventData {\n  url: Platform.DevToolsPath.UrlString;\n  frameId: Protocol.Page.FrameId|null;\n  loaderId: Protocol.Network.LoaderId;\n  resourceType: Protocol.Network.ResourceType;\n  mimeType: string;\n  lastModified: Date|null;\n}\n"]}