{"version":3,"file":"OverlayPersistentHighlighter.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/OverlayPersistentHighlighter.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAG7B,OAAO,KAAK,MAAM,MAAM,qBAAqB,CAAC;AAE9C,OAAO,EAAC,qBAAqB,EAAC,MAAM,4BAA4B,CAAC;AAEjE,MAAM,OAAO,4BAA4B;IAC9B,MAAM,CAAe;IACrB,eAAe,CAAiE;IAChF,qBAAqB,CAAgF;IACrG,eAAe,CAA0E;IACzF,yBAAyB,CAAoF;IAC7G,0BAA0B,CAA0E;IACpG,OAAO,CAA+C;IAC/D,mBAAmB,CAAwB;IAC3C,mBAAmB,CAAwB;IAC3C,YAAY,CAAU;IACtB,mEAAmE;IACnE,8DAA8D;IACrD,0BAA0B,CAA+B;IAClE,mEAAmE;IACnE,8DAA8D;IACrD,uBAAuB,CAA+B;IAC/D,mEAAmE;IACnE,8DAA8D;IACrD,qBAAqB,CAA+B;IAC7D,mEAAmE;IACnE,8DAA8D;IACrD,0BAA0B,CAA+B;IAClE,YAAY,KAAmB,EAAE,cAAuB,IAAI;QAC1D,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAEpB,IAAI,CAAC,eAAe,GAAG,IAAI,GAAG,EAAE,CAAC;QAEjC,IAAI,CAAC,qBAAqB,GAAG,IAAI,GAAG,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,GAAG,EAAE,CAAC;QAEjC,IAAI,CAAC,yBAAyB,GAAG,IAAI,GAAG,EAAE,CAAC;QAE3C,IAAI,CAAC,0BAA0B,GAAG,IAAI,GAAG,EAAE,CAAC;QAE5C,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,EAAE,CAAC;QAEzB,IAAI,CAAC,mBAAmB,GAAG,IAAI,qBAAqB,EAAE,CAAC;QACvD,IAAI,CAAC,mBAAmB,GAAG,IAAI,qBAAqB,EAAE,CAAC;QACvD,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAEhC,IAAI,CAAC,0BAA0B,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,oBAAoB,CAAC,CAAC;QAC1G,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAC9E,IAAI,CAAC,uBAAuB,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC;QACpG,IAAI,CAAC,uBAAuB,CAAC,iBAAiB,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAC3E,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;QAChG,IAAI,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QACzE,IAAI,CAAC,0BAA0B,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,oBAAoB,CAAC,CAAC;QAC1G,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;IAChF,CAAC;IAEO,eAAe;QACrB,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAEO,wBAAwB,CAAC,MAA2B;QAC1D,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAC3C,MAAM,UAAU,GAAG,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAC3C,MAAM,aAAa,GAAG,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAC9C,MAAM,QAAQ,GAAG,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAEzC,MAAM,sBAAsB,GAAI,IAAI,CAAC,uBAAuB,CAAC,GAAG,EAAc,CAAC;QAC/E,MAAM,uBAAuB,GAAG,IAAI,CAAC,0BAA0B,CAAC,GAAG,EAAE,KAAK,aAAa,CAAC;QACxF,MAAM,uBAAuB,GAAG,uBAAuB,CAAC;QACxD,MAAM,aAAa,GAAG,IAAI,CAAC,0BAA0B,CAAC,GAAG,EAAE,KAAK,WAAW,CAAC;QAC5E,OAAO;YACL,WAAW,EAAE,aAAa,CAAC,cAAc,EAAE;YAC3C,aAAa,EAAE,QAAQ,CAAC,cAAc,EAAE;YACxC,cAAc,EAAE,aAAa,CAAC,cAAc,EAAE;YAC9C,gBAAgB,EAAE,QAAQ,CAAC,cAAc,EAAE;YAC3C,eAAe,EAAE,SAAS,CAAC,cAAc,EAAE;YAC3C,cAAc,EAAE,KAAK;YACrB,YAAY,EAAE,SAAS,CAAC,cAAc,EAAE;YACxC,eAAe,EAAE,SAAS,CAAC,cAAc,EAAE;YAC3C,WAAW,EAAE,IAAI;YACjB,cAAc,EAAE,IAAI;YACpB,sBAAsB;YACtB,uBAAuB;YACvB,uBAAuB;YACvB,aAAa;YACb,aAAa,EAAG,IAAI,CAAC,qBAAqB,CAAC,GAAG,EAAc;YAC5D,cAAc,EAAG,IAAI,CAAC,0BAA0B,CAAC,GAAG,EAAc;YAClE,eAAe,EAAE,SAAS,CAAC,cAAc,EAAE;YAC3C,mBAAmB,EAAE,UAAU,CAAC,cAAc,EAAE;SACjD,CAAC;IACJ,CAAC;IAEO,iCAAiC,CAAC,MAA2B;QAEnE,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAC3C,OAAO;YACL,eAAe,EAAE,EAAC,KAAK,EAAE,SAAS,CAAC,cAAc,EAAE,EAAE,OAAO,uBAA0C,EAAC;YACvG,aAAa,EAAE,EAAC,KAAK,EAAE,SAAS,CAAC,cAAc,EAAE,EAAE,OAAO,uBAA0C,EAAC;YACrG,aAAa,EAAE,EAAC,KAAK,EAAE,SAAS,CAAC,cAAc,EAAE,EAAE,OAAO,uBAA0C,EAAC;YACrG,oBAAoB,EAAE,EAAC,UAAU,EAAE,SAAS,CAAC,cAAc,EAAE,EAAC;YAC9D,qBAAqB,EAAE,EAAC,UAAU,EAAE,SAAS,CAAC,cAAc,EAAE,EAAC;SAChE,CAAC;IACJ,CAAC;IAEO,uCAAuC,CAAC,OAAe;QAE7D,OAAO;YACL,cAAc,EAAE;gBACd,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,cAAc,EAAE;gBAC7D,OAAO,uBAA0C;aAClD;YACD,cAAc,EAAE,EAAC,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,cAAc,EAAE,EAAC;YAC/E,iBAAiB,EAAE,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,cAAc,EAAE;YACrE,kBAAkB,EAAE,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,cAAc,EAAE;SACxE,CAAC;IACJ,CAAC;IAED,sBAAsB,CAAC,MAA2B;QAChD,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QACxE,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAED,iBAAiB,CAAC,MAA2B;QAC3C,OAAO,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAC1C,CAAC;IAED,WAAW,CAAC,MAA2B;QACrC,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,EAAE;YACV,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,CAAC;YACxC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;SACjC;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAED,cAAc,CAAC,MAA2B,EAAE,KAAyB;QACnE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAClC,CAAC;IAED,iBAAiB,CAAC,MAA2B;QAC3C,IAAI,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;YACpC,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACpC,IAAI,CAAC,yBAAyB,EAAE,CAAC;SAClC;IACH,CAAC;IAED,4BAA4B,CAAC,MAA2B;QACtD,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,uCAAuC,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7F,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAED,uBAAuB,CAAC,MAA2B;QACjD,OAAO,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAChD,CAAC;IAED,uBAAuB,CAAC,MAA2B;QACjD,IAAI,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;YAC1C,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAC1C,IAAI,CAAC,yBAAyB,EAAE,CAAC;SAClC;IACH,CAAC;IAED,sBAAsB,CAAC,MAA2B;QAChD,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,iCAAiC,CAAC,MAAM,CAAC,CAAC,CAAC;QACjF,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAED,iBAAiB,CAAC,MAA2B;QAC3C,OAAO,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAC1C,CAAC;IAED,WAAW,CAAC,MAA2B;QACrC,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,EAAE;YACV,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,CAAC;YACxC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;SACjC;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAED,cAAc,CAAC,MAA2B,EAAE,KAAyB;QACnE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAClC,CAAC;IAED,iBAAiB,CAAC,MAA2B;QAC3C,IAAI,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;YACpC,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACpC,IAAI,CAAC,yBAAyB,EAAE,CAAC;SAClC;IACH,CAAC;IAED,gCAAgC,CAAC,MAA2B;QAC1D,IAAI,CAAC,yBAAyB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,2CAA2C,EAAE,CAAC,CAAC;QAC/F,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAED,2BAA2B,CAAC,MAA2B;QACrD,IAAI,IAAI,CAAC,yBAAyB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;YAC9C,IAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAC9C,IAAI,CAAC,yBAAyB,EAAE,CAAC;SAClC;IACH,CAAC;IAED,2BAA2B,CAAC,MAA2B;QACrD,OAAO,IAAI,CAAC,yBAAyB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACpD,CAAC;IAEO,2CAA2C;QACjD,OAAO;YACL,eAAe,EAAE;gBACf,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,cAAc,EAAE;gBAC7D,OAAO,uBAA0C;aAClD;YACD,gBAAgB,EAAE;gBAChB,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,cAAc,EAAE;gBAC7D,OAAO,uBAA0C;aAClD;SACF,CAAC;IACJ,CAAC;IAED,iCAAiC,CAAC,MAA2B;QAC3D,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,iCAAiC,EAAE,CAAC,CAAC;QACtF,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAED,4BAA4B,CAAC,MAA2B;QACtD,IAAI,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;YAC/C,IAAI,CAAC,0BAA0B,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAC/C,IAAI,CAAC,yBAAyB,EAAE,CAAC;SAClC;IACH,CAAC;IAED,4BAA4B,CAAC,MAA2B;QACtD,OAAO,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACrD,CAAC;IAEO,iCAAiC;QACvC,OAAO;YACL,YAAY,EAAE,MAAM,CAAC,KAAK,CAAC,sBAAsB,CAAC,OAAO,CAAC,cAAc,EAAE;YAC1E,kBAAkB,EAAE,MAAM,CAAC,KAAK,CAAC,sBAAsB,CAAC,aAAa,CAAC,cAAc,EAAE;YACtF,SAAS,EAAE,MAAM,CAAC,KAAK,CAAC,sBAAsB,CAAC,IAAI,CAAC,cAAc,EAAE;SACrE,CAAC;IACJ,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;QAC7B,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;QAC7B,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,CAAC;QACnC,IAAI,CAAC,yBAAyB,CAAC,KAAK,EAAE,CAAC;QACvC,IAAI,CAAC,0BAA0B,CAAC,KAAK,EAAE,CAAC;QACxC,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAED,iBAAiB;QACf,MAAM,eAAe,GAAG,IAAI,CAAC,+BAA+B,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACnF,MAAM,mBAAmB,GAAG,IAAI,CAAC,+BAA+B,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACvF,MAAM,qBAAqB,GAAG,IAAI,CAAC,+BAA+B,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QAC/F,MAAM,0BAA0B,GAAG,IAAI,CAAC,+BAA+B,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;QACxG,MAAM,0BAA0B,GAAG,IAAI,CAAC,+BAA+B,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;QACzG,IAAI,mBAAmB,IAAI,eAAe,IAAI,qBAAqB,IAAI,0BAA0B;YAC7F,0BAA0B,EAAE;YAC9B,IAAI,CAAC,yBAAyB,EAAE,CAAC;SAClC;IACH,CAAC;IAEO,+BAA+B,CAAC,UAA6C;QACnF,IAAI,WAAW,GAAG,KAAK,CAAC;QACxB,KAAK,MAAM,MAAM,IAAI,UAAU,CAAC,IAAI,EAAE,EAAE;YACtC,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,IAAI,EAAE;gBACxD,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBAC1B,WAAW,GAAG,IAAI,CAAC;aACpB;SACF;QACD,OAAO,WAAW,CAAC;IACrB,CAAC;IAED,YAAY;QACV,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE;YAChD,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;SACzE;QACD,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE;YAChD,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,iCAAiC,CAAC,MAAM,CAAC,CAAC,CAAC;SAClF;QACD,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,qBAAqB,CAAC,IAAI,EAAE,EAAE;YACtD,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,uCAAuC,CAAC,MAAM,CAAC,CAAC,CAAC;SAC9F;QACD,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,yBAAyB,CAAC,IAAI,EAAE,EAAE;YAC1D,IAAI,CAAC,yBAAyB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,2CAA2C,EAAE,CAAC,CAAC;SAChG;QACD,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,0BAA0B,CAAC,IAAI,EAAE,EAAE;YAC3D,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,iCAAiC,EAAE,CAAC,CAAC;SACvF;QACD,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAEO,yBAAyB;QAC/B,MAAM,mBAAmB,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,GAAG,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,IAAI,GAAG,CAAC;YACtF,IAAI,CAAC,yBAAyB,CAAC,IAAI,GAAG,CAAC,IAAI,IAAI,CAAC,0BAA0B,CAAC,IAAI,GAAG,CAAC,CAAC;QACxF,IAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC,CAAC,mBAAmB,CAAC,CAAC;QAC9D,IAAI,CAAC,6BAA6B,EAAE,CAAC;QACrC,IAAI,CAAC,6BAA6B,EAAE,CAAC;QACrC,IAAI,CAAC,mCAAmC,EAAE,CAAC;QAC3C,IAAI,CAAC,uCAAuC,EAAE,CAAC;QAC/C,IAAI,CAAC,wCAAwC,EAAE,CAAC;IAClD,CAAC;IAEO,6BAA6B;QACnC,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC;QACjC,MAAM,wBAAwB,GAAG,EAAE,CAAC;QACpC,KAAK,MAAM,CAAC,MAAM,EAAE,mBAAmB,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,EAAE;YAC1E,wBAAwB,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,mBAAmB,EAAC,CAAC,CAAC;SAC9D;QACD,YAAY,CAAC,MAAM,EAAE,CAAC,YAAY,EAAE,CAAC,0BAA0B,CAAC,EAAC,wBAAwB,EAAC,CAAC,CAAC;IAC9F,CAAC;IAEO,6BAA6B;QACnC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,OAAO;SACR;QACD,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC;QACjC,MAAM,wBAAwB,GAAG,EAAE,CAAC;QACpC,KAAK,MAAM,CAAC,MAAM,EAAE,4BAA4B,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,EAAE;YACnF,wBAAwB,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,4BAA4B,EAAC,CAAC,CAAC;SACvE;QACD,YAAY,CAAC,MAAM,EAAE,CAAC,YAAY,EAAE,CAAC,0BAA0B,CAAC,EAAC,wBAAwB,EAAC,CAAC,CAAC;IAC9F,CAAC;IAEO,mCAAmC;QACzC,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC;QACjC,MAAM,0BAA0B,GAAG,EAAE,CAAC;QACtC,KAAK,MAAM,CAAC,MAAM,EAAE,kCAAkC,CAAC,IAAI,IAAI,CAAC,qBAAqB,CAAC,OAAO,EAAE,EAAE;YAC/F,0BAA0B,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,kCAAkC,EAAC,CAAC,CAAC;SAC/E;QACD,YAAY,CAAC,MAAM,EAAE,CAAC,YAAY,EAAE,CAAC,gCAAgC,CAAC,EAAC,0BAA0B,EAAC,CAAC,CAAC;IACtG,CAAC;IAED,uCAAuC;QACrC,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC;QACjC,MAAM,8BAA8B,GAAG,EAAE,CAAC;QAC1C,KAAK,MAAM,CAAC,MAAM,EAAE,sCAAsC,CAAC,IAAI,IAAI,CAAC,yBAAyB,CAAC,OAAO,EAAE,EAAE;YACvG,8BAA8B,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,sCAAsC,EAAC,CAAC,CAAC;SACvF;QACD,YAAY,CAAC,MAAM,EAAE,CAAC,YAAY,EAAE,CAAC,oCAAoC,CAAC,EAAC,8BAA8B,EAAC,CAAC,CAAC;IAC9G,CAAC;IAED,wCAAwC;QACtC,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC;QACjC,MAAM,+BAA+B,GAAG,EAAE,CAAC;QAC3C,KAAK,MAAM,CAAC,MAAM,EAAE,4BAA4B,CAAC,IAAI,IAAI,CAAC,0BAA0B,CAAC,OAAO,EAAE,EAAE;YAC9F,+BAA+B,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,4BAA4B,EAAC,CAAC,CAAC;SAC9E;QACD,YAAY,CAAC,MAAM,EAAE,CAAC,YAAY,EAAE,CAAC,8BAA8B,CAAC,EAAC,+BAA+B,EAAC,CAAC,CAAC;IACzG,CAAC;CACF","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\n\nimport {OverlayColorGenerator} from './OverlayColorGenerator.js';\n\nexport class OverlayPersistentHighlighter {\n  readonly #model: OverlayModel;\n  readonly #gridHighlights: Map<Protocol.DOM.NodeId, Protocol.Overlay.GridHighlightConfig>;\n  readonly #scrollSnapHighlights: Map<Protocol.DOM.NodeId, Protocol.Overlay.ScrollSnapContainerHighlightConfig>;\n  readonly #flexHighlights: Map<Protocol.DOM.NodeId, Protocol.Overlay.FlexContainerHighlightConfig>;\n  readonly #containerQueryHighlights: Map<Protocol.DOM.NodeId, Protocol.Overlay.ContainerQueryContainerHighlightConfig>;\n  readonly #isolatedElementHighlights: Map<Protocol.DOM.NodeId, Protocol.Overlay.IsolationModeHighlightConfig>;\n  readonly #colors: Map<Protocol.DOM.NodeId, Common.Color.Color>;\n  #gridColorGenerator: OverlayColorGenerator;\n  #flexColorGenerator: OverlayColorGenerator;\n  #flexEnabled: boolean;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  readonly #showGridLineLabelsSetting: Common.Settings.Setting<any>;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  readonly #extendGridLinesSetting: Common.Settings.Setting<any>;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  readonly #showGridAreasSetting: Common.Settings.Setting<any>;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  readonly #showGridTrackSizesSetting: Common.Settings.Setting<any>;\n  constructor(model: OverlayModel, flexEnabled: boolean = true) {\n    this.#model = model;\n\n    this.#gridHighlights = new Map();\n\n    this.#scrollSnapHighlights = new Map();\n\n    this.#flexHighlights = new Map();\n\n    this.#containerQueryHighlights = new Map();\n\n    this.#isolatedElementHighlights = new Map();\n\n    this.#colors = new Map();\n\n    this.#gridColorGenerator = new OverlayColorGenerator();\n    this.#flexColorGenerator = new OverlayColorGenerator();\n    this.#flexEnabled = flexEnabled;\n\n    this.#showGridLineLabelsSetting = Common.Settings.Settings.instance().moduleSetting('showGridLineLabels');\n    this.#showGridLineLabelsSetting.addChangeListener(this.onSettingChange, this);\n    this.#extendGridLinesSetting = Common.Settings.Settings.instance().moduleSetting('extendGridLines');\n    this.#extendGridLinesSetting.addChangeListener(this.onSettingChange, this);\n    this.#showGridAreasSetting = Common.Settings.Settings.instance().moduleSetting('showGridAreas');\n    this.#showGridAreasSetting.addChangeListener(this.onSettingChange, this);\n    this.#showGridTrackSizesSetting = Common.Settings.Settings.instance().moduleSetting('showGridTrackSizes');\n    this.#showGridTrackSizesSetting.addChangeListener(this.onSettingChange, this);\n  }\n\n  private onSettingChange(): void {\n    this.resetOverlay();\n  }\n\n  private buildGridHighlightConfig(nodeId: Protocol.DOM.NodeId): Protocol.Overlay.GridHighlightConfig {\n    const mainColor = this.colorOfGrid(nodeId);\n    const background = mainColor.setAlpha(0.1);\n    const gapBackground = mainColor.setAlpha(0.3);\n    const gapHatch = mainColor.setAlpha(0.8);\n\n    const showGridExtensionLines = (this.#extendGridLinesSetting.get() as boolean);\n    const showPositiveLineNumbers = this.#showGridLineLabelsSetting.get() === 'lineNumbers';\n    const showNegativeLineNumbers = showPositiveLineNumbers;\n    const showLineNames = this.#showGridLineLabelsSetting.get() === 'lineNames';\n    return {\n      rowGapColor: gapBackground.toProtocolRGBA(),\n      rowHatchColor: gapHatch.toProtocolRGBA(),\n      columnGapColor: gapBackground.toProtocolRGBA(),\n      columnHatchColor: gapHatch.toProtocolRGBA(),\n      gridBorderColor: mainColor.toProtocolRGBA(),\n      gridBorderDash: false,\n      rowLineColor: mainColor.toProtocolRGBA(),\n      columnLineColor: mainColor.toProtocolRGBA(),\n      rowLineDash: true,\n      columnLineDash: true,\n      showGridExtensionLines,\n      showPositiveLineNumbers,\n      showNegativeLineNumbers,\n      showLineNames,\n      showAreaNames: (this.#showGridAreasSetting.get() as boolean),\n      showTrackSizes: (this.#showGridTrackSizesSetting.get() as boolean),\n      areaBorderColor: mainColor.toProtocolRGBA(),\n      gridBackgroundColor: background.toProtocolRGBA(),\n    };\n  }\n\n  private buildFlexContainerHighlightConfig(nodeId: Protocol.DOM.NodeId):\n      Protocol.Overlay.FlexContainerHighlightConfig {\n    const mainColor = this.colorOfFlex(nodeId);\n    return {\n      containerBorder: {color: mainColor.toProtocolRGBA(), pattern: Protocol.Overlay.LineStylePattern.Dashed},\n      itemSeparator: {color: mainColor.toProtocolRGBA(), pattern: Protocol.Overlay.LineStylePattern.Dotted},\n      lineSeparator: {color: mainColor.toProtocolRGBA(), pattern: Protocol.Overlay.LineStylePattern.Dashed},\n      mainDistributedSpace: {hatchColor: mainColor.toProtocolRGBA()},\n      crossDistributedSpace: {hatchColor: mainColor.toProtocolRGBA()},\n    };\n  }\n\n  private buildScrollSnapContainerHighlightConfig(_nodeId: number):\n      Protocol.Overlay.ScrollSnapContainerHighlightConfig {\n    return {\n      snapAreaBorder: {\n        color: Common.Color.PageHighlight.GridBorder.toProtocolRGBA(),\n        pattern: Protocol.Overlay.LineStylePattern.Dashed,\n      },\n      snapportBorder: {color: Common.Color.PageHighlight.GridBorder.toProtocolRGBA()},\n      scrollMarginColor: Common.Color.PageHighlight.Margin.toProtocolRGBA(),\n      scrollPaddingColor: Common.Color.PageHighlight.Padding.toProtocolRGBA(),\n    };\n  }\n\n  highlightGridInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    this.#gridHighlights.set(nodeId, this.buildGridHighlightConfig(nodeId));\n    this.updateHighlightsInOverlay();\n  }\n\n  isGridHighlighted(nodeId: Protocol.DOM.NodeId): boolean {\n    return this.#gridHighlights.has(nodeId);\n  }\n\n  colorOfGrid(nodeId: Protocol.DOM.NodeId): Common.Color.Color {\n    let color = this.#colors.get(nodeId);\n    if (!color) {\n      color = this.#gridColorGenerator.next();\n      this.#colors.set(nodeId, color);\n    }\n\n    return color;\n  }\n\n  setColorOfGrid(nodeId: Protocol.DOM.NodeId, color: Common.Color.Color): void {\n    this.#colors.set(nodeId, color);\n  }\n\n  hideGridInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (this.#gridHighlights.has(nodeId)) {\n      this.#gridHighlights.delete(nodeId);\n      this.updateHighlightsInOverlay();\n    }\n  }\n\n  highlightScrollSnapInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    this.#scrollSnapHighlights.set(nodeId, this.buildScrollSnapContainerHighlightConfig(nodeId));\n    this.updateHighlightsInOverlay();\n  }\n\n  isScrollSnapHighlighted(nodeId: Protocol.DOM.NodeId): boolean {\n    return this.#scrollSnapHighlights.has(nodeId);\n  }\n\n  hideScrollSnapInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (this.#scrollSnapHighlights.has(nodeId)) {\n      this.#scrollSnapHighlights.delete(nodeId);\n      this.updateHighlightsInOverlay();\n    }\n  }\n\n  highlightFlexInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    this.#flexHighlights.set(nodeId, this.buildFlexContainerHighlightConfig(nodeId));\n    this.updateHighlightsInOverlay();\n  }\n\n  isFlexHighlighted(nodeId: Protocol.DOM.NodeId): boolean {\n    return this.#flexHighlights.has(nodeId);\n  }\n\n  colorOfFlex(nodeId: Protocol.DOM.NodeId): Common.Color.Color {\n    let color = this.#colors.get(nodeId);\n    if (!color) {\n      color = this.#flexColorGenerator.next();\n      this.#colors.set(nodeId, color);\n    }\n\n    return color;\n  }\n\n  setColorOfFlex(nodeId: Protocol.DOM.NodeId, color: Common.Color.Color): void {\n    this.#colors.set(nodeId, color);\n  }\n\n  hideFlexInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (this.#flexHighlights.has(nodeId)) {\n      this.#flexHighlights.delete(nodeId);\n      this.updateHighlightsInOverlay();\n    }\n  }\n\n  highlightContainerQueryInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    this.#containerQueryHighlights.set(nodeId, this.buildContainerQueryContainerHighlightConfig());\n    this.updateHighlightsInOverlay();\n  }\n\n  hideContainerQueryInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (this.#containerQueryHighlights.has(nodeId)) {\n      this.#containerQueryHighlights.delete(nodeId);\n      this.updateHighlightsInOverlay();\n    }\n  }\n\n  isContainerQueryHighlighted(nodeId: Protocol.DOM.NodeId): boolean {\n    return this.#containerQueryHighlights.has(nodeId);\n  }\n\n  private buildContainerQueryContainerHighlightConfig(): Protocol.Overlay.ContainerQueryContainerHighlightConfig {\n    return {\n      containerBorder: {\n        color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        pattern: Protocol.Overlay.LineStylePattern.Dashed,\n      },\n      descendantBorder: {\n        color: Common.Color.PageHighlight.LayoutLine.toProtocolRGBA(),\n        pattern: Protocol.Overlay.LineStylePattern.Dashed,\n      },\n    };\n  }\n\n  highlightIsolatedElementInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    this.#isolatedElementHighlights.set(nodeId, this.buildIsolationModeHighlightConfig());\n    this.updateHighlightsInOverlay();\n  }\n\n  hideIsolatedElementInOverlay(nodeId: Protocol.DOM.NodeId): void {\n    if (this.#isolatedElementHighlights.has(nodeId)) {\n      this.#isolatedElementHighlights.delete(nodeId);\n      this.updateHighlightsInOverlay();\n    }\n  }\n\n  isIsolatedElementHighlighted(nodeId: Protocol.DOM.NodeId): boolean {\n    return this.#isolatedElementHighlights.has(nodeId);\n  }\n\n  private buildIsolationModeHighlightConfig(): Protocol.Overlay.IsolationModeHighlightConfig {\n    return {\n      resizerColor: Common.Color.IsolationModeHighlight.Resizer.toProtocolRGBA(),\n      resizerHandleColor: Common.Color.IsolationModeHighlight.ResizerHandle.toProtocolRGBA(),\n      maskColor: Common.Color.IsolationModeHighlight.Mask.toProtocolRGBA(),\n    };\n  }\n\n  hideAllInOverlay(): void {\n    this.#flexHighlights.clear();\n    this.#gridHighlights.clear();\n    this.#scrollSnapHighlights.clear();\n    this.#containerQueryHighlights.clear();\n    this.#isolatedElementHighlights.clear();\n    this.updateHighlightsInOverlay();\n  }\n\n  refreshHighlights(): void {\n    const gridsNeedUpdate = this.updateHighlightsForDeletedNodes(this.#gridHighlights);\n    const flexboxesNeedUpdate = this.updateHighlightsForDeletedNodes(this.#flexHighlights);\n    const scrollSnapsNeedUpdate = this.updateHighlightsForDeletedNodes(this.#scrollSnapHighlights);\n    const containerQueriesNeedUpdate = this.updateHighlightsForDeletedNodes(this.#containerQueryHighlights);\n    const isolatedElementsNeedUpdate = this.updateHighlightsForDeletedNodes(this.#isolatedElementHighlights);\n    if (flexboxesNeedUpdate || gridsNeedUpdate || scrollSnapsNeedUpdate || containerQueriesNeedUpdate ||\n        isolatedElementsNeedUpdate) {\n      this.updateHighlightsInOverlay();\n    }\n  }\n\n  private updateHighlightsForDeletedNodes(highlights: Map<Protocol.DOM.NodeId, unknown>): boolean {\n    let needsUpdate = false;\n    for (const nodeId of highlights.keys()) {\n      if (this.#model.getDOMModel().nodeForId(nodeId) === null) {\n        highlights.delete(nodeId);\n        needsUpdate = true;\n      }\n    }\n    return needsUpdate;\n  }\n\n  resetOverlay(): void {\n    for (const nodeId of this.#gridHighlights.keys()) {\n      this.#gridHighlights.set(nodeId, this.buildGridHighlightConfig(nodeId));\n    }\n    for (const nodeId of this.#flexHighlights.keys()) {\n      this.#flexHighlights.set(nodeId, this.buildFlexContainerHighlightConfig(nodeId));\n    }\n    for (const nodeId of this.#scrollSnapHighlights.keys()) {\n      this.#scrollSnapHighlights.set(nodeId, this.buildScrollSnapContainerHighlightConfig(nodeId));\n    }\n    for (const nodeId of this.#containerQueryHighlights.keys()) {\n      this.#containerQueryHighlights.set(nodeId, this.buildContainerQueryContainerHighlightConfig());\n    }\n    for (const nodeId of this.#isolatedElementHighlights.keys()) {\n      this.#isolatedElementHighlights.set(nodeId, this.buildIsolationModeHighlightConfig());\n    }\n    this.updateHighlightsInOverlay();\n  }\n\n  private updateHighlightsInOverlay(): void {\n    const hasNodesToHighlight = this.#gridHighlights.size > 0 || this.#flexHighlights.size > 0 ||\n        this.#containerQueryHighlights.size > 0 || this.#isolatedElementHighlights.size > 0;\n    this.#model.setShowViewportSizeOnResize(!hasNodesToHighlight);\n    this.updateGridHighlightsInOverlay();\n    this.updateFlexHighlightsInOverlay();\n    this.updateScrollSnapHighlightsInOverlay();\n    this.updateContainerQueryHighlightsInOverlay();\n    this.updateIsolatedElementHighlightsInOverlay();\n  }\n\n  private updateGridHighlightsInOverlay(): void {\n    const overlayModel = this.#model;\n    const gridNodeHighlightConfigs = [];\n    for (const [nodeId, gridHighlightConfig] of this.#gridHighlights.entries()) {\n      gridNodeHighlightConfigs.push({nodeId, gridHighlightConfig});\n    }\n    overlayModel.target().overlayAgent().invoke_setShowGridOverlays({gridNodeHighlightConfigs});\n  }\n\n  private updateFlexHighlightsInOverlay(): void {\n    if (!this.#flexEnabled) {\n      return;\n    }\n    const overlayModel = this.#model;\n    const flexNodeHighlightConfigs = [];\n    for (const [nodeId, flexContainerHighlightConfig] of this.#flexHighlights.entries()) {\n      flexNodeHighlightConfigs.push({nodeId, flexContainerHighlightConfig});\n    }\n    overlayModel.target().overlayAgent().invoke_setShowFlexOverlays({flexNodeHighlightConfigs});\n  }\n\n  private updateScrollSnapHighlightsInOverlay(): void {\n    const overlayModel = this.#model;\n    const scrollSnapHighlightConfigs = [];\n    for (const [nodeId, scrollSnapContainerHighlightConfig] of this.#scrollSnapHighlights.entries()) {\n      scrollSnapHighlightConfigs.push({nodeId, scrollSnapContainerHighlightConfig});\n    }\n    overlayModel.target().overlayAgent().invoke_setShowScrollSnapOverlays({scrollSnapHighlightConfigs});\n  }\n\n  updateContainerQueryHighlightsInOverlay(): void {\n    const overlayModel = this.#model;\n    const containerQueryHighlightConfigs = [];\n    for (const [nodeId, containerQueryContainerHighlightConfig] of this.#containerQueryHighlights.entries()) {\n      containerQueryHighlightConfigs.push({nodeId, containerQueryContainerHighlightConfig});\n    }\n    overlayModel.target().overlayAgent().invoke_setShowContainerQueryOverlays({containerQueryHighlightConfigs});\n  }\n\n  updateIsolatedElementHighlightsInOverlay(): void {\n    const overlayModel = this.#model;\n    const isolatedElementHighlightConfigs = [];\n    for (const [nodeId, isolationModeHighlightConfig] of this.#isolatedElementHighlights.entries()) {\n      isolatedElementHighlightConfigs.push({nodeId, isolationModeHighlightConfig});\n    }\n    overlayModel.target().overlayAgent().invoke_setShowIsolatedElements({isolatedElementHighlightConfigs});\n  }\n}\n\nexport interface DOMModel {\n  nodeForId(nodeId: Protocol.DOM.NodeId): void;\n}\nexport interface OverlayAgent {\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  invoke_setShowGridOverlays(param: {\n    gridNodeHighlightConfigs: Array<{\n      nodeId: number,\n      gridHighlightConfig: Protocol.Overlay.GridHighlightConfig,\n    }>,\n  }): void;\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  invoke_setShowFlexOverlays(param: {\n    flexNodeHighlightConfigs: Array<{\n      nodeId: number,\n      flexContainerHighlightConfig: Protocol.Overlay.FlexContainerHighlightConfig,\n    }>,\n  }): void;\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  invoke_setShowScrollSnapOverlays(param: {\n    scrollSnapHighlightConfigs: Array<{\n      nodeId: number,\n    }>,\n  }): void;\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  invoke_setShowContainerQueryOverlays(param: {\n    containerQueryHighlightConfigs: Array<{\n      nodeId: number,\n      containerQueryContainerHighlightConfig: Protocol.Overlay.ContainerQueryContainerHighlightConfig,\n    }>,\n  }): void;\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  invoke_setShowIsolatedElements(param: {\n    isolatedElementHighlightConfigs: Array<{\n      nodeId: number,\n      isolationModeHighlightConfig: Protocol.Overlay.IsolationModeHighlightConfig,\n    }>,\n  }): void;\n}\n\nexport interface Target {\n  overlayAgent(): OverlayAgent;\n}\n\nexport interface OverlayModel {\n  getDOMModel(): DOMModel;\n\n  target(): Target;\n\n  setShowViewportSizeOnResize(value: boolean): void;\n}\n"]}