{"version":3,"file":"DOMModel.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/DOMModel.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2009, 2010 Google Inc. All rights reserved.\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the #name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nimport {CSSModel} from './CSSModel.js';\nimport {FrameManager} from './FrameManager.js';\nimport {OverlayModel} from './OverlayModel.js';\nimport type {RemoteObject} from './RemoteObject.js';\nimport {RuntimeModel} from './RuntimeModel.js';\nimport type {Target} from './Target.js';\nimport {Capability} from './Target.js';\nimport {SDKModel} from './SDKModel.js';\nimport {TargetManager} from './TargetManager.js';\nimport {ResourceTreeModel} from './ResourceTreeModel.js';\n\nexport class DOMNode {\n  #domModelInternal: DOMModel;\n  #agent: ProtocolProxyApi.DOMApi;\n  ownerDocument!: DOMDocument|null;\n  #isInShadowTreeInternal!: boolean;\n  id!: Protocol.DOM.NodeId;\n  index: number|undefined;\n  #backendNodeIdInternal!: Protocol.DOM.BackendNodeId;\n  #nodeTypeInternal!: number;\n  #nodeNameInternal!: string;\n  #localNameInternal!: string;\n  nodeValueInternal!: string;\n  #pseudoTypeInternal!: Protocol.DOM.PseudoType|undefined;\n  #pseudoIdentifier?: string;\n  #shadowRootTypeInternal!: Protocol.DOM.ShadowRootType|undefined;\n  #frameOwnerFrameIdInternal!: Protocol.Page.FrameId|null;\n  #xmlVersion!: string|undefined;\n  #isSVGNodeInternal!: boolean;\n  #creationStackTraceInternal: Promise<Protocol.Runtime.StackTrace|null>|null;\n  #pseudoElements: Map<string, DOMNode[]>;\n  #distributedNodesInternal: DOMNodeShortcut[];\n  assignedSlot: DOMNodeShortcut|null;\n  readonly shadowRootsInternal: DOMNode[];\n  #attributesInternal: Map<string, Attribute>;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  #markers: Map<string, any>;\n  #subtreeMarkerCount: number;\n  childNodeCountInternal!: number;\n  childrenInternal: DOMNode[]|null;\n  nextSibling: DOMNode|null;\n  previousSibling: DOMNode|null;\n  firstChild: DOMNode|null;\n  lastChild: DOMNode|null;\n  parentNode: DOMNode|null;\n  templateContentInternal?: DOMNode;\n  contentDocumentInternal?: DOMDocument;\n  childDocumentPromiseForTesting?: Promise<DOMDocument|null>;\n  #importedDocumentInternal?: DOMNode;\n  publicId?: string;\n  systemId?: string;\n  internalSubset?: string;\n  name?: string;\n  value?: string;\n\n  constructor(domModel: DOMModel) {\n    this.#domModelInternal = domModel;\n    this.#agent = this.#domModelInternal.getAgent();\n    this.index = undefined;\n    this.#creationStackTraceInternal = null;\n    this.#pseudoElements = new Map();\n    this.#distributedNodesInternal = [];\n    this.assignedSlot = null;\n    this.shadowRootsInternal = [];\n    this.#attributesInternal = new Map();\n    this.#markers = new Map();\n    this.#subtreeMarkerCount = 0;\n    this.childrenInternal = null;\n    this.nextSibling = null;\n    this.previousSibling = null;\n    this.firstChild = null;\n    this.lastChild = null;\n    this.parentNode = null;\n  }\n\n  static create(domModel: DOMModel, doc: DOMDocument|null, isInShadowTree: boolean, payload: Protocol.DOM.Node):\n      DOMNode {\n    const node = new DOMNode(domModel);\n    node.init(doc, isInShadowTree, payload);\n    return node;\n  }\n\n  init(doc: DOMDocument|null, isInShadowTree: boolean, payload: Protocol.DOM.Node): void {\n    this.#agent = this.#domModelInternal.getAgent();\n    this.ownerDocument = doc;\n    this.#isInShadowTreeInternal = isInShadowTree;\n\n    this.id = payload.nodeId;\n    this.#backendNodeIdInternal = payload.backendNodeId;\n    this.#domModelInternal.registerNode(this);\n    this.#nodeTypeInternal = payload.nodeType;\n    this.#nodeNameInternal = payload.nodeName;\n    this.#localNameInternal = payload.localName;\n    this.nodeValueInternal = payload.nodeValue;\n    this.#pseudoTypeInternal = payload.pseudoType;\n    this.#pseudoIdentifier = payload.pseudoIdentifier;\n    this.#shadowRootTypeInternal = payload.shadowRootType;\n    this.#frameOwnerFrameIdInternal = payload.frameId || null;\n    this.#xmlVersion = payload.xmlVersion;\n    this.#isSVGNodeInternal = Boolean(payload.isSVG);\n\n    if (payload.attributes) {\n      this.setAttributesPayload(payload.attributes);\n    }\n\n    this.childNodeCountInternal = payload.childNodeCount || 0;\n    if (payload.shadowRoots) {\n      for (let i = 0; i < payload.shadowRoots.length; ++i) {\n        const root = payload.shadowRoots[i];\n        const node = DOMNode.create(this.#domModelInternal, this.ownerDocument, true, root);\n        this.shadowRootsInternal.push(node);\n        node.parentNode = this;\n      }\n    }\n\n    if (payload.templateContent) {\n      this.templateContentInternal =\n          DOMNode.create(this.#domModelInternal, this.ownerDocument, true, payload.templateContent);\n      this.templateContentInternal.parentNode = this;\n      this.childrenInternal = [];\n    }\n\n    const frameOwnerTags = new Set(['EMBED', 'IFRAME', 'OBJECT', 'PORTAL', 'FENCEDFRAME']);\n    if (payload.contentDocument) {\n      this.contentDocumentInternal = new DOMDocument(this.#domModelInternal, payload.contentDocument);\n      this.contentDocumentInternal.parentNode = this;\n      this.childrenInternal = [];\n    } else if (payload.frameId && frameOwnerTags.has(payload.nodeName)) {\n      // At this point we know we are in an OOPIF, otherwise `payload.contentDocument` would have been set.\n      this.childDocumentPromiseForTesting = this.requestChildDocument(payload.frameId, this.#domModelInternal.target());\n      this.childrenInternal = [];\n    }\n\n    if (payload.importedDocument) {\n      this.#importedDocumentInternal =\n          DOMNode.create(this.#domModelInternal, this.ownerDocument, true, payload.importedDocument);\n      this.#importedDocumentInternal.parentNode = this;\n      this.childrenInternal = [];\n    }\n\n    if (payload.distributedNodes) {\n      this.setDistributedNodePayloads(payload.distributedNodes);\n    }\n\n    if (payload.assignedSlot) {\n      this.setAssignedSlot(payload.assignedSlot);\n    }\n\n    if (payload.children) {\n      this.setChildrenPayload(payload.children);\n    }\n\n    this.setPseudoElements(payload.pseudoElements);\n\n    if (this.#nodeTypeInternal === Node.ELEMENT_NODE) {\n      // HTML and BODY from internal iframes should not overwrite top-level ones.\n      if (this.ownerDocument && !this.ownerDocument.documentElement && this.#nodeNameInternal === 'HTML') {\n        this.ownerDocument.documentElement = this;\n      }\n      if (this.ownerDocument && !this.ownerDocument.body && this.#nodeNameInternal === 'BODY') {\n        this.ownerDocument.body = this;\n      }\n    } else if (this.#nodeTypeInternal === Node.DOCUMENT_TYPE_NODE) {\n      this.publicId = payload.publicId;\n      this.systemId = payload.systemId;\n      this.internalSubset = payload.internalSubset;\n    } else if (this.#nodeTypeInternal === Node.ATTRIBUTE_NODE) {\n      this.name = payload.name;\n      this.value = payload.value;\n    }\n  }\n\n  private async requestChildDocument(frameId: Protocol.Page.FrameId, notInTarget: Target): Promise<DOMDocument|null> {\n    const frame = await FrameManager.instance().getOrWaitForFrame(frameId, notInTarget);\n    const childModel = frame.resourceTreeModel()?.target().model(DOMModel);\n    return childModel?.requestDocument() || null;\n  }\n\n  isAdFrameNode(): boolean {\n    if (this.isIframe() && this.#frameOwnerFrameIdInternal) {\n      const frame = FrameManager.instance().getFrame(this.#frameOwnerFrameIdInternal);\n      if (!frame) {\n        return false;\n      }\n      return frame.adFrameType() !== Protocol.Page.AdFrameType.None;\n    }\n    return false;\n  }\n\n  isSVGNode(): boolean {\n    return this.#isSVGNodeInternal;\n  }\n\n  creationStackTrace(): Promise<Protocol.Runtime.StackTrace|null> {\n    if (this.#creationStackTraceInternal) {\n      return this.#creationStackTraceInternal;\n    }\n\n    const stackTracesPromise = this.#agent.invoke_getNodeStackTraces({nodeId: this.id});\n    this.#creationStackTraceInternal = stackTracesPromise.then(res => res.creation || null);\n    return this.#creationStackTraceInternal;\n  }\n\n  get subtreeMarkerCount(): number {\n    return this.#subtreeMarkerCount;\n  }\n\n  domModel(): DOMModel {\n    return this.#domModelInternal;\n  }\n\n  backendNodeId(): Protocol.DOM.BackendNodeId {\n    return this.#backendNodeIdInternal;\n  }\n\n  children(): DOMNode[]|null {\n    return this.childrenInternal ? this.childrenInternal.slice() : null;\n  }\n\n  setChildren(children: DOMNode[]): void {\n    this.childrenInternal = children;\n  }\n\n  hasAttributes(): boolean {\n    return this.#attributesInternal.size > 0;\n  }\n\n  childNodeCount(): number {\n    return this.childNodeCountInternal;\n  }\n\n  setChildNodeCount(childNodeCount: number): void {\n    this.childNodeCountInternal = childNodeCount;\n  }\n\n  hasShadowRoots(): boolean {\n    return Boolean(this.shadowRootsInternal.length);\n  }\n\n  shadowRoots(): DOMNode[] {\n    return this.shadowRootsInternal.slice();\n  }\n\n  templateContent(): DOMNode|null {\n    return this.templateContentInternal || null;\n  }\n\n  contentDocument(): DOMDocument|null {\n    return this.contentDocumentInternal || null;\n  }\n\n  setContentDocument(node: DOMDocument): void {\n    this.contentDocumentInternal = node;\n  }\n\n  isIframe(): boolean {\n    return this.#nodeNameInternal === 'IFRAME';\n  }\n\n  isPortal(): boolean {\n    return this.#nodeNameInternal === 'PORTAL';\n  }\n\n  importedDocument(): DOMNode|null {\n    return this.#importedDocumentInternal || null;\n  }\n\n  nodeType(): number {\n    return this.#nodeTypeInternal;\n  }\n\n  nodeName(): string {\n    return this.#nodeNameInternal;\n  }\n\n  pseudoType(): string|undefined {\n    return this.#pseudoTypeInternal;\n  }\n\n  pseudoIdentifier(): string|undefined {\n    return this.#pseudoIdentifier;\n  }\n\n  hasPseudoElements(): boolean {\n    return this.#pseudoElements.size > 0;\n  }\n\n  pseudoElements(): Map<string, DOMNode[]> {\n    return this.#pseudoElements;\n  }\n\n  beforePseudoElement(): DOMNode|undefined {\n    return this.#pseudoElements.get(DOMNode.PseudoElementNames.Before)?.at(-1);\n  }\n\n  afterPseudoElement(): DOMNode|undefined {\n    return this.#pseudoElements.get(DOMNode.PseudoElementNames.After)?.at(-1);\n  }\n\n  markerPseudoElement(): DOMNode|undefined {\n    return this.#pseudoElements.get(DOMNode.PseudoElementNames.Marker)?.at(-1);\n  }\n\n  pageTransitionPseudoElements(): DOMNode[] {\n    return [\n      ...this.#pseudoElements.get(DOMNode.PseudoElementNames.PageTransition) || [],\n      ...this.#pseudoElements.get(DOMNode.PseudoElementNames.PageTransitionContainer) || [],\n      ...this.#pseudoElements.get(DOMNode.PseudoElementNames.PageTransitionImageWrapper) || [],\n      ...this.#pseudoElements.get(DOMNode.PseudoElementNames.PageTransitionOutgoingImage) || [],\n      ...this.#pseudoElements.get(DOMNode.PseudoElementNames.PageTransitionIncomingImage) || [],\n    ];\n  }\n\n  hasAssignedSlot(): boolean {\n    return this.assignedSlot !== null;\n  }\n\n  isInsertionPoint(): boolean {\n    return !this.isXMLNode() &&\n        (this.#nodeNameInternal === 'SHADOW' || this.#nodeNameInternal === 'CONTENT' ||\n         this.#nodeNameInternal === 'SLOT');\n  }\n\n  distributedNodes(): DOMNodeShortcut[] {\n    return this.#distributedNodesInternal;\n  }\n\n  isInShadowTree(): boolean {\n    return this.#isInShadowTreeInternal;\n  }\n\n  ancestorShadowHost(): DOMNode|null {\n    const ancestorShadowRoot = this.ancestorShadowRoot();\n    return ancestorShadowRoot ? ancestorShadowRoot.parentNode : null;\n  }\n\n  ancestorShadowRoot(): DOMNode|null {\n    if (!this.#isInShadowTreeInternal) {\n      return null;\n    }\n\n    let current: (DOMNode|null) = (this as DOMNode | null);\n    while (current && !current.isShadowRoot()) {\n      current = current.parentNode;\n    }\n    return current;\n  }\n\n  ancestorUserAgentShadowRoot(): DOMNode|null {\n    const ancestorShadowRoot = this.ancestorShadowRoot();\n    if (!ancestorShadowRoot) {\n      return null;\n    }\n    return ancestorShadowRoot.shadowRootType() === DOMNode.ShadowRootTypes.UserAgent ? ancestorShadowRoot : null;\n  }\n\n  isShadowRoot(): boolean {\n    return Boolean(this.#shadowRootTypeInternal);\n  }\n\n  shadowRootType(): string|null {\n    return this.#shadowRootTypeInternal || null;\n  }\n\n  nodeNameInCorrectCase(): string {\n    const shadowRootType = this.shadowRootType();\n    if (shadowRootType) {\n      return '#shadow-root (' + shadowRootType + ')';\n    }\n\n    // If there is no local #name, it's case sensitive\n    if (!this.localName()) {\n      return this.nodeName();\n    }\n\n    // If the names are different lengths, there is a prefix and it's case sensitive\n    if (this.localName().length !== this.nodeName().length) {\n      return this.nodeName();\n    }\n\n    // Return the localname, which will be case insensitive if its an html node\n    return this.localName();\n  }\n\n  setNodeName(name: string, callback?: ((arg0: string|null, arg1: DOMNode|null) => void)): void {\n    void this.#agent.invoke_setNodeName({nodeId: this.id, name}).then(response => {\n      if (!response.getError()) {\n        this.#domModelInternal.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null, this.#domModelInternal.nodeForId(response.nodeId));\n      }\n    });\n  }\n\n  localName(): string {\n    return this.#localNameInternal;\n  }\n\n  nodeValue(): string {\n    return this.nodeValueInternal;\n  }\n\n  setNodeValueInternal(nodeValue: string): void {\n    this.nodeValueInternal = nodeValue;\n  }\n\n  setNodeValue(value: string, callback?: ((arg0: string|null) => void)): void {\n    void this.#agent.invoke_setNodeValue({nodeId: this.id, value}).then(response => {\n      if (!response.getError()) {\n        this.#domModelInternal.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  getAttribute(name: string): string|undefined {\n    const attr = this.#attributesInternal.get(name);\n    return attr ? attr.value : undefined;\n  }\n\n  setAttribute(name: string, text: string, callback?: ((arg0: string|null) => void)): void {\n    void this.#agent.invoke_setAttributesAsText({nodeId: this.id, text, name}).then(response => {\n      if (!response.getError()) {\n        this.#domModelInternal.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  setAttributeValue(name: string, value: string, callback?: ((arg0: string|null) => void)): void {\n    void this.#agent.invoke_setAttributeValue({nodeId: this.id, name, value}).then(response => {\n      if (!response.getError()) {\n        this.#domModelInternal.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  setAttributeValuePromise(name: string, value: string): Promise<string|null> {\n    return new Promise(fulfill => this.setAttributeValue(name, value, fulfill));\n  }\n\n  attributes(): Attribute[] {\n    return [...this.#attributesInternal.values()];\n  }\n\n  async removeAttribute(name: string): Promise<void> {\n    const response = await this.#agent.invoke_removeAttribute({nodeId: this.id, name});\n    if (response.getError()) {\n      return;\n    }\n    this.#attributesInternal.delete(name);\n    this.#domModelInternal.markUndoableState();\n  }\n\n  getChildNodes(callback: (arg0: Array<DOMNode>|null) => void): void {\n    if (this.childrenInternal) {\n      callback(this.children());\n      return;\n    }\n    void this.#agent.invoke_requestChildNodes({nodeId: this.id}).then(response => {\n      callback(response.getError() ? null : this.children());\n    });\n  }\n\n  async getSubtree(depth: number, pierce: boolean): Promise<DOMNode[]|null> {\n    const response = await this.#agent.invoke_requestChildNodes({nodeId: this.id, depth: depth, pierce: pierce});\n    return response.getError() ? null : this.childrenInternal;\n  }\n\n  async getOuterHTML(): Promise<string|null> {\n    const {outerHTML} = await this.#agent.invoke_getOuterHTML({nodeId: this.id});\n    return outerHTML;\n  }\n\n  setOuterHTML(html: string, callback?: ((arg0: string|null) => void)): void {\n    void this.#agent.invoke_setOuterHTML({nodeId: this.id, outerHTML: html}).then(response => {\n      if (!response.getError()) {\n        this.#domModelInternal.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  removeNode(callback?: ((arg0: string|null, arg1?: Protocol.DOM.NodeId|undefined) => void)): Promise<void> {\n    return this.#agent.invoke_removeNode({nodeId: this.id}).then(response => {\n      if (!response.getError()) {\n        this.#domModelInternal.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  async copyNode(): Promise<string|null> {\n    const {outerHTML} = await this.#agent.invoke_getOuterHTML({nodeId: this.id});\n    if (outerHTML !== null) {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(outerHTML);\n    }\n    return outerHTML;\n  }\n\n  path(): string {\n    function canPush(node: DOMNode): number|false|null {\n      return (node.index !== undefined || (node.isShadowRoot() && node.parentNode)) && node.#nodeNameInternal.length;\n    }\n\n    const path = [];\n    let node: (DOMNode|null) = (this as DOMNode | null);\n    while (node && canPush(node)) {\n      const index = typeof node.index === 'number' ?\n          node.index :\n          (node.shadowRootType() === DOMNode.ShadowRootTypes.UserAgent ? 'u' : 'a');\n      path.push([index, node.#nodeNameInternal]);\n      node = node.parentNode;\n    }\n    path.reverse();\n    return path.join(',');\n  }\n\n  isAncestor(node: DOMNode): boolean {\n    if (!node) {\n      return false;\n    }\n\n    let currentNode: (DOMNode|null) = node.parentNode;\n    while (currentNode) {\n      if (this === currentNode) {\n        return true;\n      }\n      currentNode = currentNode.parentNode;\n    }\n    return false;\n  }\n\n  isDescendant(descendant: DOMNode): boolean {\n    return descendant !== null && descendant.isAncestor(this);\n  }\n\n  frameOwnerFrameId(): Protocol.Page.FrameId|null {\n    return this.#frameOwnerFrameIdInternal;\n  }\n\n  frameId(): Protocol.Page.FrameId|null {\n    let node: DOMNode = this.parentNode || this;\n    while (!node.#frameOwnerFrameIdInternal && node.parentNode) {\n      node = node.parentNode;\n    }\n    return node.#frameOwnerFrameIdInternal;\n  }\n\n  setAttributesPayload(attrs: string[]): boolean {\n    let attributesChanged: true|boolean =\n        !this.#attributesInternal || attrs.length !== this.#attributesInternal.size * 2;\n    const oldAttributesMap = this.#attributesInternal || new Map();\n\n    this.#attributesInternal = new Map();\n\n    for (let i = 0; i < attrs.length; i += 2) {\n      const name = attrs[i];\n      const value = attrs[i + 1];\n      this.addAttribute(name, value);\n\n      if (attributesChanged) {\n        continue;\n      }\n\n      const oldAttribute = oldAttributesMap.get(name);\n      if (!oldAttribute || oldAttribute.value !== value) {\n        attributesChanged = true;\n      }\n    }\n    return attributesChanged;\n  }\n\n  insertChild(prev: DOMNode|undefined, payload: Protocol.DOM.Node): DOMNode {\n    if (!this.childrenInternal) {\n      throw new Error('DOMNode._children is expected to not be null.');\n    }\n    const node = DOMNode.create(this.#domModelInternal, this.ownerDocument, this.#isInShadowTreeInternal, payload);\n    this.childrenInternal.splice(prev ? this.childrenInternal.indexOf(prev) + 1 : 0, 0, node);\n    this.renumber();\n    return node;\n  }\n\n  removeChild(node: DOMNode): void {\n    const pseudoType = node.pseudoType();\n    if (pseudoType) {\n      const updatedPseudoElements = this.#pseudoElements.get(pseudoType)?.filter(element => element !== node);\n      if (updatedPseudoElements && updatedPseudoElements.length > 0) {\n        this.#pseudoElements.set(pseudoType, updatedPseudoElements);\n      } else {\n        this.#pseudoElements.delete(pseudoType);\n      }\n    } else {\n      const shadowRootIndex = this.shadowRootsInternal.indexOf(node);\n      if (shadowRootIndex !== -1) {\n        this.shadowRootsInternal.splice(shadowRootIndex, 1);\n      } else {\n        if (!this.childrenInternal) {\n          throw new Error('DOMNode._children is expected to not be null.');\n        }\n        if (this.childrenInternal.indexOf(node) === -1) {\n          throw new Error('DOMNode._children is expected to contain the node to be removed.');\n        }\n        this.childrenInternal.splice(this.childrenInternal.indexOf(node), 1);\n      }\n    }\n    node.parentNode = null;\n    this.#subtreeMarkerCount -= node.#subtreeMarkerCount;\n    if (node.#subtreeMarkerCount) {\n      this.#domModelInternal.dispatchEventToListeners(Events.MarkersChanged, this);\n    }\n    this.renumber();\n  }\n\n  setChildrenPayload(payloads: Protocol.DOM.Node[]): void {\n    this.childrenInternal = [];\n    for (let i = 0; i < payloads.length; ++i) {\n      const payload = payloads[i];\n      const node = DOMNode.create(this.#domModelInternal, this.ownerDocument, this.#isInShadowTreeInternal, payload);\n      this.childrenInternal.push(node);\n    }\n    this.renumber();\n  }\n\n  private setPseudoElements(payloads: Protocol.DOM.Node[]|undefined): void {\n    if (!payloads) {\n      return;\n    }\n\n    for (let i = 0; i < payloads.length; ++i) {\n      const node =\n          DOMNode.create(this.#domModelInternal, this.ownerDocument, this.#isInShadowTreeInternal, payloads[i]);\n      node.parentNode = this;\n      const pseudoType = node.pseudoType();\n      if (!pseudoType) {\n        throw new Error('DOMNode.pseudoType() is expected to be defined.');\n      }\n      const currentPseudoElements = this.#pseudoElements.get(pseudoType);\n      if (currentPseudoElements) {\n        currentPseudoElements.push(node);\n      } else {\n        this.#pseudoElements.set(pseudoType, [node]);\n      }\n    }\n  }\n\n  setDistributedNodePayloads(payloads: Protocol.DOM.BackendNode[]): void {\n    this.#distributedNodesInternal = [];\n    for (const payload of payloads) {\n      this.#distributedNodesInternal.push(new DOMNodeShortcut(\n          this.#domModelInternal.target(), payload.backendNodeId, payload.nodeType, payload.nodeName));\n    }\n  }\n\n  setAssignedSlot(payload: Protocol.DOM.BackendNode): void {\n    this.assignedSlot =\n        new DOMNodeShortcut(this.#domModelInternal.target(), payload.backendNodeId, payload.nodeType, payload.nodeName);\n  }\n\n  private renumber(): void {\n    if (!this.childrenInternal) {\n      throw new Error('DOMNode._children is expected to not be null.');\n    }\n    this.childNodeCountInternal = this.childrenInternal.length;\n    if (this.childNodeCountInternal === 0) {\n      this.firstChild = null;\n      this.lastChild = null;\n      return;\n    }\n    this.firstChild = this.childrenInternal[0];\n    this.lastChild = this.childrenInternal[this.childNodeCountInternal - 1];\n    for (let i = 0; i < this.childNodeCountInternal; ++i) {\n      const child = this.childrenInternal[i];\n      child.index = i;\n      child.nextSibling = i + 1 < this.childNodeCountInternal ? this.childrenInternal[i + 1] : null;\n      child.previousSibling = i - 1 >= 0 ? this.childrenInternal[i - 1] : null;\n      child.parentNode = this;\n    }\n  }\n\n  private addAttribute(name: string, value: string): void {\n    const attr = {name: name, value: value, _node: this};\n    this.#attributesInternal.set(name, attr);\n  }\n\n  setAttributeInternal(name: string, value: string): void {\n    const attr = this.#attributesInternal.get(name);\n    if (attr) {\n      attr.value = value;\n    } else {\n      this.addAttribute(name, value);\n    }\n  }\n\n  removeAttributeInternal(name: string): void {\n    this.#attributesInternal.delete(name);\n  }\n\n  copyTo(targetNode: DOMNode, anchorNode: DOMNode|null, callback?: ((arg0: string|null, arg1: DOMNode|null) => void)):\n      void {\n    void this.#agent\n        .invoke_copyTo(\n            {nodeId: this.id, targetNodeId: targetNode.id, insertBeforeNodeId: anchorNode ? anchorNode.id : undefined})\n        .then(response => {\n          if (!response.getError()) {\n            this.#domModelInternal.markUndoableState();\n          }\n          if (callback) {\n            callback(response.getError() || null, this.#domModelInternal.nodeForId(response.nodeId));\n          }\n        });\n  }\n\n  moveTo(targetNode: DOMNode, anchorNode: DOMNode|null, callback?: ((arg0: string|null, arg1: DOMNode|null) => void)):\n      void {\n    void this.#agent\n        .invoke_moveTo(\n            {nodeId: this.id, targetNodeId: targetNode.id, insertBeforeNodeId: anchorNode ? anchorNode.id : undefined})\n        .then(response => {\n          if (!response.getError()) {\n            this.#domModelInternal.markUndoableState();\n          }\n          if (callback) {\n            callback(response.getError() || null, this.#domModelInternal.nodeForId(response.nodeId));\n          }\n        });\n  }\n\n  isXMLNode(): boolean {\n    return Boolean(this.#xmlVersion);\n  }\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  setMarker(name: string, value: any): void {\n    if (value === null) {\n      if (!this.#markers.has(name)) {\n        return;\n      }\n\n      this.#markers.delete(name);\n      for (let node: (DOMNode|null) = (this as DOMNode | null); node; node = node.parentNode) {\n        --node.#subtreeMarkerCount;\n      }\n      for (let node: (DOMNode|null) = (this as DOMNode | null); node; node = node.parentNode) {\n        this.#domModelInternal.dispatchEventToListeners(Events.MarkersChanged, node);\n      }\n      return;\n    }\n\n    if (this.parentNode && !this.#markers.has(name)) {\n      for (let node: (DOMNode|null) = (this as DOMNode | null); node; node = node.parentNode) {\n        ++node.#subtreeMarkerCount;\n      }\n    }\n    this.#markers.set(name, value);\n    for (let node: (DOMNode|null) = (this as DOMNode | null); node; node = node.parentNode) {\n      this.#domModelInternal.dispatchEventToListeners(Events.MarkersChanged, node);\n    }\n  }\n\n  marker<T>(name: string): T|null {\n    return this.#markers.get(name) || null;\n  }\n\n  getMarkerKeysForTest(): string[] {\n    return [...this.#markers.keys()];\n  }\n\n  traverseMarkers(visitor: (arg0: DOMNode, arg1: string) => void): void {\n    function traverse(node: DOMNode): void {\n      if (!node.#subtreeMarkerCount) {\n        return;\n      }\n      for (const marker of node.#markers.keys()) {\n        visitor(node, marker);\n      }\n      if (!node.childrenInternal) {\n        return;\n      }\n      for (const child of node.childrenInternal) {\n        traverse(child);\n      }\n    }\n    traverse(this);\n  }\n\n  resolveURL(url: string): Platform.DevToolsPath.UrlString|null {\n    if (!url) {\n      return url as Platform.DevToolsPath.UrlString;\n    }\n    for (let frameOwnerCandidate: (DOMNode|null) = (this as DOMNode | null); frameOwnerCandidate;\n         frameOwnerCandidate = frameOwnerCandidate.parentNode) {\n      if (frameOwnerCandidate instanceof DOMDocument && frameOwnerCandidate.baseURL) {\n        return Common.ParsedURL.ParsedURL.completeURL(frameOwnerCandidate.baseURL, url);\n      }\n    }\n    return null;\n  }\n\n  highlight(mode?: string): void {\n    this.#domModelInternal.overlayModel().highlightInOverlay({node: this, selectorList: undefined}, mode);\n  }\n\n  highlightForTwoSeconds(): void {\n    this.#domModelInternal.overlayModel().highlightInOverlayForTwoSeconds({node: this, selectorList: undefined});\n  }\n\n  async resolveToObject(objectGroup?: string): Promise<RemoteObject|null> {\n    const {object} = await this.#agent.invoke_resolveNode({nodeId: this.id, backendNodeId: undefined, objectGroup});\n    return object && this.#domModelInternal.runtimeModelInternal.createRemoteObject(object) || null;\n  }\n\n  async boxModel(): Promise<Protocol.DOM.BoxModel|null> {\n    const {model} = await this.#agent.invoke_getBoxModel({nodeId: this.id});\n    return model;\n  }\n\n  async setAsInspectedNode(): Promise<void> {\n    let node: (DOMNode|null)|DOMNode = (this as DOMNode | null);\n    if (node && node.pseudoType()) {\n      node = node.parentNode;\n    }\n    while (node) {\n      let ancestor = node.ancestorUserAgentShadowRoot();\n      if (!ancestor) {\n        break;\n      }\n      ancestor = node.ancestorShadowHost();\n      if (!ancestor) {\n        break;\n      }\n      // User #agent shadow root, keep climbing up.\n      node = ancestor;\n    }\n    if (!node) {\n      throw new Error('In DOMNode.setAsInspectedNode: node is expected to not be null.');\n    }\n    await this.#agent.invoke_setInspectedNode({nodeId: node.id});\n  }\n\n  enclosingElementOrSelf(): DOMNode|null {\n    let node: DOMNode|null|(DOMNode | null) = (this as DOMNode | null);\n    if (node && node.nodeType() === Node.TEXT_NODE && node.parentNode) {\n      node = node.parentNode;\n    }\n\n    if (node && node.nodeType() !== Node.ELEMENT_NODE) {\n      node = null;\n    }\n    return node;\n  }\n\n  async scrollIntoView(): Promise<void> {\n    const node = this.enclosingElementOrSelf();\n    if (!node) {\n      return;\n    }\n    const object = await node.resolveToObject();\n    if (!object) {\n      return;\n    }\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n    // @ts-expect-error\n    void object.callFunction(scrollIntoView);\n    object.release();\n    node.highlightForTwoSeconds();\n\n    function scrollIntoView(this: Element): void {\n      this.scrollIntoViewIfNeeded(true);\n    }\n  }\n\n  async focus(): Promise<void> {\n    const node = this.enclosingElementOrSelf();\n    if (!node) {\n      throw new Error('DOMNode.focus expects node to not be null.');\n    }\n    const object = await node.resolveToObject();\n    if (!object) {\n      return;\n    }\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n    // @ts-expect-error\n    await object.callFunction(focusInPage);\n    object.release();\n    node.highlightForTwoSeconds();\n    await this.#domModelInternal.target().pageAgent().invoke_bringToFront();\n\n    function focusInPage(this: HTMLElement): void {\n      this.focus();\n    }\n  }\n\n  simpleSelector(): string {\n    const lowerCaseName = this.localName() || this.nodeName().toLowerCase();\n    if (this.nodeType() !== Node.ELEMENT_NODE) {\n      return lowerCaseName;\n    }\n    const type = this.getAttribute('type');\n    const id = this.getAttribute('id');\n    const classes = this.getAttribute('class');\n\n    if (lowerCaseName === 'input' && type && !id && !classes) {\n      return lowerCaseName + '[type=\"' + CSS.escape(type) + '\"]';\n    }\n    if (id) {\n      return lowerCaseName + '#' + CSS.escape(id);\n    }\n    if (classes) {\n      const classList = classes.trim().split(/\\s+/g);\n      return (lowerCaseName === 'div' ? '' : lowerCaseName) + '.' + classList.map(cls => CSS.escape(cls)).join('.');\n    }\n    return lowerCaseName;\n  }\n}\n\nexport namespace DOMNode {\n  // TODO(crbug.com/1167717): Make this a const enum again\n  // eslint-disable-next-line rulesdir/const_enum\n  export enum PseudoElementNames {\n    Before = 'before',\n    After = 'after',\n    Marker = 'marker',\n    PageTransition = 'page-transition',\n    PageTransitionContainer = 'page-transition-container',\n    PageTransitionImageWrapper = 'page-transition-image-wrapper',\n    PageTransitionOutgoingImage = 'page-transition-outgoing-image',\n    PageTransitionIncomingImage = 'page-transition-incoming-image',\n  }\n\n  // TODO(crbug.com/1167717): Make this a const enum again\n  // eslint-disable-next-line rulesdir/const_enum\n  export enum ShadowRootTypes {\n    UserAgent = 'user-agent',\n    Open = 'open',\n    Closed = 'closed',\n  }\n}\n\nexport class DeferredDOMNode {\n  readonly #domModelInternal: DOMModel;\n  readonly #backendNodeIdInternal: Protocol.DOM.BackendNodeId;\n\n  constructor(target: Target, backendNodeId: Protocol.DOM.BackendNodeId) {\n    this.#domModelInternal = (target.model(DOMModel) as DOMModel);\n    this.#backendNodeIdInternal = backendNodeId;\n  }\n\n  resolve(callback: (arg0: DOMNode|null) => void): void {\n    void this.resolvePromise().then(callback);\n  }\n\n  async resolvePromise(): Promise<DOMNode|null> {\n    const nodeIds =\n        await this.#domModelInternal.pushNodesByBackendIdsToFrontend(new Set([this.#backendNodeIdInternal]));\n    return nodeIds && nodeIds.get(this.#backendNodeIdInternal) || null;\n  }\n\n  backendNodeId(): Protocol.DOM.BackendNodeId {\n    return this.#backendNodeIdInternal;\n  }\n\n  domModel(): DOMModel {\n    return this.#domModelInternal;\n  }\n\n  highlight(): void {\n    this.#domModelInternal.overlayModel().highlightInOverlay({deferredNode: this, selectorList: undefined});\n  }\n}\n\nexport class DOMNodeShortcut {\n  nodeType: number;\n  nodeName: string;\n  deferredNode: DeferredDOMNode;\n  constructor(target: Target, backendNodeId: Protocol.DOM.BackendNodeId, nodeType: number, nodeName: string) {\n    this.nodeType = nodeType;\n    this.nodeName = nodeName;\n    this.deferredNode = new DeferredDOMNode(target, backendNodeId);\n  }\n}\n\nexport class DOMDocument extends DOMNode {\n  body: DOMNode|null;\n  documentElement: DOMNode|null;\n  documentURL: Platform.DevToolsPath.UrlString;\n  baseURL: Platform.DevToolsPath.UrlString;\n  constructor(domModel: DOMModel, payload: Protocol.DOM.Node) {\n    super(domModel);\n    this.body = null;\n    this.documentElement = null;\n    this.init(this, false, payload);\n    this.documentURL = (payload.documentURL || '') as Platform.DevToolsPath.UrlString;\n    this.baseURL = (payload.baseURL || '') as Platform.DevToolsPath.UrlString;\n  }\n}\n\nexport class DOMModel extends SDKModel<EventTypes> {\n  agent: ProtocolProxyApi.DOMApi;\n  idToDOMNode: Map<Protocol.DOM.NodeId, DOMNode> = new Map();\n  #document: DOMDocument|null;\n  readonly #attributeLoadNodeIds: Set<Protocol.DOM.NodeId>;\n  readonly runtimeModelInternal: RuntimeModel;\n  #lastMutationId!: number;\n  #pendingDocumentRequestPromise: Promise<DOMDocument|null>|null;\n  #frameOwnerNode?: DOMNode|null;\n  #loadNodeAttributesTimeout?: number;\n  #searchId?: string;\n  constructor(target: Target) {\n    super(target);\n\n    this.agent = target.domAgent();\n\n    this.#document = null;\n    this.#attributeLoadNodeIds = new Set();\n    target.registerDOMDispatcher(new DOMDispatcher(this));\n    this.runtimeModelInternal = (target.model(RuntimeModel) as RuntimeModel);\n\n    this.#pendingDocumentRequestPromise = null;\n\n    if (!target.suspended()) {\n      void this.agent.invoke_enable({});\n    }\n\n    if (Root.Runtime.experiments.isEnabled('captureNodeCreationStacks')) {\n      void this.agent.invoke_setNodeStackTracesEnabled({enable: true});\n    }\n  }\n\n  runtimeModel(): RuntimeModel {\n    return this.runtimeModelInternal;\n  }\n\n  cssModel(): CSSModel {\n    return this.target().model(CSSModel) as CSSModel;\n  }\n\n  overlayModel(): OverlayModel {\n    return this.target().model(OverlayModel) as OverlayModel;\n  }\n\n  static cancelSearch(): void {\n    for (const domModel of TargetManager.instance().models(DOMModel)) {\n      domModel.cancelSearch();\n    }\n  }\n\n  private scheduleMutationEvent(node: DOMNode): void {\n    if (!this.hasEventListeners(Events.DOMMutated)) {\n      return;\n    }\n\n    this.#lastMutationId = (this.#lastMutationId || 0) + 1;\n    void Promise.resolve().then(callObserve.bind(this, node, this.#lastMutationId));\n\n    function callObserve(this: DOMModel, node: DOMNode, mutationId: number): void {\n      if (!this.hasEventListeners(Events.DOMMutated) || this.#lastMutationId !== mutationId) {\n        return;\n      }\n\n      this.dispatchEventToListeners(Events.DOMMutated, node);\n    }\n  }\n\n  requestDocument(): Promise<DOMDocument|null> {\n    if (this.#document) {\n      return Promise.resolve(this.#document);\n    }\n    if (!this.#pendingDocumentRequestPromise) {\n      this.#pendingDocumentRequestPromise = this.requestDocumentInternal();\n    }\n    return this.#pendingDocumentRequestPromise;\n  }\n\n  async getOwnerNodeForFrame(frameId: Protocol.Page.FrameId): Promise<DeferredDOMNode|null> {\n    // Returns an error if the frameId does not belong to the current target.\n    const response = await this.agent.invoke_getFrameOwner({frameId});\n    if (response.getError()) {\n      return null;\n    }\n    return new DeferredDOMNode(this.target(), response.backendNodeId);\n  }\n\n  private async requestDocumentInternal(): Promise<DOMDocument|null> {\n    const response = await this.agent.invoke_getDocument({});\n    if (response.getError()) {\n      console.error(response.getError());\n      return null;\n    }\n    const {root: documentPayload} = response;\n    this.#pendingDocumentRequestPromise = null;\n\n    if (documentPayload) {\n      this.setDocument(documentPayload);\n    }\n    if (!this.#document) {\n      console.error('No document');\n      return null;\n    }\n\n    const parentModel = this.parentModel();\n    if (parentModel && !this.#frameOwnerNode) {\n      await parentModel.requestDocument();\n      const mainFrame = this.target().model(ResourceTreeModel)?.mainFrame;\n      if (mainFrame) {\n        const response = await parentModel.agent.invoke_getFrameOwner({frameId: mainFrame.id});\n        if (!response.getError() && response.nodeId) {\n          this.#frameOwnerNode = parentModel.nodeForId(response.nodeId);\n        }\n      }\n    }\n\n    // Document could have been cleared by now.\n    if (this.#frameOwnerNode) {\n      const oldDocument = this.#frameOwnerNode.contentDocument();\n      this.#frameOwnerNode.setContentDocument(this.#document);\n      this.#frameOwnerNode.setChildren([]);\n      if (this.#document) {\n        this.#document.parentNode = this.#frameOwnerNode;\n        this.dispatchEventToListeners(Events.NodeInserted, this.#document);\n      } else if (oldDocument) {\n        this.dispatchEventToListeners(Events.NodeRemoved, {node: oldDocument, parent: this.#frameOwnerNode});\n      }\n    }\n    return this.#document;\n  }\n\n  existingDocument(): DOMDocument|null {\n    return this.#document;\n  }\n\n  async pushNodeToFrontend(objectId: Protocol.Runtime.RemoteObjectId): Promise<DOMNode|null> {\n    await this.requestDocument();\n    const {nodeId} = await this.agent.invoke_requestNode({objectId});\n    return nodeId ? this.nodeForId(nodeId) : null;\n  }\n\n  pushNodeByPathToFrontend(path: string): Promise<Protocol.DOM.NodeId|null> {\n    return this.requestDocument()\n        .then(() => this.agent.invoke_pushNodeByPathToFrontend({path}))\n        .then(({nodeId}) => nodeId);\n  }\n\n  async pushNodesByBackendIdsToFrontend(backendNodeIds: Set<Protocol.DOM.BackendNodeId>):\n      Promise<Map<Protocol.DOM.BackendNodeId, DOMNode|null>|null> {\n    await this.requestDocument();\n    const backendNodeIdsArray = [...backendNodeIds];\n    const {nodeIds} = await this.agent.invoke_pushNodesByBackendIdsToFrontend({backendNodeIds: backendNodeIdsArray});\n    if (!nodeIds) {\n      return null;\n    }\n    const map = new Map<Protocol.DOM.BackendNodeId, DOMNode|null>();\n    for (let i = 0; i < nodeIds.length; ++i) {\n      if (nodeIds[i]) {\n        map.set(backendNodeIdsArray[i], this.nodeForId(nodeIds[i]));\n      }\n    }\n    return map;\n  }\n\n  attributeModified(nodeId: Protocol.DOM.NodeId, name: string, value: string): void {\n    const node = this.idToDOMNode.get(nodeId);\n    if (!node) {\n      return;\n    }\n\n    node.setAttributeInternal(name, value);\n    this.dispatchEventToListeners(Events.AttrModified, {node: node, name: name});\n    this.scheduleMutationEvent(node);\n  }\n\n  attributeRemoved(nodeId: Protocol.DOM.NodeId, name: string): void {\n    const node = this.idToDOMNode.get(nodeId);\n    if (!node) {\n      return;\n    }\n    node.removeAttributeInternal(name);\n    this.dispatchEventToListeners(Events.AttrRemoved, {node: node, name: name});\n    this.scheduleMutationEvent(node);\n  }\n\n  inlineStyleInvalidated(nodeIds: number[]): void {\n    Platform.SetUtilities.addAll(this.#attributeLoadNodeIds, nodeIds);\n    if (!this.#loadNodeAttributesTimeout) {\n      this.#loadNodeAttributesTimeout = window.setTimeout(this.loadNodeAttributes.bind(this), 20);\n    }\n  }\n\n  private loadNodeAttributes(): void {\n    this.#loadNodeAttributesTimeout = undefined;\n    for (const nodeId of this.#attributeLoadNodeIds) {\n      void this.agent.invoke_getAttributes({nodeId}).then(({attributes}) => {\n        if (!attributes) {\n          // We are calling loadNodeAttributes asynchronously, it is ok if node is not found.\n          return;\n        }\n        const node = this.idToDOMNode.get(nodeId);\n        if (!node) {\n          return;\n        }\n        if (node.setAttributesPayload(attributes)) {\n          this.dispatchEventToListeners(Events.AttrModified, {node: node, name: 'style'});\n          this.scheduleMutationEvent(node);\n        }\n      });\n    }\n    this.#attributeLoadNodeIds.clear();\n  }\n\n  characterDataModified(nodeId: Protocol.DOM.NodeId, newValue: string): void {\n    const node = this.idToDOMNode.get(nodeId);\n    if (!node) {\n      console.error('nodeId could not be resolved to a node');\n      return;\n    }\n    node.setNodeValueInternal(newValue);\n    this.dispatchEventToListeners(Events.CharacterDataModified, node);\n    this.scheduleMutationEvent(node);\n  }\n\n  nodeForId(nodeId: Protocol.DOM.NodeId|null): DOMNode|null {\n    return nodeId ? this.idToDOMNode.get(nodeId) || null : null;\n  }\n\n  documentUpdated(): void {\n    // If we have this.#pendingDocumentRequestPromise in flight,\n    // it will contain most recent result.\n    const documentWasRequested = this.#pendingDocumentRequestPromise;\n    this.setDocument(null);\n    if (this.parentModel() && !documentWasRequested) {\n      void this.requestDocument();\n    }\n  }\n\n  private setDocument(payload: Protocol.DOM.Node|null): void {\n    this.idToDOMNode = new Map();\n    if (payload && 'nodeId' in payload) {\n      this.#document = new DOMDocument(this, payload);\n    } else {\n      this.#document = null;\n    }\n    DOMModelUndoStack.instance().dispose(this);\n\n    if (!this.parentModel()) {\n      this.dispatchEventToListeners(Events.DocumentUpdated, this);\n    }\n  }\n\n  private setDetachedRoot(payload: Protocol.DOM.Node): void {\n    if (payload.nodeName === '#document') {\n      new DOMDocument(this, payload);\n    } else {\n      DOMNode.create(this, null, false, payload);\n    }\n  }\n\n  setChildNodes(parentId: Protocol.DOM.NodeId, payloads: Protocol.DOM.Node[]): void {\n    if (!parentId && payloads.length) {\n      this.setDetachedRoot(payloads[0]);\n      return;\n    }\n\n    const parent = this.idToDOMNode.get(parentId);\n    parent?.setChildrenPayload(payloads);\n  }\n\n  childNodeCountUpdated(nodeId: Protocol.DOM.NodeId, newValue: number): void {\n    const node = this.idToDOMNode.get(nodeId);\n    if (!node) {\n      console.error('nodeId could not be resolved to a node');\n      return;\n    }\n    node.setChildNodeCount(newValue);\n    this.dispatchEventToListeners(Events.ChildNodeCountUpdated, node);\n    this.scheduleMutationEvent(node);\n  }\n\n  childNodeInserted(parentId: Protocol.DOM.NodeId, prevId: Protocol.DOM.NodeId, payload: Protocol.DOM.Node): void {\n    const parent = this.idToDOMNode.get(parentId);\n    const prev = this.idToDOMNode.get(prevId);\n    if (!parent) {\n      console.error('parentId could not be resolved to a node');\n      return;\n    }\n    const node = parent.insertChild(prev, payload);\n    this.idToDOMNode.set(node.id, node);\n    this.dispatchEventToListeners(Events.NodeInserted, node);\n    this.scheduleMutationEvent(node);\n  }\n\n  childNodeRemoved(parentId: Protocol.DOM.NodeId, nodeId: Protocol.DOM.NodeId): void {\n    const parent = this.idToDOMNode.get(parentId);\n    const node = this.idToDOMNode.get(nodeId);\n    if (!parent || !node) {\n      console.error('parentId or nodeId could not be resolved to a node');\n      return;\n    }\n    parent.removeChild(node);\n    this.unbind(node);\n    this.dispatchEventToListeners(Events.NodeRemoved, {node: node, parent: parent});\n    this.scheduleMutationEvent(node);\n  }\n\n  shadowRootPushed(hostId: Protocol.DOM.NodeId, root: Protocol.DOM.Node): void {\n    const host = this.idToDOMNode.get(hostId);\n    if (!host) {\n      return;\n    }\n    const node = DOMNode.create(this, host.ownerDocument, true, root);\n    node.parentNode = host;\n    this.idToDOMNode.set(node.id, node);\n    host.shadowRootsInternal.unshift(node);\n    this.dispatchEventToListeners(Events.NodeInserted, node);\n    this.scheduleMutationEvent(node);\n  }\n\n  shadowRootPopped(hostId: Protocol.DOM.NodeId, rootId: Protocol.DOM.NodeId): void {\n    const host = this.idToDOMNode.get(hostId);\n    if (!host) {\n      return;\n    }\n    const root = this.idToDOMNode.get(rootId);\n    if (!root) {\n      return;\n    }\n    host.removeChild(root);\n    this.unbind(root);\n    this.dispatchEventToListeners(Events.NodeRemoved, {node: root, parent: host});\n    this.scheduleMutationEvent(root);\n  }\n\n  pseudoElementAdded(parentId: Protocol.DOM.NodeId, pseudoElement: Protocol.DOM.Node): void {\n    const parent = this.idToDOMNode.get(parentId);\n    if (!parent) {\n      return;\n    }\n    const node = DOMNode.create(this, parent.ownerDocument, false, pseudoElement);\n    node.parentNode = parent;\n    this.idToDOMNode.set(node.id, node);\n    const pseudoType = node.pseudoType();\n    if (!pseudoType) {\n      throw new Error('DOMModel._pseudoElementAdded expects pseudoType to be defined.');\n    }\n    const currentPseudoElements = parent.pseudoElements().get(pseudoType);\n    if (currentPseudoElements) {\n      Platform.DCHECK(\n          () => pseudoType.startsWith('page-transition'),\n          'DOMModel.pseudoElementAdded expects parent to not already have this pseudo type added; only page-transition* pseudo elements can coexist under the same parent.');\n      currentPseudoElements.push(node);\n    } else {\n      parent.pseudoElements().set(pseudoType, [node]);\n    }\n    this.dispatchEventToListeners(Events.NodeInserted, node);\n    this.scheduleMutationEvent(node);\n  }\n\n  topLayerElementsUpdated(): void {\n    this.dispatchEventToListeners(Events.TopLayerElementsChanged);\n  }\n\n  pseudoElementRemoved(parentId: Protocol.DOM.NodeId, pseudoElementId: Protocol.DOM.NodeId): void {\n    const parent = this.idToDOMNode.get(parentId);\n    if (!parent) {\n      return;\n    }\n    const pseudoElement = this.idToDOMNode.get(pseudoElementId);\n    if (!pseudoElement) {\n      return;\n    }\n    parent.removeChild(pseudoElement);\n    this.unbind(pseudoElement);\n    this.dispatchEventToListeners(Events.NodeRemoved, {node: pseudoElement, parent: parent});\n    this.scheduleMutationEvent(pseudoElement);\n  }\n\n  distributedNodesUpdated(insertionPointId: Protocol.DOM.NodeId, distributedNodes: Protocol.DOM.BackendNode[]): void {\n    const insertionPoint = this.idToDOMNode.get(insertionPointId);\n    if (!insertionPoint) {\n      return;\n    }\n    insertionPoint.setDistributedNodePayloads(distributedNodes);\n    this.dispatchEventToListeners(Events.DistributedNodesChanged, insertionPoint);\n    this.scheduleMutationEvent(insertionPoint);\n  }\n\n  private unbind(node: DOMNode): void {\n    this.idToDOMNode.delete(node.id);\n    const children = node.children();\n    for (let i = 0; children && i < children.length; ++i) {\n      this.unbind(children[i]);\n    }\n    for (let i = 0; i < node.shadowRootsInternal.length; ++i) {\n      this.unbind(node.shadowRootsInternal[i]);\n    }\n    const pseudoElements = node.pseudoElements();\n    for (const value of pseudoElements.values()) {\n      for (const pseudoElement of value) {\n        this.unbind(pseudoElement);\n      }\n    }\n    const templateContent = node.templateContent();\n    if (templateContent) {\n      this.unbind(templateContent);\n    }\n  }\n\n  async getNodesByStyle(\n      computedStyles: {\n        name: string,\n        value: string,\n      }[],\n      pierce: boolean = false): Promise<Protocol.DOM.NodeId[]> {\n    await this.requestDocument();\n    if (!this.#document) {\n      throw new Error('DOMModel.getNodesByStyle expects to have a document.');\n    }\n    const response =\n        await this.agent.invoke_getNodesForSubtreeByStyle({nodeId: this.#document.id, computedStyles, pierce});\n    if (response.getError()) {\n      throw response.getError();\n    }\n    return response.nodeIds;\n  }\n\n  async performSearch(query: string, includeUserAgentShadowDOM: boolean): Promise<number> {\n    const response = await this.agent.invoke_performSearch({query, includeUserAgentShadowDOM});\n    if (!response.getError()) {\n      this.#searchId = response.searchId;\n    }\n    return response.getError() ? 0 : response.resultCount;\n  }\n\n  async searchResult(index: number): Promise<DOMNode|null> {\n    if (!this.#searchId) {\n      return null;\n    }\n    const {nodeIds} =\n        await this.agent.invoke_getSearchResults({searchId: this.#searchId, fromIndex: index, toIndex: index + 1});\n    return nodeIds && nodeIds.length === 1 ? this.nodeForId(nodeIds[0]) : null;\n  }\n\n  private cancelSearch(): void {\n    if (!this.#searchId) {\n      return;\n    }\n    void this.agent.invoke_discardSearchResults({searchId: this.#searchId});\n    this.#searchId = undefined;\n  }\n\n  classNamesPromise(nodeId: Protocol.DOM.NodeId): Promise<string[]> {\n    return this.agent.invoke_collectClassNamesFromSubtree({nodeId}).then(({classNames}) => classNames || []);\n  }\n\n  querySelector(nodeId: Protocol.DOM.NodeId, selector: string): Promise<Protocol.DOM.NodeId|null> {\n    return this.agent.invoke_querySelector({nodeId, selector}).then(({nodeId}) => nodeId);\n  }\n\n  querySelectorAll(nodeId: Protocol.DOM.NodeId, selector: string): Promise<Protocol.DOM.NodeId[]|null> {\n    return this.agent.invoke_querySelectorAll({nodeId, selector}).then(({nodeIds}) => nodeIds);\n  }\n\n  getTopLayerElements(): Promise<Protocol.DOM.NodeId[]|null> {\n    return this.agent.invoke_getTopLayerElements().then(({nodeIds}) => nodeIds);\n  }\n\n  markUndoableState(minorChange?: boolean): void {\n    void DOMModelUndoStack.instance().markUndoableState(this, minorChange || false);\n  }\n\n  async nodeForLocation(x: number, y: number, includeUserAgentShadowDOM: boolean): Promise<DOMNode|null> {\n    const response = await this.agent.invoke_getNodeForLocation({x, y, includeUserAgentShadowDOM});\n    if (response.getError() || !response.nodeId) {\n      return null;\n    }\n    return this.nodeForId(response.nodeId);\n  }\n\n  async getContainerForNode(nodeId: Protocol.DOM.NodeId, containerName?: string): Promise<DOMNode|null> {\n    const {nodeId: containerNodeId} = await this.agent.invoke_getContainerForNode({nodeId, containerName});\n    if (!containerNodeId) {\n      return null;\n    }\n    return this.nodeForId(containerNodeId);\n  }\n\n  pushObjectAsNodeToFrontend(object: RemoteObject): Promise<DOMNode|null> {\n    return object.isNode() && object.objectId ? this.pushNodeToFrontend(object.objectId) : Promise.resolve(null);\n  }\n\n  suspendModel(): Promise<void> {\n    return this.agent.invoke_disable().then(() => this.setDocument(null));\n  }\n\n  async resumeModel(): Promise<void> {\n    await this.agent.invoke_enable({});\n  }\n\n  dispose(): void {\n    DOMModelUndoStack.instance().dispose(this);\n  }\n\n  parentModel(): DOMModel|null {\n    const parentTarget = this.target().parentTarget();\n    return parentTarget ? parentTarget.model(DOMModel) : null;\n  }\n\n  getAgent(): ProtocolProxyApi.DOMApi {\n    return this.agent;\n  }\n\n  registerNode(node: DOMNode): void {\n    this.idToDOMNode.set(node.id, node);\n  }\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  AttrModified = 'AttrModified',\n  AttrRemoved = 'AttrRemoved',\n  CharacterDataModified = 'CharacterDataModified',\n  DOMMutated = 'DOMMutated',\n  NodeInserted = 'NodeInserted',\n  NodeRemoved = 'NodeRemoved',\n  DocumentUpdated = 'DocumentUpdated',\n  ChildNodeCountUpdated = 'ChildNodeCountUpdated',\n  DistributedNodesChanged = 'DistributedNodesChanged',\n  MarkersChanged = 'MarkersChanged',\n  TopLayerElementsChanged = 'TopLayerElementsChanged',\n}\n\nexport type EventTypes = {\n  [Events.AttrModified]: {node: DOMNode, name: string},\n  [Events.AttrRemoved]: {node: DOMNode, name: string},\n  [Events.CharacterDataModified]: DOMNode,\n  [Events.DOMMutated]: DOMNode,\n  [Events.NodeInserted]: DOMNode,\n  [Events.NodeRemoved]: {node: DOMNode, parent: DOMNode},\n  [Events.DocumentUpdated]: DOMModel,\n  [Events.ChildNodeCountUpdated]: DOMNode,\n  [Events.DistributedNodesChanged]: DOMNode,\n  [Events.MarkersChanged]: DOMNode,\n  [Events.TopLayerElementsChanged]: void,\n};\n\nclass DOMDispatcher implements ProtocolProxyApi.DOMDispatcher {\n  readonly #domModel: DOMModel;\n  constructor(domModel: DOMModel) {\n    this.#domModel = domModel;\n  }\n\n  documentUpdated(): void {\n    this.#domModel.documentUpdated();\n  }\n\n  attributeModified({nodeId, name, value}: Protocol.DOM.AttributeModifiedEvent): void {\n    this.#domModel.attributeModified(nodeId, name, value);\n  }\n\n  attributeRemoved({nodeId, name}: Protocol.DOM.AttributeRemovedEvent): void {\n    this.#domModel.attributeRemoved(nodeId, name);\n  }\n\n  inlineStyleInvalidated({nodeIds}: Protocol.DOM.InlineStyleInvalidatedEvent): void {\n    this.#domModel.inlineStyleInvalidated(nodeIds);\n  }\n\n  characterDataModified({nodeId, characterData}: Protocol.DOM.CharacterDataModifiedEvent): void {\n    this.#domModel.characterDataModified(nodeId, characterData);\n  }\n\n  setChildNodes({parentId, nodes}: Protocol.DOM.SetChildNodesEvent): void {\n    this.#domModel.setChildNodes(parentId, nodes);\n  }\n\n  childNodeCountUpdated({nodeId, childNodeCount}: Protocol.DOM.ChildNodeCountUpdatedEvent): void {\n    this.#domModel.childNodeCountUpdated(nodeId, childNodeCount);\n  }\n\n  childNodeInserted({parentNodeId, previousNodeId, node}: Protocol.DOM.ChildNodeInsertedEvent): void {\n    this.#domModel.childNodeInserted(parentNodeId, previousNodeId, node);\n  }\n\n  childNodeRemoved({parentNodeId, nodeId}: Protocol.DOM.ChildNodeRemovedEvent): void {\n    this.#domModel.childNodeRemoved(parentNodeId, nodeId);\n  }\n\n  shadowRootPushed({hostId, root}: Protocol.DOM.ShadowRootPushedEvent): void {\n    this.#domModel.shadowRootPushed(hostId, root);\n  }\n\n  shadowRootPopped({hostId, rootId}: Protocol.DOM.ShadowRootPoppedEvent): void {\n    this.#domModel.shadowRootPopped(hostId, rootId);\n  }\n\n  pseudoElementAdded({parentId, pseudoElement}: Protocol.DOM.PseudoElementAddedEvent): void {\n    this.#domModel.pseudoElementAdded(parentId, pseudoElement);\n  }\n\n  pseudoElementRemoved({parentId, pseudoElementId}: Protocol.DOM.PseudoElementRemovedEvent): void {\n    this.#domModel.pseudoElementRemoved(parentId, pseudoElementId);\n  }\n\n  distributedNodesUpdated({insertionPointId, distributedNodes}: Protocol.DOM.DistributedNodesUpdatedEvent): void {\n    this.#domModel.distributedNodesUpdated(insertionPointId, distributedNodes);\n  }\n\n  topLayerElementsUpdated(): void {\n    this.#domModel.topLayerElementsUpdated();\n  }\n}\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet DOMModelUndoStackInstance: DOMModelUndoStack|null;\n\nexport class DOMModelUndoStack {\n  #stack: DOMModel[];\n  #index: number;\n  #lastModelWithMinorChange: DOMModel|null;\n  constructor() {\n    this.#stack = [];\n    this.#index = 0;\n    this.#lastModelWithMinorChange = null;\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): DOMModelUndoStack {\n    const {forceNew} = opts;\n    if (!DOMModelUndoStackInstance || forceNew) {\n      DOMModelUndoStackInstance = new DOMModelUndoStack();\n    }\n\n    return DOMModelUndoStackInstance;\n  }\n\n  async markUndoableState(model: DOMModel, minorChange: boolean): Promise<void> {\n    // Both minor and major changes get into the #stack, but minor updates are coalesced.\n    // Commit major undoable state in the old model upon model switch.\n    if (this.#lastModelWithMinorChange && model !== this.#lastModelWithMinorChange) {\n      this.#lastModelWithMinorChange.markUndoableState();\n      this.#lastModelWithMinorChange = null;\n    }\n\n    // Previous minor change is already in the #stack.\n    if (minorChange && this.#lastModelWithMinorChange === model) {\n      return;\n    }\n\n    this.#stack = this.#stack.slice(0, this.#index);\n    this.#stack.push(model);\n    this.#index = this.#stack.length;\n\n    // Delay marking as major undoable states in case of minor operations until the\n    // major or model switch.\n    if (minorChange) {\n      this.#lastModelWithMinorChange = model;\n    } else {\n      await model.getAgent().invoke_markUndoableState();\n      this.#lastModelWithMinorChange = null;\n    }\n  }\n\n  async undo(): Promise<void> {\n    if (this.#index === 0) {\n      return Promise.resolve();\n    }\n    --this.#index;\n    this.#lastModelWithMinorChange = null;\n    await this.#stack[this.#index].getAgent().invoke_undo();\n  }\n\n  async redo(): Promise<void> {\n    if (this.#index >= this.#stack.length) {\n      return Promise.resolve();\n    }\n    ++this.#index;\n    this.#lastModelWithMinorChange = null;\n    await this.#stack[this.#index - 1].getAgent().invoke_redo();\n  }\n\n  dispose(model: DOMModel): void {\n    let shift = 0;\n    for (let i = 0; i < this.#index; ++i) {\n      if (this.#stack[i] === model) {\n        ++shift;\n      }\n    }\n    Platform.ArrayUtilities.removeElement(this.#stack, model);\n    this.#index -= shift;\n    if (this.#lastModelWithMinorChange === model) {\n      this.#lastModelWithMinorChange = null;\n    }\n  }\n}\n\nSDKModel.register(DOMModel, {capabilities: Capability.DOM, autostart: true});\nexport interface Attribute {\n  name: string;\n  value: string;\n  _node: DOMNode;\n}\n"]}